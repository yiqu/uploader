"use strict";(self.webpackChunkuploader=self.webpackChunkuploader||[]).push([[231],{3231:(Xo,Ot,d)=>{d.r(Ot),d.d(Ot,{MainModule:()=>Ko});var st=d(3271),h=d(6991),r=d(5620),te=d(61),ee=d(7462),Pt=d(5345),k=d(1402),t=d(5e3);let ne=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-main"]],decls:2,vars:0,consts:[[1,"container-fluid","mb-5","mt-3"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"router-outlet"),t.qZA())},directives:[k.lC],styles:[""]}),e})();var z=d(5698);const Lt=(0,r.PH)("[Upload/UI] attach a file",(0,r.Ky)()),St=(0,r.PH)("[Upload/UI] Remove all attached files"),tt=(0,r.PH)("[Upload/API] Upload file start",(0,r.Ky)()),rt=(0,r.PH)("[Upload/API] Upload file successful",(0,r.Ky)()),wt=(0,r.PH)("[Upload/API] Upload file failed",(0,r.Ky)()),lt=(0,r.PH)("[Upload/API] Upload file progress update",(0,r.Ky)()),ct=(0,r.PH)("[Upload/API] Update new photo in user DB start",(0,r.Ky)()),pt=(0,r.PH)("[Upload/API] Update new photo in user DB successful",(0,r.Ky)()),Zt=(0,r.PH)("[Upload/API] Update new photo in user DB failed",(0,r.Ky)()),et=(0,r.PH)("[Upload/API] Get user files start",(0,r.Ky)()),Dt=(0,r.PH)("[Upload/API] Get user files successful",(0,r.Ky)()),me=(0,r.PH)("[Upload/API] Get user files failed",(0,r.Ky)()),Ft=(0,r.PH)("[Upload/API] User is not logged in to fetch files"),It="uploadFiles",Mt="userFiles";var H=(()=>{return(e=H||(H={})).ADD="add",e.REMOVE="remove",H;var e})(),f=(()=>{return(e=f||(f={}))[e.EntitiesOnly=0]="EntitiesOnly",e[e.Both=1]="Both",e[e.None=2]="None",f;var e})();function v(e){return function(n,i){const a={ids:[...i.ids],entities:Object.assign({},i.entities)},s=e(n,a);return s===f.Both?Object.assign({},i,a):s===f.EntitiesOnly?Object.assign(Object.assign({},i),{entities:a.entities}):i}}function M(e,o){const n=o(e);return(0,t.X6Q)()&&void 0===n&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",e,"The `selectId` implementation:",o.toString()),n}function kt(e){function o(m,g){const p=M(m,e);return p in g.entities?f.None:(g.ids.push(p),g.entities[p]=m,f.Both)}function n(m,g){let p=!1;for(const c of m)p=o(c,g)!==f.None||p;return p?f.Both:f.None}function a(m,g){const p=M(m,e);return p in g.entities?(g.entities[p]=m,f.EntitiesOnly):(g.ids.push(p),g.entities[p]=m,f.Both)}function x(m,g){const c=(m instanceof Array?m:g.ids.filter(u=>m(g.entities[u]))).filter(u=>u in g.entities).map(u=>delete g.entities[u]).length>0;return c&&(g.ids=g.ids.filter(u=>u in g.entities)),c?f.Both:f.None}function D(m,g){return S([m],g)}function S(m,g){const p={};return(m=m.filter(u=>u.id in g.entities)).length>0?m.filter(_=>function L(m,g,p){const u=Object.assign({},p.entities[g.id],g.changes),_=M(u,e),T=_!==g.id;return T&&(m[g.id]=_,delete p.entities[g.id]),p.entities[_]=u,T}(p,_,g)).length>0?(g.ids=g.ids.map(_=>p[_]||_),f.Both):f.EntitiesOnly:f.None}function E(m,g){const p=[],c=[];for(const T of m){const C=M(T,e);C in g.entities?c.push({id:C,changes:T}):p.push(T)}const u=S(c,g),_=n(p,g);switch(!0){case _===f.None&&u===f.None:return f.None;case _===f.Both||u===f.Both:return f.Both;default:return f.EntitiesOnly}}return{removeAll:function U(m){return Object.assign({},m,{ids:[],entities:{}})},addOne:v(o),addMany:v(n),setAll:v(function i(m,g){return g.ids=[],g.entities={},n(m,g),f.Both}),setOne:v(a),setMany:v(function s(m,g){const p=m.map(c=>a(c,g));switch(!0){case p.some(c=>c===f.Both):return f.Both;case p.some(c=>c===f.EntitiesOnly):return f.EntitiesOnly;default:return f.None}}),updateOne:v(D),updateMany:v(S),upsertOne:v(function O(m,g){return E([m],g)}),upsertMany:v(E),removeOne:v(function l(m,g){return x([m],g)}),removeMany:v(x),map:v(function I(m,g){return S(g.ids.reduce((u,_)=>{const T=m(g.entities[_]);return T!==g.entities[_]&&u.push({id:_,changes:T}),u},[]).filter(({id:u})=>u in g.entities),g)}),mapOne:v(function at({map:m,id:g},p){const c=p.entities[g];return c?D({id:g,changes:m(c)},p):f.None})}}function Et(e={}){var o,n;const{selectId:i,sortComparer:a}={selectId:null!==(o=e.selectId)&&void 0!==o?o:U=>U.id,sortComparer:null!==(n=e.sortComparer)&&void 0!==n&&n},s=function ye(){return{getInitialState:function e(o={}){return Object.assign({ids:[],entities:{}},o)}}}(),l=function xe(){return{getSelectors:function e(o){const n=l=>l.ids,i=l=>l.entities,a=(0,r.P1)(n,i,(l,x)=>l.map(U=>x[U])),s=(0,r.P1)(n,l=>l.length);return o?{selectIds:(0,r.P1)(o,n),selectEntities:(0,r.P1)(o,i),selectAll:(0,r.P1)(o,a),selectTotal:(0,r.P1)(o,s)}:{selectIds:n,selectEntities:i,selectAll:a,selectTotal:s}}}}(),x=a?function Te(e,o){const{removeOne:n,removeMany:i,removeAll:a}=kt(e);function s(p,c){return l([p],c)}function l(p,c){const u=p.filter(_=>!(M(_,e)in c.entities));return 0===u.length?f.None:(g(u,c),f.Both)}function U(p,c){const u=M(p,e);return u in c.entities?(c.ids=c.ids.filter(_=>_!==u),g([p],c),f.Both):s(p,c)}function D(p,c){return I([p],c)}function I(p,c){const u=[],_=p.filter(T=>function S(p,c,u){if(!(c.id in u.entities))return!1;const T=Object.assign({},u.entities[c.id],c.changes),C=M(T,e);return delete u.entities[c.id],p.push(T),C!==c.id}(u,T,c)).length>0;if(0===u.length)return f.None;{const T=c.ids,C=[];return c.ids=c.ids.filter((F,G)=>F in c.entities||(C.push(G),!1)),g(u,c),!_&&C.every(F=>c.ids[F]===T[F])?f.EntitiesOnly:f.Both}}function m(p,c){const u=[],_=[];for(const F of p){const G=M(F,e);G in c.entities?_.push({id:G,changes:F}):u.push(F)}const T=I(_,c),C=l(u,c);switch(!0){case C===f.None&&T===f.None:return f.None;case C===f.Both||T===f.Both:return f.Both;default:return f.EntitiesOnly}}function g(p,c){p.sort(o);const u=[];let _=0,T=0;for(;_<p.length&&T<c.ids.length;){const C=p[_],F=M(C,e),G=c.ids[T];o(C,c.entities[G])<=0?(u.push(F),_++):(u.push(G),T++)}c.ids=u.concat(_<p.length?p.slice(_).map(e):c.ids.slice(T)),p.forEach((C,F)=>{c.entities[e(C)]=C})}return{removeOne:n,removeMany:i,removeAll:a,addOne:v(s),updateOne:v(D),upsertOne:v(function E(p,c){return m([p],c)}),setAll:v(function x(p,c){return c.entities={},c.ids=[],l(p,c),f.Both}),setOne:v(U),setMany:v(function L(p,c){const u=p.map(_=>U(_,c));switch(!0){case u.some(_=>_===f.Both):return f.Both;case u.some(_=>_===f.EntitiesOnly):return f.EntitiesOnly;default:return f.None}}),addMany:v(l),updateMany:v(I),upsertMany:v(m),map:v(function at(p,c){return I(c.ids.reduce((_,T)=>{const C=p(c.entities[T]);return C!==c.entities[T]&&_.push({id:T,changes:C}),_},[]),c)}),mapOne:v(function O({map:p,id:c},u){const _=u.entities[c];return _?D({id:c,changes:p(_)},u):f.None})}}(i,a):kt(i);return Object.assign(Object.assign(Object.assign({selectId:i,sortComparer:a},s),l),x)}const w=Et({selectId:function be(e){return e.id},sortComparer:function ve(e,o){return e.attachDate&&o.attachDate?e.attachDate<o.attachDate?1:-1:1}}),Ue=w.getInitialState({apiWorking:!1,filesUploadedAndUrlAddedToDb:[],errMsg:void 0,error:!1}),Ce=(0,r.Lq)(Ue,(0,r.on)(St,e=>w.removeAll(Object.assign(Object.assign({},e),{apiWorking:!1,error:!1,errMsg:void 0,filesUploadedAndUrlAddedToDb:[]}))),(0,r.on)(tt,(e,{file:o,fileId:n})=>{const i={attachDate:(new Date).getTime(),dateModified:o.lastModified,file:o,fileName:o.name,fileSize:o.size,id:n,completed:!1,progress:0,downloadUrl:void 0};return w.addOne(i,Object.assign(Object.assign({},e),{apiWorking:!0}))}),(0,r.on)(lt,(e,{fileId:o,progress:n,downloadUrl:i})=>{var a,s;const l={id:o,changes:{progress:null!=n?n:null===(a=e.entities[o])||void 0===a?void 0:a.progress,downloadUrl:null!=i?i:null===(s=e.entities[o])||void 0===s?void 0:s.downloadUrl}};return w.updateOne(l,Object.assign(Object.assign({},e),{apiWorking:!0}))}),(0,r.on)(rt,(e,{fileId:o})=>{const n={id:o,changes:{completed:!0,completedDate:(new Date).getTime()}};return w.updateOne(n,Object.assign(Object.assign({},e),{apiWorking:!1}))}),(0,r.on)(wt,(e,{errMsg:o})=>Object.assign(Object.assign({},e),{apiWorking:!1,error:!0,errMsg:o})),(0,r.on)(ct,(e,{photoData:o})=>w.updateOne({id:o.id,changes:{urlUploaded:!1}},Object.assign(Object.assign({},e),{apiWorking:!0}))),(0,r.on)(pt,(e,{photoData:o})=>{var n;const i={id:o.id,changes:{urlUploaded:!0}},a=[...null!==(n=e.filesUploadedAndUrlAddedToDb)&&void 0!==n?n:[]];return a.push(o),w.updateOne(i,Object.assign(Object.assign({},e),{apiWorking:!1,filesUploadedAndUrlAddedToDb:a}))}),(0,r.on)(Zt,(e,{errMsg:o})=>Object.assign(Object.assign({},e),{apiWorking:!1,error:!0,errMsg:o})));function Ae(e,o){return Ce(e,o)}const W=(0,r.ZF)(It),Ht=((0,r.P1)(W,w.getSelectors().selectIds),(0,r.P1)(W,w.getSelectors().selectEntities),(0,r.P1)(W,w.getSelectors().selectAll)),Oe=(0,r.P1)(W,w.getSelectors().selectTotal),Pe=(0,r.P1)(W,e=>e.apiWorking),gt=(0,r.P1)(W,e=>e.filesUploadedAndUrlAddedToDb),Le=(0,r.P1)(Oe,gt,(e,o)=>e===o.length),Se=(0,r.P1)(Ht,gt,(e,o)=>({total:e,uploadings:o})),N=Et({selectId:function we(e){return e.id},sortComparer:function Ze(e,o){return e.dateUploaded&&o.dateUploaded?e.dateUploaded<o.dateUploaded?1:-1:1}}),De=N.getInitialState({apiWorking:!1,firstTimeLoading:!0,errMsg:void 0,error:!1}),Fe=(0,r.Lq)(De,(0,r.on)(et,e=>Object.assign(Object.assign({},e),{apiWorking:!0})),(0,r.on)(Dt,(e,{files:o})=>N.setAll(o,Object.assign(Object.assign({},e),{apiWorking:!1,firstTimeLoading:!1}))),(0,r.on)(Ft,e=>N.removeAll(Object.assign(Object.assign({},e),{apiWorking:!1}))));function Ie(e,o){return Fe(e,o)}var Me=d(5839);const Nt="filesDisplayTabs",nt=(0,r.ZF)(Nt),ke=(0,r.P1)(nt,e=>({selectedTabLabel:e.selectedTabLabel,tabs:e.tabs})),Ee=(0,r.P1)(nt,e=>e.tabs),He=(0,r.P1)(nt,e=>{var o;return null!==(o=e.actionButtons)&&void 0!==o?o:[]}),Qt=(0,r.P1)(nt,e=>e.pagination),Q=(0,r.ZF)(Mt),Bt=((0,r.P1)(Q,N.getSelectors().selectIds),(0,r.P1)(Q,N.getSelectors().selectEntities),(0,r.P1)(Q,N.getSelectors().selectAll)),Ne=(0,r.P1)(Q,N.getSelectors().selectTotal),Qe=(0,r.P1)(Q,e=>e.firstTimeLoading),Rt=(0,r.P1)(Q,Me.t0,Qe,(e,o,n)=>(e.apiWorking||!!o)&&n),Be=(0,r.P1)(Q,e=>e.apiWorking),Re=(0,r.P1)(Bt,e=>{if(e&&e.length>0){const o=[...e];return o.sort((i,a)=>i.dateUploaded>a.dateUploaded?-1:1),o.slice(0,5)}return[]}),Ye=(0,r.P1)(Rt,Bt,Qt,(e,o,n)=>{let a=[...o];const s=30*n.currentPage;return a=a.slice(s,s+30),{apiLoading:e,columnData:a,columnIds:["fileName","photoUrl","fileSize","dateUploaded"]}});var Ge=d(5439);let ut=(()=>{class e{constructor(n){this.storage=n}uploadBlob(n,i){const a="uploader-app/"+this.getCurrentTime()+"/"+i,s=this.storage.ref(a),l=s.put(n);return{ref:s,task:l}}getCurrentTime(){return Ge().format("MM-DD-YYYY")}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(st.Q1))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var P=d(5265),dt=d(2843),A=d(4004),q=d(262);let Je=(()=>{class e{constructor(n,i){this.firestore=n,this.storage=i}createDocument(n,i){const a=(0,P.JU)(this.firestore,"uploader/"+i);return(0,P.pl)(a,n)}updateDocument(n){if(n){const i=(0,P.JU)(this.firestore,"uploader/");return(0,P.r7)(i,{amount:n})}return Promise.resolve()}addDocumentToCollection(n,i){const a=(0,P.JU)((0,P.hJ)(this.firestore,"uploader/"+i)),s=a.id,l=Object.assign(Object.assign({},n),{id:s});return{operationObs:(0,P.pl)(a,l),id:s}}getDocument(n){const i=(0,P.JU)(this.firestore,"uploader/"+n);return(0,P.KO)(i).pipe((0,z.q)(1),(0,A.U)(a=>a.data()),(0,q.K)(a=>(console.error(a),(0,dt._)(()=>{const s=new Error(a);return s.timestamp=Date.now(),s}))))}getDataByCollectionName(n){const i=(0,P.hJ)(this.firestore,"uploader/");return(0,P.$k)(i).pipe((0,z.q)(1),(0,q.K)(a=>(console.error(a),(0,dt._)(()=>{const s=new Error(a);return s.timestamp=Date.now(),s}))),(0,A.U)(a=>a.map(s=>{const l=s.data();return Object.assign({id:s.id},l)})))}getCollection(n){const i=(0,P.hJ)(this.firestore,"uploader/"+n);return(0,P.$k)(i).pipe((0,z.q)(1),(0,q.K)(a=>(console.error(a),(0,dt._)(()=>{const s=new Error(a);return s.timestamp=Date.now(),s}))),(0,A.U)(a=>a.map(s=>{const l=s.data();return Object.assign({},l)})))}uploadBlob(n){return this.storage.ref("folder-1").put(n)}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(P.gg),t.LFG(st.Q1))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),B=(()=>{class e{constructor(n,i,a){this.store=n,this.ss=i,this.rs=a,this.filesUploadingAll$=this.store.select(Ht),this.anyFilesUploading$=this.store.select(Pe),this.filesUploaded$=this.store.select(gt),this.isFilesUploadFinished$=this.store.select(Le),this.uploadingsAndTotalFiles$=this.store.select(Se),this.userFilesApiLoading$=this.store.select(Rt),this.userFileApiWorking$=this.store.select(Be),this.userFilesCount$=this.store.select(Ne),this.userRecentUploads$=this.store.select(Re),this.getFilesTableData$=this.store.select(Ye)}attachFile(n,i){this.store.dispatch(Lt({file:n,fileId:i}))}cleanUpAttachedFiles(){this.store.dispatch(St())}uploadFile(n,i){return this.ss.uploadBlob(n,i)}addPhotoUrl(n,i){return this.rs.addDocumentToCollection(n,i+"/photos")}getUserPhotos(n){return this.rs.getCollection(n+"/photos")}getUserFiles(){return this.store.dispatch(et({user:void 0}))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(r.yh),t.LFG(ut),t.LFG(Je))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ot=d(3702),Yt=d(3003),ft=d(7261),_t=d(8966),J=(()=>{return(e=J||(J={})).MINIMIZE="minimize",e.MAXIMIZE="maximize",e.CLOSE="close",J;var e})(),y=d(7093),it=d(7423),R=d(5245),b=d(9808),Gt=d(655),Wt=d(8603);class Y{transform(o,n){if(o){let i=o.slice(0,n);return n>=o.length?o:i+".."}return o+""}}Y.\u0275fac=function(o){return new(o||Y)},Y.\u0275pipe=t.Yjl({name:"stringSliceCutoff",type:Y,pure:!0}),(0,Gt.gn)([(0,Wt.Z)()],Y.prototype,"transform",null);var mt=d(4836),j=d(837);function je(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"div",10),t._uU(2),t.qZA(),t.TgZ(3,"div",11)(4,"mat-icon",12),t._uU(5,"task_alt"),t.qZA()(),t.BQk()),2&e){const n=t.oxw().ngIf;t.xp6(2),t.AsE(" ",n.uploadings.length," / ",n.total.length," files uploaded ")}}function $e(e,o){if(1&e&&(t.TgZ(0,"div",10),t._uU(1),t.qZA(),t.TgZ(2,"mat-icon",13),t._uU(3,"hourglass_bottom"),t.qZA()),2&e){const n=t.oxw().ngIf;t.xp6(1),t.AsE(" Uploading: ",n.uploadings.length," / ",n.total.length," ")}}function ze(e,o){if(1&e&&(t.ynx(0),t.YNc(1,je,6,2,"ng-container",6),t.ALo(2,"async"),t.YNc(3,$e,4,2,"ng-template",null,9,t.W1O),t.BQk()),2&e){const n=t.MAs(4),i=t.oxw(3);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,i.data.isFilesUploadFinished))("ngIfElse",n)}}function qe(e,o){if(1&e&&(t.ynx(0),t._UZ(1,"img",23),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("src",null==n?null:n.downloadUrl,t.LSH)}}function Ke(e,o){1&e&&(t.TgZ(0,"mat-icon",24),t._uU(1," cloud_upload "),t.qZA())}function Ve(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"div",15)(2,"div"),t.YNc(3,qe,2,1,"ng-container",6),t.YNc(4,Ke,2,0,"ng-template",null,16,t.W1O),t.qZA(),t.TgZ(6,"div",17)(7,"div",18)(8,"a",19),t._uU(9),t.ALo(10,"stringSliceCutoff"),t.qZA(),t.TgZ(11,"div",20),t._uU(12),t.qZA()(),t.TgZ(13,"div",21)(14,"div"),t._uU(15),t.ALo(16,"fileSizeDisplay"),t.qZA(),t.TgZ(17,"div",22),t.ALo(18,"dateDisplay"),t._uU(19),t.ALo(20,"dateFromNow"),t.qZA()()()(),t.BQk()),2&e){const n=o.$implicit,i=t.MAs(5);t.xp6(3),t.Q6J("ngIf",null==n?null:n.downloadUrl)("ngIfElse",i),t.xp6(4),t.Q6J("title",null==n?null:n.fileName),t.xp6(1),t.Q6J("href",null==n?null:n.downloadUrl,t.LSH),t.xp6(1),t.hij(" ",t.xi3(10,9,null==n?null:n.fileName,25)," - "),t.xp6(3),t.hij(" ",n.progress,"% "),t.xp6(3),t.hij(" ",t.lcZ(16,12,null==n?null:n.fileSize)," - "),t.xp6(2),t.Q6J("title",t.xi3(18,14,null==n?null:n.attachDate,"FULLDATE")),t.xp6(2),t.hij(" ",t.lcZ(20,17,null==n?null:n.attachDate)," ")}}function Xe(e,o){if(1&e&&(t.ynx(0),t.YNc(1,Ve,21,19,"ng-container",14),t.BQk()),2&e){const n=o.ngIf;t.xp6(1),t.Q6J("ngForOf",n)}}function tn(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"div",7),t.YNc(2,ze,5,4,"ng-container",4),t.ALo(3,"async"),t.qZA(),t.TgZ(4,"div",8),t.YNc(5,Xe,2,1,"ng-container",4),t.ALo(6,"async"),t.qZA(),t.BQk()),2&e){const n=t.oxw(2);t.xp6(2),t.Q6J("ngIf",t.lcZ(3,2,n.data.uploadingsAndTotalFiles)),t.xp6(3),t.Q6J("ngIf",t.lcZ(6,4,n.data.fileStatus))}}function en(e,o){if(1&e&&(t.ynx(0),t.YNc(1,tn,7,6,"ng-container",6),t.BQk()),2&e){const n=o.ngIf;t.oxw();const i=t.MAs(16);t.xp6(1),t.Q6J("ngIf",n.length>0)("ngIfElse",i)}}function nn(e,o){1&e&&(t.TgZ(0,"div",25),t._uU(1," Upload queue is empty. "),t.qZA())}let on=(()=>{class e{constructor(n,i){this.dialogRef=n,this.data=i,this.minimize=J.MINIMIZE,this.close=J.CLOSE}ngOnInit(){}onDialogClose(n){this.dialogRef.close({action:n})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(_t.so),t.Y36(_t.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["progress-dialog-display"]],decls:17,vars:3,consts:[["fxLayout","column","fxLayoutAlign","start center","fxLayoutGap","0px"],["fxLayout","row","fxLayoutAlign","space-between center",1,"title","quicksand","fw-500","w-100"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","1px"],["mat-icon-button","",3,"click"],[4,"ngIf"],["nothingUploading",""],[4,"ngIf","ngIfElse"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"content","w-100","bb-1"],["fxLayout","column","fxLayoutAlign","start center","fxLayoutGap","10px",1,"content","w-100"],["uploading",""],[1,""],["fxLayout","column","fxLayoutAlign","center center",1,""],[1,"text-success"],[1,"text-primary"],[4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","15px",1,"w-100"],["imgPlaceholder",""],["fxLayout","column","fxLayoutAlign","center start","fxLayoutGap","5px"],["fxLayout","row","fxLayoutAlign","start start","fxLayoutGap","5px",3,"title"],["target","_blank","rel","noopener noreferrer",1,"stateful",3,"href"],[1,"fw-500","percent"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","5px",1,"meta"],[1,"date",3,"title"],["alt","Photo img","width","50","height","50",3,"src"],[1,"pic-progress"],["fxLayout","row","fxLayoutAlign","start center",1,"content","w-100"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div"),t._uU(3," Upload Progress "),t.qZA(),t.TgZ(4,"div",2)(5,"div")(6,"button",3),t.NdJ("click",function(){return i.onDialogClose(i.minimize)}),t.TgZ(7,"mat-icon"),t._uU(8,"minimize"),t.qZA()()(),t.TgZ(9,"div")(10,"button",3),t.NdJ("click",function(){return i.onDialogClose(i.close)}),t.TgZ(11,"mat-icon"),t._uU(12,"close"),t.qZA()()()()(),t.YNc(13,en,2,2,"ng-container",4),t.ALo(14,"async"),t.qZA(),t.YNc(15,nn,2,0,"ng-template",null,5,t.W1O)),2&n&&(t.xp6(13),t.Q6J("ngIf",t.lcZ(14,1,i.data.fileStatus)))},directives:[y.xw,y.Wh,y.SQ,it.lW,R.Hw,b.O5,b.sg],pipes:[b.Ov,Y,mt.nV,j.o,j.G],styles:[".title[_ngcontent-%COMP%]{background-color:#2a2961;color:#fff;padding:20px}.content[_ngcontent-%COMP%]{padding:15px}.content[_ngcontent-%COMP%]   .percent[_ngcontent-%COMP%]{color:#093}.content[_ngcontent-%COMP%]   mat-icon.pic-progress[_ngcontent-%COMP%]{color:#517e5d}"]}),e})();const K=(0,r.PH)("[Progress Display/UI] Toggle upload progress snackbar",(0,r.Ky)()),ht=(0,r.PH)("[Progress Display/UI] Toggle upload progress dialog",(0,r.Ky)()),Jt=(0,r.PH)("[Progress Display/UI] Closed dialog via minimize or click out");let jt=(()=>{class e{constructor(n,i){this.dialog=n,this.store=i}openDialog(n){var i;return null===(i=this.displayRef)||void 0===i||i.close(),this.displayRef=this.dialog.open(on,{minWidth:"calc(100% - 50rem)",height:"calc(100% - 10rem)",panelClass:"progress-dialog-display",data:n,autoFocus:!1}),this.displayRef}closeDialog(){var n;null===(n=this.displayRef)||void 0===n||n.close()}dispatchToggleDialog(n){this.store.dispatch(ht({status:n}))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(_t.uw),t.LFG(r.yh))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function ln(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"div",8),t._uU(2),t.qZA(),t.TgZ(3,"div",9)(4,"mat-icon",10),t._uU(5,"task_alt"),t.qZA()(),t.BQk()),2&e){const n=t.oxw(2).ngIf;t.xp6(2),t.AsE(" ",n.uploadings.length," / ",n.total.length," files uploaded ")}}function cn(e,o){if(1&e&&(t.TgZ(0,"div",8),t._uU(1),t.qZA(),t.TgZ(2,"mat-icon",11),t._uU(3,"hourglass_bottom"),t.qZA()),2&e){const n=t.oxw(2).ngIf;t.xp6(1),t.AsE(" Uploading: ",n.uploadings.length," / ",n.total.length," ")}}function pn(e,o){if(1&e&&(t.ynx(0),t.YNc(1,ln,6,2,"ng-container",5),t.ALo(2,"async"),t.YNc(3,cn,4,2,"ng-template",null,7,t.W1O),t.BQk()),2&e){const n=t.MAs(4),i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,i.data.isFilesUploadFinished))("ngIfElse",n)}}function gn(e,o){1&e&&t._uU(0," Upload queue is empty. ")}function un(e,o){if(1&e&&(t.ynx(0),t.YNc(1,pn,5,4,"ng-container",5),t.YNc(2,gn,1,0,"ng-template",null,6,t.W1O),t.BQk()),2&e){const n=o.ngIf,i=t.MAs(3);t.xp6(1),t.Q6J("ngIf",n.total.length>0)("ngIfElse",i)}}let dn=(()=>{class e{constructor(n,i,a,s){this.data=n,this.progressRef=i,this.ps=a,this.ds=s}ngOnInit(){}onMaximizeClick(){this.ds.dispatchToggleDialog(!0)}onCloseSnackbarClick(){this.ps.dispatchToggleSnackbar(!1)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(ft.qD),t.Y36(ft.OX),t.Y36(yt),t.Y36(jt))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-shared-progress-snackbar"]],decls:13,vars:3,consts:[["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","0px",1,"w-100"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","5px",1,"sb-body",3,"click"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","1px"],["mat-icon-button","",3,"click"],[4,"ngIf","ngIfElse"],["emptyQueue",""],["uploading",""],[1,""],["fxLayout","column","fxLayoutAlign","center center",1,""],[1,"text-success"],[1,"text-primary"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return i.onMaximizeClick()}),t.YNc(2,un,4,2,"ng-container",2),t.ALo(3,"async"),t.qZA(),t.TgZ(4,"div",3)(5,"div")(6,"button",4),t.NdJ("click",function(){return i.onMaximizeClick()}),t.TgZ(7,"mat-icon"),t._uU(8,"maximize"),t.qZA()()(),t.TgZ(9,"div")(10,"button",4),t.NdJ("click",function(){return i.onCloseSnackbarClick()}),t.TgZ(11,"mat-icon"),t._uU(12,"close"),t.qZA()()()()()),2&n&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,1,i.data.uploadingsAndTotalFiles)))},directives:[y.xw,y.Wh,y.SQ,b.O5,R.Hw,it.lW],pipes:[b.Ov],styles:[".sb-body[_ngcontent-%COMP%]{cursor:pointer}"]}),e})(),yt=(()=>{class e{constructor(n,i){this.snackBar=n,this.store=i,this.defaultHorizontalPosition="center",this.defaultVerticalPosition="bottom"}getProgressSnackbar(n){var i;return null===(i=this.currentSnackbarRef)||void 0===i||i.dismiss(),this.currentSnackbarRef=this.snackBar.openFromComponent(dn,{horizontalPosition:this.defaultHorizontalPosition,verticalPosition:this.defaultVerticalPosition,duration:0,panelClass:"progress-snackbar",data:n}),this.currentSnackbarRef}closeProgressSnackbar(){var n;null===(n=this.currentSnackbarRef)||void 0===n||n.dismiss()}dispatchToggleSnackbar(n){this.store.dispatch(K({status:n}))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(ft.ux),t.LFG(r.yh))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var fn=d(5899);function _n(e,o){if(1&e&&(t.ynx(0),t._UZ(1,"mat-progress-bar",3),t.BQk()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("mode",n.mode)}}function mn(e,o){if(1&e&&t._UZ(0,"mat-progress-bar",4),2&e){const n=t.oxw();t.Q6J("mode",n.mode)("value",n.progress)("color",100===n.progress?"primary":"accent")}}let xt=(()=>{class e{constructor(){this.mode="indeterminate"}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["shared-loading-bar"]],inputs:{progress:"progress",mode:"mode"},decls:4,vars:2,consts:[[1,"parent"],[4,"ngIf","ngIfElse"],["nonIndeter",""],["color","primary",3,"mode"],[3,"mode","value","color"]],template:function(n,i){if(1&n&&(t.TgZ(0,"div",0),t.YNc(1,_n,2,1,"ng-container",1),t.YNc(2,mn,1,3,"ng-template",null,2,t.W1O),t.qZA()),2&n){const a=t.MAs(3);t.xp6(1),t.Q6J("ngIf","indeterminate"===i.mode)("ngIfElse",a)}},directives:[b.O5,fn.pW],styles:[".parent[_ngcontent-%COMP%]{height:100%}mat-progress-bar.mat-progress-bar[_ngcontent-%COMP%]{height:100%;border-radius:30px}"]}),e})();function hn(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"div",15)(2,"div"),t._uU(3),t.qZA()(),t.BQk()),2&e){const n=t.oxw(2);t.xp6(3),t.hij(" Uploading ( ",n.file.progress,"% ) ")}}function yn(e,o){if(1&e&&(t.ynx(0),t._UZ(1,"shared-loading-bar",16),t.BQk()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("progress",n.file.progress)("mode","determinate")}}function xn(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"div",17),t._UZ(2,"img",18),t.qZA(),t.BQk()),2&e){const n=t.oxw(2);t.xp6(2),t.Q6J("src",n.imgPreview,t.LSH)}}function Tn(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"a",19),t._uU(2,"Click here"),t.qZA(),t.BQk()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("href",n.file.downloadUrl,t.LSH)}}function bn(e,o){1&e&&t._uU(0," Creating URL... ")}function vn(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"div",3)(2,"div",4)(3,"div",5),t.YNc(4,hn,4,1,"ng-container",6),t.qZA(),t.TgZ(5,"div",7)(6,"div",8),t.YNc(7,yn,2,2,"ng-container",0),t.qZA()(),t.YNc(8,xn,3,1,"ng-container",6),t.TgZ(9,"div",9),t._UZ(10,"hr"),t.qZA(),t.TgZ(11,"div",10)(12,"div",11)(13,"div",12),t._uU(14," File Name: "),t.qZA(),t.TgZ(15,"div",13),t._uU(16),t.qZA()(),t.TgZ(17,"div",11)(18,"div",12),t._uU(19," File Size: "),t.qZA(),t.TgZ(20,"div",13),t._uU(21),t.ALo(22,"fileSizeDisplay"),t.qZA()(),t.TgZ(23,"div",11)(24,"div",12),t._uU(25," Date modified: "),t.qZA(),t.TgZ(26,"div"),t._uU(27),t.ALo(28,"dateDisplay"),t.qZA()(),t.TgZ(29,"div",11)(30,"div",12),t._uU(31," Download URL: "),t.qZA(),t.TgZ(32,"div"),t.YNc(33,Tn,3,1,"ng-container",6),t.YNc(34,bn,1,0,"ng-template",null,14,t.W1O),t.qZA()()()()(),t.BQk()),2&e){const n=t.MAs(35),i=t.oxw(),a=t.MAs(2),s=t.MAs(4);t.xp6(4),t.Q6J("ngIf",i.file.progress<100)("ngIfElse",a),t.xp6(3),t.Q6J("ngIf",i.file.progress),t.xp6(1),t.Q6J("ngIf",i.isImgType)("ngIfElse",s),t.xp6(8),t.hij(" ",i.file.fileName," "),t.xp6(5),t.hij(" ",t.lcZ(22,10,i.file.fileSize)," "),t.xp6(6),t.hij(" ",t.xi3(28,12,i.file.dateModified,"MDY")," "),t.xp6(6),t.Q6J("ngIf",i.file.downloadUrl)("ngIfElse",n)}}function Un(e,o){1&e&&(t.TgZ(0,"div",15)(1,"div",20)(2,"mat-icon",21),t._uU(3,"check_circle"),t.qZA()(),t.TgZ(4,"div"),t._uU(5," Completed "),t.qZA()())}function Cn(e,o){1&e&&(t.TgZ(0,"div",17)(1,"mat-icon",22),t._uU(2," description "),t.qZA()())}const An=["image/jpeg","image/png","image/gif"];let On=(()=>{class e{constructor(){this.isImgType=!1,this.reader=new FileReader}ngOnInit(){}ngOnChanges(n){var i,a,s;this.imgId!==n.file.currentValue.id&&(null===(i=this.file)||void 0===i?void 0:i.file)&&(this.isImgType=!!An.includes(this.file.file.type),this.reader.onload=l=>this.imgPreview=this.reader.result,this.reader.readAsDataURL(null===(a=this.file)||void 0===a?void 0:a.file)),this.imgId||(this.imgId=null===(s=this.file)||void 0===s?void 0:s.id)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-upload-item"]],inputs:{file:"file"},features:[t.TTD],decls:5,vars:1,consts:[[4,"ngIf"],["finished",""],["notImg",""],[1,"file-parent"],[1,"card"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","10px",1,"loading-status","poppins"],[4,"ngIf","ngIfElse"],["fxLayout","row","fxLayoutAlign","center center"],[1,"progress-parent"],[1,"w-100"],["fxLayout","column","fxLayoutAlign","start start","fxLayoutGap","5px",1,"w-100","poppins","info-parent"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"info-line"],[1,"label"],[1,"value"],["noUrl",""],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","10px"],[3,"progress","mode"],[1,"image-parent"],[1,"preview-img",3,"src"],["target","_blank",3,"href"],["fxLayout","column","fxLayoutAlign","center center"],[1,"done"],["fxLayout","row","fxLayoutAlign","center center",1,"file-icon"]],template:function(n,i){1&n&&(t.YNc(0,vn,36,15,"ng-container",0),t.YNc(1,Un,6,0,"ng-template",null,1,t.W1O),t.YNc(3,Cn,3,0,"ng-template",null,2,t.W1O)),2&n&&t.Q6J("ngIf",i.file)},directives:[b.O5,y.xw,y.Wh,y.SQ,xt,R.Hw],pipes:[mt.nV,j.o],styles:[".file-parent[_ngcontent-%COMP%]{margin-top:15px}.file-parent[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-top-right-radius:25px;border-top-left-radius:25px;background-color:#ededf7}.file-parent[_ngcontent-%COMP%]   .loading-status[_ngcontent-%COMP%]{font-size:13px;height:2rem}.file-parent[_ngcontent-%COMP%]   .image-parent[_ngcontent-%COMP%]{height:15rem;width:100%;overflow:hidden;text-align:center}.file-parent[_ngcontent-%COMP%]   .image-parent[_ngcontent-%COMP%]   .preview-img[_ngcontent-%COMP%]{height:100%}.file-parent[_ngcontent-%COMP%]   .image-parent[_ngcontent-%COMP%]:hover{overflow:auto}.file-parent[_ngcontent-%COMP%]   .progress-parent[_ngcontent-%COMP%]{height:10px;width:97%;margin-bottom:8px}.file-parent[_ngcontent-%COMP%]   .info-parent[_ngcontent-%COMP%]{padding:0 10px 10px;height:7rem;overflow:hidden;font-size:11px}.file-parent[_ngcontent-%COMP%]   .info-parent[_ngcontent-%COMP%]:hover{overflow:auto}.file-parent[_ngcontent-%COMP%]   .info-line[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500}.file-parent[_ngcontent-%COMP%]   mat-icon.done[_ngcontent-%COMP%]{font-size:18px;color:#093;text-align:center;height:100%}.file-parent[_ngcontent-%COMP%]   mat-icon.progress[_ngcontent-%COMP%]{font-size:18px;color:#b38600;text-align:center;height:100%}.file-parent[_ngcontent-%COMP%]   mat-icon.file-icon[_ngcontent-%COMP%]{font-size:10rem;height:15rem;width:100%;color:#555}"]}),e})(),Pn=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-shared-photo-record-display"]],inputs:{photo:"photo"},decls:16,vars:17,consts:[["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","15px",1,""],["alt","Photo img","width","50","height","50",3,"src"],["fxLayout","column","fxLayoutAlign","center start","fxLayoutGap","5px"],[3,"title"],["target","_blank","rel","noopener noreferrer",1,"stateful",3,"href"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","5px",1,"meta"],[1,"date",3,"title"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div"),t._UZ(2,"img",1),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"a",4),t._uU(6),t.ALo(7,"stringSliceCutoff"),t.qZA()(),t.TgZ(8,"div",5)(9,"div"),t._uU(10),t.ALo(11,"fileSizeDisplay"),t.qZA(),t.TgZ(12,"div",6),t.ALo(13,"dateDisplay"),t._uU(14),t.ALo(15,"dateFromNow"),t.qZA()()()()),2&n&&(t.xp6(2),t.Q6J("src",null==i.photo?null:i.photo.photoUrl,t.LSH),t.xp6(2),t.Q6J("title",null==i.photo?null:i.photo.fileName),t.xp6(1),t.Q6J("href",null==i.photo?null:i.photo.photoUrl,t.LSH),t.xp6(1),t.hij(" ",t.xi3(7,7,null==i.photo?null:i.photo.fileName,25)," "),t.xp6(4),t.hij(" ",t.lcZ(11,10,null==i.photo?null:i.photo.fileSize)," - "),t.xp6(2),t.Q6J("title",t.xi3(13,12,null==i.photo?null:i.photo.dateUploaded,"FULLDATE")),t.xp6(2),t.hij(" ",t.lcZ(15,15,null==i.photo?null:i.photo.dateUploaded)," "))},directives:[y.xw,y.Wh,y.SQ],pipes:[Y,mt.nV,j.o,j.G],styles:[".meta[_ngcontent-%COMP%]{font-size:13px}"]}),e})();function Ln(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"div"),t._UZ(2,"app-shared-photo-record-display",11),t.qZA(),t.BQk()),2&e){const n=o.$implicit;t.xp6(2),t.Q6J("photo",n)}}const Sn=function(){return["../","history"]};function wn(e,o){if(1&e&&(t.ynx(0),t.YNc(1,Ln,3,1,"ng-container",6),t.TgZ(2,"div",7)(3,"a",8)(4,"div",9)(5,"div"),t._uU(6," Go to my files "),t.qZA(),t.TgZ(7,"div",10)(8,"mat-icon"),t._uU(9," arrow_right_alt "),t.qZA()()()()(),t.BQk()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.recentUploads),t.xp6(2),t.Q6J("routerLink",t.DdM(2,Sn))}}function Zn(e,o){1&e&&(t.ynx(0),t._uU(1," Loading... "),t.BQk())}function Dn(e,o){if(1&e&&(t.TgZ(0,"div",12),t.YNc(1,Zn,2,0,"ng-container",3),t.qZA()),2&e){const n=t.oxw(),i=t.MAs(8);t.xp6(1),t.Q6J("ngIf",n.apiWorking)("ngIfElse",i)}}function Fn(e,o){1&e&&(t.TgZ(0,"div"),t._uU(1," You have not uplaoded anything yet. \xaf\\_(\u30c4)_/\xaf "),t.qZA())}let In=(()=>{class e{constructor(){this.recentUploads=[],this.apiWorking=!1}ngOnInit(){}ngOnChanges(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-main-welcome-recent-uploads"]],inputs:{recentUploads:"recentUploads",apiWorking:"apiWorking"},features:[t.TTD],decls:9,vars:2,consts:[["fxLayout","column","fxLayoutAlign","start start","fxLayoutGap","20px"],[1,"poppins","title","bb-1"],["fxLayout","column","fxLayoutGap","5px","fxLayoutAlign","start stretch"],[4,"ngIf","ngIfElse"],["noRecentPhotos",""],["loaded",""],[4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"poppins","mt-2"],[3,"routerLink"],["fxLayout","row","fxLayoutAlign","center center"],["fxLayout","column","fxLayoutAlign","center center"],[3,"photo"],[1,"poppins","gray-text","empty-text"]],template:function(n,i){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2," Recent uploads: "),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,wn,10,3,"ng-container",3),t.qZA()(),t.YNc(5,Dn,2,2,"ng-template",null,4,t.W1O),t.YNc(7,Fn,2,0,"ng-template",null,5,t.W1O)),2&n){const a=t.MAs(6);t.xp6(4),t.Q6J("ngIf",i.recentUploads&&i.recentUploads.length>0)("ngIfElse",a)}},directives:[y.xw,y.Wh,y.SQ,b.O5,b.sg,Pn,k.yS,R.Hw],styles:[".title[_ngcontent-%COMP%]{font-size:20px}.empty-text[_ngcontent-%COMP%]{font-size:17px}"],changeDetection:0}),e})();function Mn(e,o){if(1&e&&(t.ynx(0),t._UZ(1,"app-main-welcome-recent-uploads",2),t.ALo(2,"async"),t.ALo(3,"async"),t.BQk()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("recentUploads",t.lcZ(2,2,n.us.userRecentUploads$))("apiWorking",t.lcZ(3,4,n.us.userFileApiWorking$))}}const kn=function(){return["/","auth","signin"]};function En(e,o){1&e&&(t.TgZ(0,"div",3)(1,"div",4),t._uU(2," Hello! "),t.qZA(),t.TgZ(3,"div",5)(4,"div"),t._UZ(5,"img",6),t.qZA(),t.TgZ(6,"div",7)(7,"mat-icon",8),t._uU(8,"face"),t.qZA()()(),t.TgZ(9,"div",9)(10,"a",10),t._uU(11,"Create a Uploader account to get started."),t.qZA()()()),2&e&&(t.xp6(10),t.Q6J("routerLink",t.DdM(1,kn)))}let Hn=(()=>{class e{constructor(n){this.us=n,this.fileList=[]}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(B))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-main-welcome"]],inputs:{currentUser:"currentUser",fileList:"fileList"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noUser",""],[3,"recentUploads","apiWorking"],["fxLayout","column","fxLayoutAlign","start center","fxLayoutGap","20px",1,"no-user"],[1,"poppins","main"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","10px"],["src","assets/img/uploader.png","alt","logo",1,"logo-img"],["fxLayout","row","fxLayoutAlign","center center"],[1,"welcome-icon"],[1,"poppins"],[3,"routerLink"]],template:function(n,i){if(1&n&&(t.YNc(0,Mn,4,6,"ng-container",0),t.YNc(1,En,12,2,"ng-template",null,1,t.W1O)),2&n){const a=t.MAs(2);t.Q6J("ngIf",i.currentUser)("ngIfElse",a)}},directives:[b.O5,In,y.xw,y.Wh,y.SQ,R.Hw,k.yS],pipes:[b.Ov],styles:["[_nghost-%COMP%]{width:100%}.no-user[_ngcontent-%COMP%]   .logo-img[_ngcontent-%COMP%]{height:4rem}.no-user[_ngcontent-%COMP%]   .welcome-icon[_ngcontent-%COMP%]{font-size:4.7rem;height:4.7rem;width:4.7rem;color:#5f5dbb}.no-user[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{font-size:32px;color:#5f5dbb}.no-user[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#5f5dbb}.user[_ngcontent-%COMP%]{font-size:20px}.user[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{color:#2a2961}"]}),e})();var Nn=d(7579);let Tt=(()=>{class e{constructor(){this.wholePage=!1,this.loading=!0,this.logoShakeState=!1,this.compDest$=new Nn.x}ngOnChanges(n){this.parentClass=this.wholePage?"whole-page loading-container":"container loading-container mt-5"}ngOnInit(){}ngOnDestroy(){this.compDest$.next(null),this.compDest$.complete()}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-shared-loading"]],inputs:{wholePage:"wholePage",message:"message"},features:[t.TTD],decls:12,vars:3,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"w-100"],[1,""],[1,"loading-logo"],["src","assets/img/uploader.png","alt","logo",1,"logo-img","d-inline-block"],[1,"loading-parent"],[1,"lds-facebook"],[1,"secfont"]],template:function(n,i){1&n&&(t.TgZ(0,"div")(1,"div",0)(2,"div",1)(3,"div",2),t._UZ(4,"img",3),t.qZA()(),t.TgZ(5,"div",4)(6,"div",5),t._UZ(7,"div")(8,"div")(9,"div"),t.qZA()(),t.TgZ(10,"div",6),t._uU(11),t.qZA()()()),2&n&&(t.Tol(i.parentClass),t.xp6(11),t.hij(" Loading ",i.message," ... "))},directives:[y.xw,y.Wh],styles:[".loading-logo[_ngcontent-%COMP%]{height:3rem}.loading-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.loading-parent[_ngcontent-%COMP%]{justify-content:center;align-items:center}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.whole-page[_ngcontent-%COMP%]{position:fixed;width:100%}.lds-facebook[_ngcontent-%COMP%]{display:inline-block;position:relative;width:80px;height:80px}.lds-facebook[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;position:absolute;left:8px;width:16px;background:#007bff;animation:lds-facebook 1.2s cubic-bezier(0,.5,.5,1) infinite}.lds-facebook[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){left:8px;animation-delay:-.24s}.lds-facebook[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){left:32px;animation-delay:-.12s}.lds-facebook[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){left:56px;animation-delay:0}@keyframes lds-facebook{0%{top:8px;height:64px}50%,to{top:24px;height:32px}}"]}),e})();const Qn=["uploadInput"];function Bn(e,o){1&e&&(t.ynx(0),t._UZ(1,"shared-loading-bar",15),t.BQk())}function Rn(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"div",22),t._uU(2),t.qZA(),t.TgZ(3,"div",23)(4,"mat-icon",24),t._uU(5,"task_alt"),t.qZA()(),t.BQk()),2&e){const n=t.oxw().ngIf;t.xp6(2),t.AsE(" ",n.uploadings.length," / ",n.total.length," files uploaded ")}}function Yn(e,o){if(1&e&&(t.TgZ(0,"div",22),t._uU(1),t.qZA(),t.TgZ(2,"mat-icon",25),t._uU(3,"hourglass_bottom"),t.qZA()),2&e){const n=t.oxw().ngIf;t.xp6(1),t.AsE(" Uploading: ",n.uploadings.length," / ",n.total.length," ")}}function Gn(e,o){if(1&e&&(t.ynx(0),t.YNc(1,Rn,6,2,"ng-container",0),t.ALo(2,"async"),t.YNc(3,Yn,4,2,"ng-template",null,21,t.W1O),t.BQk()),2&e){const n=t.MAs(4),i=t.oxw(4);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,i.fs.isFilesUploadFinished$))("ngIfElse",n)}}function Wn(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"div",26),t._UZ(2,"app-upload-item",27),t.qZA(),t.BQk()),2&e){const n=o.$implicit;t.xp6(2),t.Q6J("file",n)}}function Jn(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"div",15)(2,"div",17)(3,"div",18),t.YNc(4,Gn,5,4,"ng-container",7),t.ALo(5,"async"),t.qZA()(),t.TgZ(6,"section",19),t.YNc(7,Wn,3,1,"ng-container",20),t.qZA()(),t.BQk()),2&e){const n=t.oxw().ngIf,i=t.oxw(2);t.xp6(4),t.Q6J("ngIf",t.lcZ(5,3,i.fs.uploadingsAndTotalFiles$)),t.xp6(3),t.Q6J("ngForOf",n)("ngForTrackBy",i.trackById)}}function jn(e,o){if(1&e&&(t.ynx(0),t.YNc(1,Jn,8,5,"ng-container",7),t.BQk()),2&e){const n=o.ngIf;t.xp6(1),t.Q6J("ngIf",n.length>0)}}function $n(e,o){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",2)(2,"div",3)(3,"div",4),t._uU(4," Upload "),t.qZA(),t._UZ(5,"hr",5),t.TgZ(6,"div",6),t.YNc(7,Bn,2,0,"ng-container",7),t.ALo(8,"async"),t.qZA()()(),t.TgZ(9,"div",8)(10,"input",9,10),t.NdJ("change",function(a){return t.CHM(n),t.oxw().onFileInputClick(a)}),t.qZA()(),t.TgZ(12,"div",11)(13,"div",12),t.NdJ("click",function(){return t.CHM(n),t.oxw().onFileUpload()}),t.TgZ(14,"div",13),t._uU(15," Select items to upload "),t.qZA(),t.TgZ(16,"div")(17,"button",14),t.ALo(18,"async"),t.TgZ(19,"mat-icon"),t._uU(20,"add"),t.qZA()()()(),t.YNc(21,jn,2,1,"ng-container",7),t.ALo(22,"async"),t.TgZ(23,"div",15),t._UZ(24,"app-main-welcome",16),t.ALo(25,"async"),t.qZA()(),t.BQk()}if(2&e){const n=t.oxw();t.xp6(7),t.Q6J("ngIf",t.lcZ(8,4,n.fs.userFileApiWorking$)),t.xp6(10),t.Q6J("disabled",!t.lcZ(18,6,n.as.currentUser$)),t.xp6(4),t.Q6J("ngIf",t.lcZ(22,8,n.fs.filesUploadingAll$)),t.xp6(3),t.Q6J("currentUser",t.lcZ(25,10,n.as.currentUser$))}}function zn(e,o){1&e&&(t.TgZ(0,"div",15),t._UZ(1,"app-shared-loading"),t.qZA())}let qn=(()=>{class e{constructor(n,i,a,s,l){this.fs=n,this.rs=i,this.as=a,this.ts=s,this.pss=l}ngOnInit(){}onFileUpload(){var n;const i=null===(n=this.uploadInput)||void 0===n?void 0:n.nativeElement;i&&this.as.currentUser$.pipe((0,z.q)(1)).subscribe(a=>{a?i.click():this.ts.openSingletonToast("warning","You are not logged in.")})}onFileInputClick(n){var i;const a=null===(i=n.target)||void 0===i?void 0:i.files;a&&Object.keys(a).forEach(l=>{this.fs.attachFile(a[l],(new Date).getTime()+l+"")})}trackById(n,i){return i.id}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(B),t.Y36(ut),t.Y36(ot.e),t.Y36(Yt.q),t.Y36(yt))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-main-all"]],viewQuery:function(n,i){if(1&n&&t.Gf(Qn,5),2&n){let a;t.iGM(a=t.CRH())&&(i.uploadInput=a.first)}},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""],["fxLayout","column","fxLayoutAlign","start center",1,"w-100"],[1,"title","quicksand","fw-500","w-100"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","5px"],[1,"w-100","part-loading"],[1,"w-100","api-loading","mb-10"],[4,"ngIf"],[1,""],["type","file","multiple","",1,"upload-input",3,"change"],["uploadInput",""],["fxLayout","column","fxLayoutAlign","start center","fxLayoutGap","30px",1,"w-100"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","15px",1,"quicksand","upload-action",3,"click"],[1,"text"],["mat-fab","","color","primary","aria-label","Upload files",3,"disabled"],[1,"w-100"],[3,"currentUser"],[1,"uploading-title","quicksand","fw-500"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","5px",1,""],["fxLayout","row wrap","fxLayoutAlign","start center","fxLayoutGap","15px",1,"w-100"],[4,"ngFor","ngForOf","ngForTrackBy"],["uploading",""],[1,"bb-1"],["fxLayout","column","fxLayoutAlign","center center",1,""],[1,"text-success"],[1,"text-primary"],["fxFlex.gt-sm","23","fxFlex","100"],[3,"file"]],template:function(n,i){if(1&n&&(t.YNc(0,$n,26,12,"ng-container",0),t.ALo(1,"async"),t.YNc(2,zn,2,0,"ng-template",null,1,t.W1O)),2&n){const a=t.MAs(3);t.Q6J("ngIf",!1===t.lcZ(1,2,i.as.apiLoading$))("ngIfElse",a)}},directives:[b.O5,y.xw,y.Wh,y.SQ,xt,it.lW,R.Hw,b.sg,y.yH,On,Hn,Tt],pipes:[b.Ov],styles:[".upload-action[_ngcontent-%COMP%]{border:1px solid #ccc;padding:5px 25px;border-radius:30px;background-color:#e6f2ff;cursor:pointer}.upload-action[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:20px;color:#5f5dbb}.upload-input[_ngcontent-%COMP%]{display:none;height:0px}.uploading-title[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{font-size:20px}.mb-10[_ngcontent-%COMP%]{margin-bottom:10px}"]}),e})();const bt=(0,r.PH)("[User Files Display/UI] Set user files display tab id",(0,r.Ky)()),$t=(0,r.PH)("[User Files Display/Table] Set page",(0,r.Ky)()),zt=(0,r.PH)("[User Files Display/Table] Set display count per page",(0,r.Ky)()),vt=(0,r.PH)("[User Files Display/Table] Set total count",(0,r.Ky)());let Ut=(()=>{class e{constructor(n){this.store=n,this.getUserDisplayTabs$=this.store.select(ke),this.getAllTabOptions$=this.store.select(Ee),this.getFilesDisplayTableActionBtns$=this.store.select(He),this.getTablePagination$=this.store.select(Qt)}setUserFilesDisplayTab(n){this.store.dispatch(bt({tab:n}))}setCurrentPage(n){this.store.dispatch($t({currentPage:n}))}setDisplayCountPerPage(n){this.store.dispatch(zt({count:n}))}setTotalCount(n){this.store.dispatch(vt({total:n}))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(r.yh))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var qt=d(3251);function eo(e,o){1&e&&(t.ynx(0),t._UZ(1,"shared-loading-bar",9),t.BQk())}function no(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"a",12),t.NdJ("click",function(){const s=t.CHM(n).$implicit;return t.oxw(3).onTabClick(s)}),t.TgZ(1,"mat-icon",13),t._uU(2),t.qZA(),t._uU(3),t.qZA()}if(2&e){const n=o.$implicit,i=t.oxw().ngIf;t.Q6J("active",i.selectedTabLabel===n.label),t.xp6(2),t.Oqu(n.icon),t.xp6(1),t.hij(" ",n.label," ")}}function oo(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"nav",10),t.YNc(2,no,4,3,"a",11),t.qZA(),t.BQk()),2&e){const n=o.ngIf;t.xp6(1),t.Q6J("disableRipple",!0),t.xp6(1),t.Q6J("ngForOf",n.tabs)}}function io(e,o){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"button",15),t.NdJ("click",function(){const s=t.CHM(n).$implicit;return t.oxw(3).onActionClick(s)}),t.TgZ(2,"div",16)(3,"div",17)(4,"mat-icon"),t._uU(5),t.qZA()(),t.TgZ(6,"div"),t._uU(7),t.qZA()()(),t.BQk()}if(2&e){const n=o.$implicit;t.xp6(5),t.Oqu(n.icon),t.xp6(2),t.hij(" ",n.label," ")}}function ao(e,o){if(1&e&&(t.ynx(0),t.YNc(1,io,8,2,"ng-container",14),t.BQk()),2&e){const n=o.ngIf;t.xp6(1),t.Q6J("ngForOf",n)}}function so(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"div",2)(2,"div",3)(3,"div",4)(4,"div"),t._uU(5," My Files "),t.qZA(),t.TgZ(6,"div"),t._uU(7),t.ALo(8,"async"),t.qZA()(),t._UZ(9,"hr",5),t.TgZ(10,"div",6),t.YNc(11,eo,2,0,"ng-container",7),t.ALo(12,"async"),t.qZA()(),t.YNc(13,oo,3,2,"ng-container",7),t.ALo(14,"async"),t.TgZ(15,"div",8),t.YNc(16,ao,2,1,"ng-container",7),t.ALo(17,"async"),t.qZA(),t.TgZ(18,"div",9),t._UZ(19,"router-outlet"),t.qZA()(),t.BQk()),2&e){const n=t.oxw();t.xp6(7),t.hij(" (",t.lcZ(8,4,n.fs.userFilesCount$),") "),t.xp6(4),t.Q6J("ngIf",t.lcZ(12,6,n.fs.userFileApiWorking$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(14,8,n.ufds.getUserDisplayTabs$)),t.xp6(3),t.Q6J("ngIf",t.lcZ(17,10,n.ufds.getFilesDisplayTableActionBtns$))}}function ro(e,o){1&e&&(t.TgZ(0,"div",9),t._UZ(1,"app-shared-loading"),t.qZA())}let lo=(()=>{class e{constructor(n,i,a,s,l,x,U){this.fs=n,this.rs=i,this.as=a,this.ts=s,this.ufds=l,this.router=x,this.route=U}ngOnInit(){this.fs.getUserFiles()}onTabClick(n){this.router.navigate(["./",n.url],{relativeTo:this.route})}onActionClick(n){"refresh"===n.id&&this.fs.getUserFiles()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(B),t.Y36(ut),t.Y36(ot.e),t.Y36(Yt.q),t.Y36(Ut),t.Y36(k.F0),t.Y36(k.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-main-history"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""],["fxLayout","column","fxLayoutAlign","start center","fxLayoutGap","15px",1,"w-100"],[1,"title","quicksand","fw-500","w-100"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","5px"],[1,"w-100","part-loading"],[1,"w-100","api-loading"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center",1,"actions","w-100"],[1,"w-100"],["mat-tab-nav-bar","","mat-align-tabs","start",1,"w-100",3,"disableRipple"],["mat-tab-link","",3,"active","click",4,"ngFor","ngForOf"],["mat-tab-link","",3,"active","click"],[1,"tab-icon","mr-1"],[4,"ngFor","ngForOf"],["mat-button","","color","primary",3,"click"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","8px"],["fxLayout","row","fxLayoutAlign","center center"]],template:function(n,i){if(1&n&&(t.YNc(0,so,20,12,"ng-container",0),t.ALo(1,"async"),t.YNc(2,ro,2,0,"ng-template",null,1,t.W1O)),2&n){const a=t.MAs(3);t.Q6J("ngIf",!1===t.lcZ(1,2,i.fs.userFilesApiLoading$))("ngIfElse",a)}},directives:[b.O5,y.xw,y.Wh,y.SQ,xt,qt.BU,b.sg,qt.Nj,R.Hw,it.lW,k.lC,Tt],pipes:[b.Ov],styles:[".title[_ngcontent-%COMP%]{font-size:20px}.mb-10[_ngcontent-%COMP%]{margin-bottom:10px}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none}nav[_ngcontent-%COMP%]   a.mat-tab-label-active[_ngcontent-%COMP%]{color:#403e3e;opacity:1}.container-fluid[_ngcontent-%COMP%]   .mat-tab-header[_ngcontent-%COMP%]{margin-bottom:15px}"]}),e})();var Kt=d(449),Vt=d(6087),co=d(4847),Z=d(8279),po=d(7446),go=d(3322),uo=d(105);class ${transform(o){let n=o;switch(o){case"photoUrl":n="File URL";break;case"fileName":n="File Name";break;case"fileSize":n="Size";break;case"dateUploaded":n="Date Uploaded"}return n}}$.\u0275fac=function(o){return new(o||$)},$.\u0275pipe=t.Yjl({name:"tableColumnDisplay",type:$,pure:!0}),(0,Gt.gn)([(0,Wt.Z)()],$.prototype,"transform",null);let fo=(()=>{class e{constructor(n){this.dp=n}transform(n,i){let a=n;switch(i){case"photoUrl":a=""+n,a=a.slice(0,25)+"..."+a.slice(-15);break;case"dateUploaded":a=this.dp.transform(n,"FROMNOW");break;case"fileSize":a=(0,uo.gB)(n,!0)}return a}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(j.o,16))},e.\u0275pipe=t.Yjl({name:"tableDataDisplay",type:e,pure:!0}),e})();function _o(e,o){if(1&e&&(t.TgZ(0,"div",6),t._uU(1),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.AsE(" Page ",n.pagination.currentPage+1," / ",n.pagination.totalPages," ")}}function mo(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"th",14)(1,"mat-checkbox",15),t.NdJ("change",function(a){return t.CHM(n),t.oxw(2).onMasterToggle(a)}),t.qZA()()}if(2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("checked",n.selection.hasValue()&&n.isAllSelected())("indeterminate",n.selection.hasValue()&&!n.isAllSelected())}}function ho(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"td",16)(1,"mat-checkbox",17),t.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const l=t.CHM(n).$implicit;return t.oxw(2).onRowCheckboxToggle(l,a)}),t.qZA()()}if(2&e){const n=o.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("checked",i.selection.isSelected(n))}}function yo(e,o){if(1&e&&(t.TgZ(0,"th",14),t._uU(1),t.ALo(2,"tableColumnDisplay"),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,n)," ")}}function xo(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"a",22),t._uU(2),t.ALo(3,"tableDataDisplay"),t.qZA(),t.BQk()),2&e){const n=t.oxw().$implicit,i=t.oxw().$implicit;t.xp6(1),t.Q6J("href",n[i],t.LSH),t.xp6(1),t.hij(" ",t.xi3(3,2,n[i],i)," ")}}function To(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"tableDataDisplay"),t.qZA(),t.BQk()),2&e){const n=t.oxw().$implicit,i=t.oxw().$implicit;t.xp6(2),t.hij(" ",t.xi3(3,1,n[i],i)," ")}}function bo(e,o){if(1&e&&(t.TgZ(0,"td",16),t.ynx(1,19),t.YNc(2,xo,4,5,"ng-container",20),t.YNc(3,To,4,4,"ng-container",21),t.BQk(),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngSwitch",n),t.xp6(1),t.Q6J("ngSwitchCase","photoUrl")}}function vo(e,o){if(1&e&&(t.ynx(0)(1,18),t.YNc(2,yo,3,3,"th",9),t.YNc(3,bo,4,2,"td",10),t.BQk()()),2&e){const n=o.$implicit;t.xp6(1),t.Q6J("matColumnDef",n)}}function Uo(e,o){1&e&&t._UZ(0,"tr",23)}const Co=function(e){return{"strip-bg":e,"custom-row":!0}};function Ao(e,o){1&e&&t._UZ(0,"tr",24),2&e&&t.Q6J("ngClass",t.VKq(1,Co,o.even))}function Oo(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"table",7),t.ynx(2,8),t.YNc(3,mo,2,2,"th",9),t.YNc(4,ho,2,1,"td",10),t.BQk(),t.YNc(5,vo,4,1,"ng-container",11),t.YNc(6,Uo,1,0,"tr",12),t.YNc(7,Ao,1,3,"tr",13),t.qZA(),t.BQk()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("dataSource",n.dataSource),t.xp6(4),t.Q6J("ngForOf",n.columnIds),t.xp6(1),t.Q6J("matHeaderRowDef",n.columnIdsWithSelect)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",n.columnIdsWithSelect)}}let Po=(()=>{class e{constructor(){this.columnIds=[],this.columnData=[],this.tableActionBtns=[],this.pageEvent=new t.vpe,this.selectedRowsChange=new t.vpe,this.selection=new Kt.Ov(!0,[]),this.columnIdsWithSelect=[]}ngOnChanges(n){this.dataSource=new Z.by(this.columnData),this.columnIdsWithSelect=["select",...this.columnIds],this.selection=new Kt.Ov(!0,[])}ngOnInit(){}ngAfterViewInit(){}onPage(n){this.pageEvent.emit(n)}isAllSelected(){var n,i;return this.selection.selected.length===(null!==(i=null===(n=this.dataSource)||void 0===n?void 0:n.data.length)&&void 0!==i?i:0)}onMasterToggle(n){if(this.isAllSelected()&&this.dataSource)return this.selection.clear(),void this.emitSelection(H.REMOVE,this.dataSource.data);this.dataSource&&(this.selection.select(...this.dataSource.data),this.emitSelection(H.ADD,this.dataSource.data))}onRowCheckboxToggle(n,i){this.selection.toggle(n),this.emitSelection(i.checked?H.ADD:H.REMOVE,[n])}emitSelection(n,i){this.selectedRowsChange.emit({action:n,photo:i})}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-shared-table-selectable"]],viewQuery:function(n,i){if(1&n&&(t.Gf(co.YE,5),t.Gf(Vt.NW,5)),2&n){let a;t.iGM(a=t.CRH())&&(i.sort=a.first),t.iGM(a=t.CRH())&&(i.paginator=a.first)}},inputs:{columnIds:"columnIds",columnData:"columnData",tableActionBtns:"tableActionBtns",pagination:"pagination"},outputs:{pageEvent:"pageEvent",selectedRowsChange:"selectedRowsChange"},features:[t.TTD],decls:7,vars:7,consts:[["fxLayout","column","fxLayoutAlign","start center",1,"table-parent","w-100"],[1,"filter"],["fxLayout","row","fxLayoutAlign","space-between center",1,"paginator","w-100"],["class","page-info",4,"ngIf"],[3,"showFirstLastButtons","length","hidePageSize","pageIndex","pageSize","page"],[4,"ngIf"],[1,"page-info"],["mat-table","",1,"mat-elevation-z0",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"ngClass",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["color","primary",3,"checked","indeterminate","change"],["mat-cell",""],["color","primary",3,"checked","click","change"],[3,"matColumnDef"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["target","_blank",3,"href"],["mat-header-row",""],["mat-row","",3,"ngClass"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"div",1),t.TgZ(2,"div",2),t.YNc(3,_o,2,2,"div",3),t.TgZ(4,"div")(5,"mat-paginator",4),t.NdJ("page",function(s){return i.onPage(s)}),t.qZA()()(),t.YNc(6,Oo,8,5,"ng-container",5),t.qZA()),2&n&&(t.xp6(3),t.Q6J("ngIf",i.pagination),t.xp6(2),t.Q6J("showFirstLastButtons",!0)("length",null==i.pagination?null:i.pagination.totalCount)("hidePageSize",!0)("pageIndex",null==i.pagination?null:i.pagination.currentPage)("pageSize",30),t.xp6(1),t.Q6J("ngIf",i.dataSource))},directives:[y.xw,y.Wh,b.O5,Vt.NW,Z.BZ,Z.w1,Z.fO,Z.ge,po.oG,Z.Dz,Z.ev,b.sg,b.RF,b.n9,b.ED,Z.as,Z.XQ,Z.nj,Z.Gk,b.mk,go.oO],pipes:[$,fo],styles:[".table-parent[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.table-parent[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%], .table-parent[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-footer-row[_ngcontent-%COMP%]{height:36px}.table-parent[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-header-row[_ngcontent-%COMP%]{height:37px;background-color:#cddae7}.table-parent[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:hover{background-color:#0f65bd0d}.table-parent[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .strip-bg[_ngcontent-%COMP%]{background-color:#cccccc1a}.table-parent[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding-right:16px;padding-top:2px}.table-parent[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0}.table-parent[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding-right:10px;padding-top:3px}.table-parent[_ngcontent-%COMP%]   .paginator[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{font-size:12px;font-weight:400;line-height:18px}"],changeDetection:0}),e})();function Lo(e,o){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",4)(2,"app-shared-table-selectable",5),t.NdJ("pageEvent",function(a){return t.CHM(n),t.oxw(2).onPage(a)})("selectedRowsChange",function(a){return t.CHM(n),t.oxw(2).onRowSelectChange(a)}),t.ALo(3,"async"),t.ALo(4,"async"),t.qZA()(),t.BQk()}if(2&e){const n=t.oxw().ngIf,i=t.oxw();t.xp6(2),t.Q6J("columnIds",n.columnIds)("columnData",n.columnData)("tableActionBtns",t.lcZ(3,4,i.fds.getFilesDisplayTableActionBtns$))("pagination",t.lcZ(4,6,i.fds.getTablePagination$))}}function So(e,o){if(1&e&&(t.ynx(0),t.YNc(1,Lo,5,8,"ng-container",3),t.BQk()),2&e){const n=o.ngIf;t.oxw();const i=t.MAs(4);t.xp6(1),t.Q6J("ngIf",!1===n.apiLoading)("ngIfElse",i)}}function wo(e,o){1&e&&(t.TgZ(0,"div",4),t._UZ(1,"app-shared-loading"),t.qZA())}const Zo=[{path:"",component:ne,children:[{path:"",redirectTo:"upload",pathMatch:"full"},{path:"upload",component:qn,data:{pageTitle:"Upload Files"}},{path:"history",component:lo,data:{pageTitle:"My Files"},children:[{path:"",redirectTo:"table",pathMatch:"full"},{path:"table",component:(()=>{class e{constructor(n,i){this.fus=n,this.fds=i}ngOnInit(){}onPage(n){this.fds.setCurrentPage(n.pageIndex)}onRowSelectChange(n){console.log(n)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(B),t.Y36(Ut))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-main-history-table-view"]],decls:5,vars:3,consts:[["fxLayout","column","fxLayoutAlign","start center","fxLayoutGap","5px",1,"w-100"],[4,"ngIf"],["isLoading",""],[4,"ngIf","ngIfElse"],[1,"w-100"],[3,"columnIds","columnData","tableActionBtns","pagination","pageEvent","selectedRowsChange"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t.YNc(1,So,2,2,"ng-container",1),t.ALo(2,"async"),t.YNc(3,wo,2,0,"ng-template",null,2,t.W1O),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,i.fus.getFilesTableData$)))},directives:[y.xw,y.Wh,y.SQ,b.O5,Po,Tt],pipes:[b.Ov],styles:[""]}),e})(),data:{pageTitle:"Table View",id:"table"}},{path:"galleria",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-main-history-galleria-view"]],decls:2,vars:0,template:function(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1," Gal\n"),t.qZA())},styles:[""]}),e})(),data:{pageTitle:"Galleria View",id:"galleria"}}]}]}];let Do=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[k.Bz.forChild(Zo)],k.Bz]}),e})();var V=d(3900),Fo=d(9770),X=d(9646),Mo=d(1884),ko=d(6556);let Eo=(()=>{class e{constructor(n,i,a){this.actions$=n,this.us=i,this.as=a,this.getUserFiles$=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)(et,pt),(0,h.IC)(()=>this.as.currentUser$),(0,A.U)(s=>s[1]),(0,V.w)(s=>function Io(e,o,n){return(0,Fo.P)(()=>e()?o:n)}(()=>!!s,this.us.getUserPhotos(null==s?void 0:s.email).pipe((0,V.w)(l=>[vt({total:l.length}),Dt({files:l})]),(0,q.K)(l=>(0,X.of)(me({errMsg:(0,ko.S)(l)})))),(0,X.of)(Ft()))))),this.userChange$=(0,h.GW)(()=>this.as.currentUser$.pipe((0,Mo.x)((s,l)=>(null==s?void 0:s.email)===(null==l?void 0:l.email)),(0,V.w)(s=>(0,X.of)(et({user:s})))))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(h.eX),t.LFG(B),t.LFG(ot.e))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var Xt=d(5577),Ct=d(8746),At=d(9300),Ho=d(7272);const No=[(()=>{class e{constructor(n,i,a){this.actions$=n,this.us=i,this.as=a,this.attachFileForUpload$=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)(Lt),(0,A.U)(s=>tt({fileId:s.fileId,file:s.file})))),this.uploadFileStart$=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)(tt),(0,Xt.z)(s=>{var l;const x=s.fileId,U=s.file,L=null!==(l=U.name)&&void 0!==l?l:"File-name-"+(new Date).getTime(),D=(new Date).getTime(),S=this.us.uploadFile(U,L);let I=[S.task.percentageChanges().pipe((0,A.U)(O=>({fileId:x,percent:O})),(0,Ct.x)(()=>{})),S.ref.getDownloadURL().pipe((0,A.U)(O=>({fileId:x,url:O})),(0,Ct.x)(()=>{}))];return(0,Ho.z)(...I).pipe((0,A.U)(O=>{var E;const m=null!==(E=O.percent)&&void 0!==E?E:O.url?100:O.percent;return lt({fileId:x,fileName:L,fileSize:s.file.size,uploadDate:D,downloadUrl:O.url,progress:m})}),(0,q.K)(O=>(console.error("Upload Error!"+O),(0,X.of)(wt({errMsg:O})))),(0,Ct.x)(()=>{}))}))),this.uploadFileFinished$=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)(lt),(0,At.h)(s=>!(!s.downloadUrl||100!==s.progress)),(0,A.U)(s=>rt({fileId:s.fileId,fileName:s.fileName,fileSize:s.fileSize,uploadDate:s.uploadDate,downloadUrl:s.downloadUrl})))),this.updateUserPhotoDatabaseAfterUploadSuccess$=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)(rt),(0,A.U)(s=>ct({photoData:{id:s.fileId,dateUploaded:s.uploadDate,fileId:s.fileId,fileName:s.fileName,fileSize:s.fileSize,photoUrl:s.downloadUrl}})))),this.updateUserPhotoDatabase$=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)(ct),(0,h.IC)(()=>this.as.currentUser$),(0,At.h)(s=>{var l;return!!(null===(l=s[1])||void 0===l?void 0:l.email)}),(0,Xt.z)(s=>{var l;const x=null===(l=s[1])||void 0===l?void 0:l.email,L=this.us.addPhotoUrl(s[0].photoData,x).operationObs,D=s[0].photoData.id;return L.then(S=>{const I=Object.assign(Object.assign({},s[0].photoData),{id:D});return pt({photoData:I})}).catch(S=>Zt({errMsg:S}))})))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(h.eX),t.LFG(B),t.LFG(ot.e))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})()],Ro=(0,r.Lq)({progressSnackbarDisplay:!1,progressDialogDisplay:!1},(0,r.on)(K,(e,{status:o})=>{let n=!!e.progressDialogDisplay;return!1===o&&(n=!1),Object.assign(Object.assign({},e),{progressSnackbarDisplay:o,progressDialogDisplay:n})}),(0,r.on)(ht,(e,{status:o})=>Object.assign(Object.assign({},e),{progressDialogDisplay:o})),(0,r.on)(Jt,e=>Object.assign(Object.assign({},e),{progressDialogDisplay:!1})));var Yo=d(8505);const Go=[(()=>{class e{constructor(n,i,a,s){this.actions$=n,this.pss=i,this.fs=a,this.pds=s,this.showSnackbarOnFileUploadStart$=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)(tt),(0,A.U)(()=>K({status:!0})))),this.toggleProgressSnackbar$=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)(K),(0,Yo.b)(l=>{l.status?this.pss.getProgressSnackbar({fileStatus:this.fs.filesUploadingAll$,isFilesUploadFinished:this.fs.isFilesUploadFinished$,uploadingsAndTotalFiles:this.fs.uploadingsAndTotalFiles$}):this.pss.closeProgressSnackbar()})),{dispatch:!1}),this.toggleProgressDialog$=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)(ht),(0,V.w)(l=>l.status?this.pds.openDialog({fileStatus:this.fs.filesUploadingAll$,isFilesUploadFinished:this.fs.isFilesUploadFinished$,uploadingsAndTotalFiles:this.fs.uploadingsAndTotalFiles$}).afterClosed().pipe((0,A.U)(U=>U)):(this.pds.closeDialog(),(0,X.of)(!1))),(0,At.h)(l=>!1!==l),(0,A.U)(l=>{const x=l?JSON.parse(JSON.stringify(l)):void 0;return(null==x?void 0:x.action)===J.CLOSE?K({status:!1}):Jt()})))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(h.eX),t.LFG(yt),t.LFG(B),t.LFG(jt))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})()];let Wo=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[],imports:[[Pt.n]]}),e})();const jo=(0,r.Lq)({tabs:[{label:"Table",url:"table",icon:"table_view"},{label:"Galleria",url:"galleria",icon:"photo_library"}],selectedTabLabel:"Table",actionButtons:[{id:"refresh",label:"Refresh",icon:"refresh"}],pagination:{countPerPage:30,currentPage:0,totalCount:0,totalPages:0},queryParams:{}},(0,r.on)(bt,(e,{tab:o})=>{var n;return Object.assign(Object.assign({},e),{selectedTabLabel:null!==(n=null==o?void 0:o.label)&&void 0!==n?n:e.selectedTabLabel})}),(0,r.on)($t,(e,{currentPage:o})=>Object.assign(Object.assign({},e),{pagination:Object.assign(Object.assign({},e.pagination),{currentPage:o})})),(0,r.on)(zt,(e,{count:o})=>Object.assign(Object.assign({},e),{pagination:Object.assign(Object.assign({},e.pagination),{countPerPage:o})})),(0,r.on)(vt,(e,{total:o})=>{const n=Math.ceil(o/30);return Object.assign(Object.assign({},e),{pagination:Object.assign(Object.assign({},e.pagination),{totalCount:o,totalPages:n})})}));var $o=d(2182),zo=d(9766);let qo=(()=>{class e{constructor(n,i,a){this.actions$=n,this.fds=i,this.rs=a,this.updateTabFromRouteParam$=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)($o.CE),(0,h.IC)(()=>this.rs.routeData$),(0,V.w)(s=>this.fds.getAllTabOptions$.pipe((0,z.q)(1),(0,A.U)(l=>({allTabs:l,currentRouteId:s[1].id})))),(0,A.U)(s=>{const x=s.currentRouteId,U=s.allTabs.find(L=>L.url===x);return bt({tab:U})})))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(h.eX),t.LFG(Ut),t.LFG(zo.c))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),Ko=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[],imports:[[Pt.n,Wo,te.I,ee.d,r.Aw.forFeature(It,Ae),r.Aw.forFeature(Mt,Ie),r.Aw.forFeature("uploadProgressDialogSnackbar",Ro),r.Aw.forFeature(Nt,jo),h.sQ.forFeature(No),h.sQ.forFeature([Eo]),h.sQ.forFeature(Go),h.sQ.forFeature([qo]),st.TE,Do]]}),e})()}}]);