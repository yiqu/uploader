"use strict";(self.webpackChunkuploader=self.webpackChunkuploader||[]).push([[947],{5947:(po,ye,m)=>{m.r(ye),m.d(ye,{MainModule:()=>lo});var ee=m(3271),y=m(6991),r=m(5620),Be=m(61),He=m(7462),xe=m(5345),G=m(1402),e=m(5e3);let Ye=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-main"]],decls:2,vars:0,consts:[[1,"container-fluid","mb-5","mt-3"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"router-outlet"),e.qZA())},directives:[G.lC],styles:[""]}),t})();var z=m(5698);const Ue=(0,r.PH)("[Upload/UI] attach a file",(0,r.Ky)()),ve=(0,r.PH)("[Upload/UI] Remove all attached files"),q=(0,r.PH)("[Upload/API] Upload file start",(0,r.Ky)()),te=(0,r.PH)("[Upload/API] Upload file successful",(0,r.Ky)()),Ae=(0,r.PH)("[Upload/API] Upload file failed",(0,r.Ky)()),ne=(0,r.PH)("[Upload/API] Upload file progress update",(0,r.Ky)()),oe=(0,r.PH)("[Upload/API] Update new photo in user DB start",(0,r.Ky)()),ie=(0,r.PH)("[Upload/API] Update new photo in user DB successful",(0,r.Ky)()),Te=(0,r.PH)("[Upload/API] Update new photo in user DB failed",(0,r.Ky)()),K=(0,r.PH)("[Upload/API] Get user files start",(0,r.Ky)()),Oe=(0,r.PH)("[Upload/API] Get user files successful",(0,r.Ky)()),nt=(0,r.PH)("[Upload/API] Get user files failed",(0,r.Ky)()),Le=(0,r.PH)("[Upload/API] User is not logged in to fetch files"),Pe="uploadFiles",Ce="userFiles";var g=(()=>{return(t=g||(g={}))[t.EntitiesOnly=0]="EntitiesOnly",t[t.Both=1]="Both",t[t.None=2]="None",g;var t})();function v(t){return function(n,i){const a={ids:[...i.ids],entities:Object.assign({},i.entities)},s=t(n,a);return s===g.Both?Object.assign({},i,a):s===g.EntitiesOnly?Object.assign(Object.assign({},i),{entities:a.entities}):i}}function D(t,o){const n=o(t);return(0,e.X6Q)()&&void 0===n&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",t,"The `selectId` implementation:",o.toString()),n}function be(t){function o(_,d){const p=D(_,t);return p in d.entities?g.None:(d.ids.push(p),d.entities[p]=_,g.Both)}function n(_,d){let p=!1;for(const l of _)p=o(l,d)!==g.None||p;return p?g.Both:g.None}function a(_,d){const p=D(_,t);return p in d.entities?(d.entities[p]=_,g.EntitiesOnly):(d.ids.push(p),d.entities[p]=_,g.Both)}function U(_,d){const l=(_ instanceof Array?_:d.ids.filter(u=>_(d.entities[u]))).filter(u=>u in d.entities).map(u=>delete d.entities[u]).length>0;return l&&(d.ids=d.ids.filter(u=>u in d.entities)),l?g.Both:g.None}function S(_,d){return b([_],d)}function b(_,d){const p={};return(_=_.filter(u=>u.id in d.entities)).length>0?_.filter(f=>function F(_,d,p){const u=Object.assign({},p.entities[d.id],d.changes),f=D(u,t),h=f!==d.id;return h&&(_[d.id]=f,delete p.entities[d.id]),p.entities[f]=u,h}(p,f,d)).length>0?(d.ids=d.ids.map(f=>p[f]||f),g.Both):g.EntitiesOnly:g.None}function k(_,d){const p=[],l=[];for(const h of _){const A=D(h,t);A in d.entities?l.push({id:A,changes:h}):p.push(h)}const u=b(l,d),f=n(p,d);switch(!0){case f===g.None&&u===g.None:return g.None;case f===g.Both||u===g.Both:return g.Both;default:return g.EntitiesOnly}}return{removeAll:function O(_){return Object.assign({},_,{ids:[],entities:{}})},addOne:v(o),addMany:v(n),setAll:v(function i(_,d){return d.ids=[],d.entities={},n(_,d),g.Both}),setOne:v(a),setMany:v(function s(_,d){const p=_.map(l=>a(l,d));switch(!0){case p.some(l=>l===g.Both):return g.Both;case p.some(l=>l===g.EntitiesOnly):return g.EntitiesOnly;default:return g.None}}),updateOne:v(S),updateMany:v(b),upsertOne:v(function L(_,d){return k([_],d)}),upsertMany:v(k),removeOne:v(function c(_,d){return U([_],d)}),removeMany:v(U),map:v(function M(_,d){return b(d.ids.reduce((u,f)=>{const h=_(d.entities[f]);return h!==d.entities[f]&&u.push({id:f,changes:h}),u},[]).filter(({id:u})=>u in d.entities),d)}),mapOne:v(function V({map:_,id:d},p){const l=p.entities[d];return l?S({id:d,changes:_(l)},p):g.None})}}function Ze(t={}){var o,n;const{selectId:i,sortComparer:a}={selectId:null!==(o=t.selectId)&&void 0!==o?o:O=>O.id,sortComparer:null!==(n=t.sortComparer)&&void 0!==n&&n},s=function it(){return{getInitialState:function t(o={}){return Object.assign({ids:[],entities:{}},o)}}}(),c=function st(){return{getSelectors:function t(o){const n=c=>c.ids,i=c=>c.entities,a=(0,r.P1)(n,i,(c,U)=>c.map(O=>U[O])),s=(0,r.P1)(n,c=>c.length);return o?{selectIds:(0,r.P1)(o,n),selectEntities:(0,r.P1)(o,i),selectAll:(0,r.P1)(o,a),selectTotal:(0,r.P1)(o,s)}:{selectIds:n,selectEntities:i,selectAll:a,selectTotal:s}}}}(),U=a?function at(t,o){const{removeOne:n,removeMany:i,removeAll:a}=be(t);function s(p,l){return c([p],l)}function c(p,l){const u=p.filter(f=>!(D(f,t)in l.entities));return 0===u.length?g.None:(d(u,l),g.Both)}function O(p,l){const u=D(p,t);return u in l.entities?(l.ids=l.ids.filter(f=>f!==u),d([p],l),g.Both):s(p,l)}function S(p,l){return M([p],l)}function M(p,l){const u=[],f=p.filter(h=>function b(p,l,u){if(!(l.id in u.entities))return!1;const h=Object.assign({},u.entities[l.id],l.changes),A=D(h,t);return delete u.entities[l.id],p.push(h),A!==l.id}(u,h,l)).length>0;if(0===u.length)return g.None;{const h=l.ids,A=[];return l.ids=l.ids.filter((I,Q)=>I in l.entities||(A.push(Q),!1)),d(u,l),!f&&A.every(I=>l.ids[I]===h[I])?g.EntitiesOnly:g.Both}}function _(p,l){const u=[],f=[];for(const I of p){const Q=D(I,t);Q in l.entities?f.push({id:Q,changes:I}):u.push(I)}const h=M(f,l),A=c(u,l);switch(!0){case A===g.None&&h===g.None:return g.None;case A===g.Both||h===g.Both:return g.Both;default:return g.EntitiesOnly}}function d(p,l){p.sort(o);const u=[];let f=0,h=0;for(;f<p.length&&h<l.ids.length;){const A=p[f],I=D(A,t),Q=l.ids[h];o(A,l.entities[Q])<=0?(u.push(I),f++):(u.push(Q),h++)}l.ids=u.concat(f<p.length?p.slice(f).map(t):l.ids.slice(h)),p.forEach((A,I)=>{l.entities[t(A)]=A})}return{removeOne:n,removeMany:i,removeAll:a,addOne:v(s),updateOne:v(S),upsertOne:v(function k(p,l){return _([p],l)}),setAll:v(function U(p,l){return l.entities={},l.ids=[],c(p,l),g.Both}),setOne:v(O),setMany:v(function F(p,l){const u=p.map(f=>O(f,l));switch(!0){case u.some(f=>f===g.Both):return g.Both;case u.some(f=>f===g.EntitiesOnly):return g.EntitiesOnly;default:return g.None}}),addMany:v(c),updateMany:v(M),upsertMany:v(_),map:v(function V(p,l){return M(l.ids.reduce((f,h)=>{const A=p(l.entities[h]);return A!==l.entities[h]&&f.push({id:h,changes:A}),f},[]),l)}),mapOne:v(function L({map:p,id:l},u){const f=u.entities[l];return f?S({id:l,changes:p(f)},u):g.None})}}(i,a):be(i);return Object.assign(Object.assign(Object.assign({selectId:i,sortComparer:a},s),c),U)}const Z=Ze({selectId:function rt(t){return t.id},sortComparer:function lt(t,o){return t.attachDate&&o.attachDate?t.attachDate<o.attachDate?1:-1:1}}),ct=Z.getInitialState({apiWorking:!1,filesUploadedAndUrlAddedToDb:[],errMsg:void 0,error:!1}),pt=(0,r.Lq)(ct,(0,r.on)(ve,t=>Z.removeAll(Object.assign(Object.assign({},t),{apiWorking:!1,error:!1,errMsg:void 0,filesUploadedAndUrlAddedToDb:[]}))),(0,r.on)(q,(t,{file:o,fileId:n})=>{const i={attachDate:(new Date).getTime(),dateModified:o.lastModified,file:o,fileName:o.name,fileSize:o.size,id:n,completed:!1,progress:0,downloadUrl:void 0};return Z.addOne(i,Object.assign(Object.assign({},t),{apiWorking:!0}))}),(0,r.on)(ne,(t,{fileId:o,progress:n,downloadUrl:i})=>{var a,s;const c={id:o,changes:{progress:null!=n?n:null===(a=t.entities[o])||void 0===a?void 0:a.progress,downloadUrl:null!=i?i:null===(s=t.entities[o])||void 0===s?void 0:s.downloadUrl}};return Z.updateOne(c,Object.assign(Object.assign({},t),{apiWorking:!0}))}),(0,r.on)(te,(t,{fileId:o})=>{const n={id:o,changes:{completed:!0,completedDate:(new Date).getTime()}};return Z.updateOne(n,Object.assign(Object.assign({},t),{apiWorking:!1}))}),(0,r.on)(Ae,(t,{errMsg:o})=>Object.assign(Object.assign({},t),{apiWorking:!1,error:!0,errMsg:o})),(0,r.on)(oe,(t,{photoData:o})=>Z.updateOne({id:o.id,changes:{urlUploaded:!1}},Object.assign(Object.assign({},t),{apiWorking:!0}))),(0,r.on)(ie,(t,{photoData:o})=>{var n;const i={id:o.id,changes:{urlUploaded:!0}},a=[...null!==(n=t.filesUploadedAndUrlAddedToDb)&&void 0!==n?n:[]];return a.push(o),Z.updateOne(i,Object.assign(Object.assign({},t),{apiWorking:!1,filesUploadedAndUrlAddedToDb:a}))}),(0,r.on)(Te,(t,{errMsg:o})=>Object.assign(Object.assign({},t),{apiWorking:!1,error:!0,errMsg:o})));function dt(t,o){return pt(t,o)}const B=(0,r.ZF)(Pe),Se=((0,r.P1)(B,Z.getSelectors().selectIds),(0,r.P1)(B,Z.getSelectors().selectEntities),(0,r.P1)(B,Z.getSelectors().selectAll)),ut=(0,r.P1)(B,Z.getSelectors().selectTotal),gt=(0,r.P1)(B,t=>t.apiWorking),se=(0,r.P1)(B,t=>t.filesUploadedAndUrlAddedToDb),ft=(0,r.P1)(ut,se,(t,o)=>t===o.length),mt=(0,r.P1)(Se,se,(t,o)=>({total:t,uploadings:o})),E=Ze({selectId:function _t(t){return t.id},sortComparer:function ht(t,o){return t.dateUploaded&&o.dateUploaded?t.dateUploaded<o.dateUploaded?1:-1:1}}),yt=E.getInitialState({apiWorking:!1,firstTimeLoading:!0,errMsg:void 0,error:!1}),xt=(0,r.Lq)(yt,(0,r.on)(K,t=>Object.assign(Object.assign({},t),{apiWorking:!0})),(0,r.on)(Oe,(t,{files:o})=>E.setAll(o,Object.assign(Object.assign({},t),{apiWorking:!1,firstTimeLoading:!1}))),(0,r.on)(Le,t=>E.removeAll(Object.assign(Object.assign({},t),{apiWorking:!1}))));function Ut(t,o){return xt(t,o)}var vt=m(5839);const w=(0,r.ZF)(Ce),At=((0,r.P1)(w,E.getSelectors().selectIds),(0,r.P1)(w,E.getSelectors().selectEntities),(0,r.P1)(w,E.getSelectors().selectAll)),Tt=(0,r.P1)(w,E.getSelectors().selectTotal),Ot=(0,r.P1)(w,t=>t.firstTimeLoading),Ie=(0,r.P1)(w,vt.t0,Ot,(t,o,n)=>(t.apiWorking||!!o)&&n),Lt=(0,r.P1)(w,t=>t.apiWorking),Pt=(0,r.P1)(At,t=>{if(t&&t.length>0){const o=[...t];return o.sort((i,a)=>i.dateUploaded>a.dateUploaded?-1:1),o.slice(0,5)}return[]});(0,r.P1)(Ie,w,(t,o)=>({apiLoading:t,columnData:[],columnIds:["photoUrl","fileName","fileSize","dateUploaded"]}));var Ct=m(5439);let ae=(()=>{class t{constructor(n){this.storage=n}uploadBlob(n,i){const a="uploader-app/"+this.getCurrentTime()+"/"+i,s=this.storage.ref(a),c=s.put(n);return{ref:s,task:c}}getCurrentTime(){return Ct().format("MM-DD-YYYY")}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(ee.Q1))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var P=m(5265),re=m(2843),C=m(4004),W=m(262);let Zt=(()=>{class t{constructor(n,i){this.firestore=n,this.storage=i}createDocument(n,i){const a=(0,P.JU)(this.firestore,"uploader/"+i);return(0,P.pl)(a,n)}updateDocument(n){if(n){const i=(0,P.JU)(this.firestore,"uploader/");return(0,P.r7)(i,{amount:n})}return Promise.resolve()}addDocumentToCollection(n,i){const a=(0,P.JU)((0,P.hJ)(this.firestore,"uploader/"+i)),s=a.id,c=Object.assign(Object.assign({},n),{id:s});return{operationObs:(0,P.pl)(a,c),id:s}}getDocument(n){const i=(0,P.JU)(this.firestore,"uploader/"+n);return(0,P.KO)(i).pipe((0,z.q)(1),(0,C.U)(a=>a.data()),(0,W.K)(a=>(console.error(a),(0,re._)(()=>{const s=new Error(a);return s.timestamp=Date.now(),s}))))}getDataByCollectionName(n){const i=(0,P.hJ)(this.firestore,"uploader/");return(0,P.$k)(i).pipe((0,z.q)(1),(0,W.K)(a=>(console.error(a),(0,re._)(()=>{const s=new Error(a);return s.timestamp=Date.now(),s}))),(0,C.U)(a=>a.map(s=>{const c=s.data();return Object.assign({id:s.id},c)})))}getCollection(n){const i=(0,P.hJ)(this.firestore,"uploader/"+n);return(0,P.$k)(i).pipe((0,z.q)(1),(0,W.K)(a=>(console.error(a),(0,re._)(()=>{const s=new Error(a);return s.timestamp=Date.now(),s}))),(0,C.U)(a=>a.map(s=>{const c=s.data();return Object.assign({},c)})))}uploadBlob(n){return this.storage.ref("folder-1").put(n)}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(P.gg),e.LFG(ee.Q1))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),H=(()=>{class t{constructor(n,i,a){this.store=n,this.ss=i,this.rs=a,this.filesUploadingAll$=this.store.select(Se),this.anyFilesUploading$=this.store.select(gt),this.filesUploaded$=this.store.select(se),this.isFilesUploadFinished$=this.store.select(ft),this.uploadingsAndTotalFiles$=this.store.select(mt),this.userFilesApiLoading$=this.store.select(Ie),this.userFileApiWorking$=this.store.select(Lt),this.userFilesCount$=this.store.select(Tt),this.userRecentUploads$=this.store.select(Pt)}attachFile(n,i){this.store.dispatch(Ue({file:n,fileId:i}))}cleanUpAttachedFiles(){this.store.dispatch(ve())}uploadFile(n,i){return this.ss.uploadBlob(n,i)}addPhotoUrl(n,i){return this.rs.addDocumentToCollection(n,i+"/photos")}getUserPhotos(n){return this.rs.getCollection(n+"/photos")}getUserFiles(){return this.store.dispatch(K({user:void 0}))}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(r.yh),e.LFG(ae),e.LFG(Zt))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var X=m(3702),Fe=m(3003),le=m(1271),ce=m(8966),Y=(()=>{return(t=Y||(Y={})).MINIMIZE="minimize",t.MAXIMIZE="maximize",t.CLOSE="close",Y;var t})(),x=m(7093),pe=m(7423),R=m(5245),T=m(9808),St=m(655),It=m(8603);class N{transform(o,n){if(o){let i=o.slice(0,n);return n>=o.length?o:i+".."}return o+""}}N.\u0275fac=function(o){return new(o||N)},N.\u0275pipe=e.Yjl({name:"stringSliceCutoff",type:N,pure:!0}),(0,St.gn)([(0,It.Z)()],N.prototype,"transform",null);var de=m(4836),J=m(837);function Ft(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div",10),e._uU(2),e.qZA(),e.TgZ(3,"div",11)(4,"mat-icon",12),e._uU(5,"task_alt"),e.qZA()(),e.BQk()),2&t){const n=e.oxw().ngIf;e.xp6(2),e.AsE(" ",n.uploadings.length," / ",n.total.length," files uploaded ")}}function Mt(t,o){if(1&t&&(e.TgZ(0,"div",10),e._uU(1),e.qZA(),e.TgZ(2,"mat-icon",13),e._uU(3,"hourglass_bottom"),e.qZA()),2&t){const n=e.oxw().ngIf;e.xp6(1),e.AsE(" Uploading: ",n.uploadings.length," / ",n.total.length," ")}}function Dt(t,o){if(1&t&&(e.ynx(0),e.YNc(1,Ft,6,2,"ng-container",6),e.ALo(2,"async"),e.YNc(3,Mt,4,2,"ng-template",null,9,e.W1O),e.BQk()),2&t){const n=e.MAs(4),i=e.oxw(3);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,i.data.isFilesUploadFinished))("ngIfElse",n)}}function wt(t,o){if(1&t&&(e.ynx(0),e._UZ(1,"img",23),e.BQk()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.Q6J("src",null==n?null:n.downloadUrl,e.LSH)}}function kt(t,o){1&t&&(e.TgZ(0,"mat-icon",24),e._uU(1," cloud_upload "),e.qZA())}function Et(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div",15)(2,"div"),e.YNc(3,wt,2,1,"ng-container",6),e.YNc(4,kt,2,0,"ng-template",null,16,e.W1O),e.qZA(),e.TgZ(6,"div",17)(7,"div",18)(8,"a",19),e._uU(9),e.ALo(10,"stringSliceCutoff"),e.qZA(),e.TgZ(11,"div",20),e._uU(12),e.qZA()(),e.TgZ(13,"div",21)(14,"div"),e._uU(15),e.ALo(16,"fileSizeDisplay"),e.qZA(),e.TgZ(17,"div",22),e.ALo(18,"dateDisplay"),e._uU(19),e.ALo(20,"dateFromNow"),e.qZA()()()(),e.BQk()),2&t){const n=o.$implicit,i=e.MAs(5);e.xp6(3),e.Q6J("ngIf",null==n?null:n.downloadUrl)("ngIfElse",i),e.xp6(4),e.Q6J("title",null==n?null:n.fileName),e.xp6(1),e.Q6J("href",null==n?null:n.downloadUrl,e.LSH),e.xp6(1),e.hij(" ",e.xi3(10,9,null==n?null:n.fileName,25)," - "),e.xp6(3),e.hij(" ",n.progress,"% "),e.xp6(3),e.hij(" ",e.lcZ(16,12,null==n?null:n.fileSize)," - "),e.xp6(2),e.Q6J("title",e.xi3(18,14,null==n?null:n.attachDate,"FULLDATE")),e.xp6(2),e.hij(" ",e.lcZ(20,17,null==n?null:n.attachDate)," ")}}function Nt(t,o){if(1&t&&(e.ynx(0),e.YNc(1,Et,21,19,"ng-container",14),e.BQk()),2&t){const n=o.ngIf;e.xp6(1),e.Q6J("ngForOf",n)}}function Qt(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div",7),e.YNc(2,Dt,5,4,"ng-container",4),e.ALo(3,"async"),e.qZA(),e.TgZ(4,"div",8),e.YNc(5,Nt,2,1,"ng-container",4),e.ALo(6,"async"),e.qZA(),e.BQk()),2&t){const n=e.oxw(2);e.xp6(2),e.Q6J("ngIf",e.lcZ(3,2,n.data.uploadingsAndTotalFiles)),e.xp6(3),e.Q6J("ngIf",e.lcZ(6,4,n.data.fileStatus))}}function Bt(t,o){if(1&t&&(e.ynx(0),e.YNc(1,Qt,7,6,"ng-container",6),e.BQk()),2&t){const n=o.ngIf;e.oxw();const i=e.MAs(16);e.xp6(1),e.Q6J("ngIf",n.length>0)("ngIfElse",i)}}function Ht(t,o){1&t&&(e.TgZ(0,"div",25),e._uU(1," Upload queue is empty. "),e.qZA())}let Yt=(()=>{class t{constructor(n,i){this.dialogRef=n,this.data=i,this.minimize=Y.MINIMIZE,this.close=Y.CLOSE}ngOnInit(){}onDialogClose(n){this.dialogRef.close({action:n})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(ce.so),e.Y36(ce.WI))},t.\u0275cmp=e.Xpm({type:t,selectors:[["progress-dialog-display"]],decls:17,vars:3,consts:[["fxLayout","column","fxLayoutAlign","start center","fxLayoutGap","0px"],["fxLayout","row","fxLayoutAlign","space-between center",1,"title","quicksand","fw-500","w-100"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","1px"],["mat-icon-button","",3,"click"],[4,"ngIf"],["nothingUploading",""],[4,"ngIf","ngIfElse"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"content","w-100","bb-1"],["fxLayout","column","fxLayoutAlign","start center","fxLayoutGap","10px",1,"content","w-100"],["uploading",""],[1,""],["fxLayout","column","fxLayoutAlign","center center",1,""],[1,"text-success"],[1,"text-primary"],[4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","15px",1,"w-100"],["imgPlaceholder",""],["fxLayout","column","fxLayoutAlign","center start","fxLayoutGap","5px"],["fxLayout","row","fxLayoutAlign","start start","fxLayoutGap","5px",3,"title"],["target","_blank","rel","noopener noreferrer",1,"stateful",3,"href"],[1,"fw-500","percent"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","5px",1,"meta"],[1,"date",3,"title"],["alt","Photo img","width","50","height","50",3,"src"],[1,"pic-progress"],["fxLayout","row","fxLayoutAlign","start center",1,"content","w-100"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div"),e._uU(3," Upload Progress "),e.qZA(),e.TgZ(4,"div",2)(5,"div")(6,"button",3),e.NdJ("click",function(){return i.onDialogClose(i.minimize)}),e.TgZ(7,"mat-icon"),e._uU(8,"minimize"),e.qZA()()(),e.TgZ(9,"div")(10,"button",3),e.NdJ("click",function(){return i.onDialogClose(i.close)}),e.TgZ(11,"mat-icon"),e._uU(12,"close"),e.qZA()()()()(),e.YNc(13,Bt,2,2,"ng-container",4),e.ALo(14,"async"),e.qZA(),e.YNc(15,Ht,2,0,"ng-template",null,5,e.W1O)),2&n&&(e.xp6(13),e.Q6J("ngIf",e.lcZ(14,1,i.data.fileStatus)))},directives:[x.xw,x.Wh,x.SQ,pe.lW,R.Hw,T.O5,T.sg],pipes:[T.Ov,N,de.nV,J.o,J.G],styles:[".title[_ngcontent-%COMP%]{background-color:#2a2961;color:#fff;padding:20px}.content[_ngcontent-%COMP%]{padding:15px}.content[_ngcontent-%COMP%]   .percent[_ngcontent-%COMP%]{color:#093}.content[_ngcontent-%COMP%]   mat-icon.pic-progress[_ngcontent-%COMP%]{color:#517e5d}"]}),t})();const j=(0,r.PH)("[Progress Display/UI] Toggle upload progress snackbar",(0,r.Ky)()),ue=(0,r.PH)("[Progress Display/UI] Toggle upload progress dialog",(0,r.Ky)()),Me=(0,r.PH)("[Progress Display/UI] Closed dialog via minimize or click out");let De=(()=>{class t{constructor(n,i){this.dialog=n,this.store=i}openDialog(n){var i;return null===(i=this.displayRef)||void 0===i||i.close(),this.displayRef=this.dialog.open(Yt,{minWidth:"calc(100% - 50rem)",height:"calc(100% - 10rem)",panelClass:"progress-dialog-display",data:n,autoFocus:!1}),this.displayRef}closeDialog(){var n;null===(n=this.displayRef)||void 0===n||n.close()}dispatchToggleDialog(n){this.store.dispatch(ue({status:n}))}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(ce.uw),e.LFG(r.yh))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Jt(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div",8),e._uU(2),e.qZA(),e.TgZ(3,"div",9)(4,"mat-icon",10),e._uU(5,"task_alt"),e.qZA()(),e.BQk()),2&t){const n=e.oxw(2).ngIf;e.xp6(2),e.AsE(" ",n.uploadings.length," / ",n.total.length," files uploaded ")}}function jt(t,o){if(1&t&&(e.TgZ(0,"div",8),e._uU(1),e.qZA(),e.TgZ(2,"mat-icon",11),e._uU(3,"hourglass_bottom"),e.qZA()),2&t){const n=e.oxw(2).ngIf;e.xp6(1),e.AsE(" Uploading: ",n.uploadings.length," / ",n.total.length," ")}}function $t(t,o){if(1&t&&(e.ynx(0),e.YNc(1,Jt,6,2,"ng-container",5),e.ALo(2,"async"),e.YNc(3,jt,4,2,"ng-template",null,7,e.W1O),e.BQk()),2&t){const n=e.MAs(4),i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,i.data.isFilesUploadFinished))("ngIfElse",n)}}function zt(t,o){1&t&&e._uU(0," Upload queue is empty. ")}function qt(t,o){if(1&t&&(e.ynx(0),e.YNc(1,$t,5,4,"ng-container",5),e.YNc(2,zt,1,0,"ng-template",null,6,e.W1O),e.BQk()),2&t){const n=o.ngIf,i=e.MAs(3);e.xp6(1),e.Q6J("ngIf",n.total.length>0)("ngIfElse",i)}}let Kt=(()=>{class t{constructor(n,i,a,s){this.data=n,this.progressRef=i,this.ps=a,this.ds=s}ngOnInit(){}onMaximizeClick(){this.ds.dispatchToggleDialog(!0)}onCloseSnackbarClick(){this.ps.dispatchToggleSnackbar(!1)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(le.qD),e.Y36(le.OX),e.Y36(ge),e.Y36(De))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-shared-progress-snackbar"]],decls:13,vars:3,consts:[["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","0px",1,"w-100"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","5px",1,"sb-body",3,"click"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","1px"],["mat-icon-button","",3,"click"],[4,"ngIf","ngIfElse"],["emptyQueue",""],["uploading",""],[1,""],["fxLayout","column","fxLayoutAlign","center center",1,""],[1,"text-success"],[1,"text-primary"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){return i.onMaximizeClick()}),e.YNc(2,qt,4,2,"ng-container",2),e.ALo(3,"async"),e.qZA(),e.TgZ(4,"div",3)(5,"div")(6,"button",4),e.NdJ("click",function(){return i.onMaximizeClick()}),e.TgZ(7,"mat-icon"),e._uU(8,"maximize"),e.qZA()()(),e.TgZ(9,"div")(10,"button",4),e.NdJ("click",function(){return i.onCloseSnackbarClick()}),e.TgZ(11,"mat-icon"),e._uU(12,"close"),e.qZA()()()()()),2&n&&(e.xp6(2),e.Q6J("ngIf",e.lcZ(3,1,i.data.uploadingsAndTotalFiles)))},directives:[x.xw,x.Wh,x.SQ,T.O5,R.Hw,pe.lW],pipes:[T.Ov],styles:[".sb-body[_ngcontent-%COMP%]{cursor:pointer}"]}),t})(),ge=(()=>{class t{constructor(n,i){this.snackBar=n,this.store=i,this.defaultHorizontalPosition="center",this.defaultVerticalPosition="bottom"}getProgressSnackbar(n){var i;return null===(i=this.currentSnackbarRef)||void 0===i||i.dismiss(),this.currentSnackbarRef=this.snackBar.openFromComponent(Kt,{horizontalPosition:this.defaultHorizontalPosition,verticalPosition:this.defaultVerticalPosition,duration:0,panelClass:"progress-snackbar",data:n}),this.currentSnackbarRef}closeProgressSnackbar(){var n;null===(n=this.currentSnackbarRef)||void 0===n||n.dismiss()}dispatchToggleSnackbar(n){this.store.dispatch(j({status:n}))}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(le.ux),e.LFG(r.yh))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Xt=m(5899);function Vt(t,o){if(1&t&&(e.ynx(0),e._UZ(1,"mat-progress-bar",3),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("mode",n.mode)}}function en(t,o){if(1&t&&e._UZ(0,"mat-progress-bar",4),2&t){const n=e.oxw();e.Q6J("mode",n.mode)("value",n.progress)("color",100===n.progress?"primary":"accent")}}let fe=(()=>{class t{constructor(){this.mode="indeterminate"}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["shared-loading-bar"]],inputs:{progress:"progress",mode:"mode"},decls:4,vars:2,consts:[[1,"parent"],[4,"ngIf","ngIfElse"],["nonIndeter",""],["color","primary",3,"mode"],[3,"mode","value","color"]],template:function(n,i){if(1&n&&(e.TgZ(0,"div",0),e.YNc(1,Vt,2,1,"ng-container",1),e.YNc(2,en,1,3,"ng-template",null,2,e.W1O),e.qZA()),2&n){const a=e.MAs(3);e.xp6(1),e.Q6J("ngIf","indeterminate"===i.mode)("ngIfElse",a)}},directives:[T.O5,Xt.pW],styles:[".parent[_ngcontent-%COMP%]{height:100%}mat-progress-bar.mat-progress-bar[_ngcontent-%COMP%]{height:100%;border-radius:30px}"]}),t})();function tn(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div",15)(2,"div"),e._uU(3),e.qZA()(),e.BQk()),2&t){const n=e.oxw(2);e.xp6(3),e.hij(" Uploading ( ",n.file.progress,"% ) ")}}function nn(t,o){if(1&t&&(e.ynx(0),e._UZ(1,"shared-loading-bar",16),e.BQk()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("progress",n.file.progress)("mode","determinate")}}function on(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div",17),e._UZ(2,"img",18),e.qZA(),e.BQk()),2&t){const n=e.oxw(2);e.xp6(2),e.Q6J("src",n.imgPreview,e.LSH)}}function sn(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"a",19),e._uU(2,"Click here"),e.qZA(),e.BQk()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("href",n.file.downloadUrl,e.LSH)}}function an(t,o){1&t&&e._uU(0," Creating URL... ")}function rn(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div",3)(2,"div",4)(3,"div",5),e.YNc(4,tn,4,1,"ng-container",6),e.qZA(),e.TgZ(5,"div",7)(6,"div",8),e.YNc(7,nn,2,2,"ng-container",0),e.qZA()(),e.YNc(8,on,3,1,"ng-container",6),e.TgZ(9,"div",9),e._UZ(10,"hr"),e.qZA(),e.TgZ(11,"div",10)(12,"div",11)(13,"div",12),e._uU(14," File Name: "),e.qZA(),e.TgZ(15,"div",13),e._uU(16),e.qZA()(),e.TgZ(17,"div",11)(18,"div",12),e._uU(19," File Size: "),e.qZA(),e.TgZ(20,"div",13),e._uU(21),e.ALo(22,"fileSizeDisplay"),e.qZA()(),e.TgZ(23,"div",11)(24,"div",12),e._uU(25," Date modified: "),e.qZA(),e.TgZ(26,"div"),e._uU(27),e.ALo(28,"dateDisplay"),e.qZA()(),e.TgZ(29,"div",11)(30,"div",12),e._uU(31," Download URL: "),e.qZA(),e.TgZ(32,"div"),e.YNc(33,sn,3,1,"ng-container",6),e.YNc(34,an,1,0,"ng-template",null,14,e.W1O),e.qZA()()()()(),e.BQk()),2&t){const n=e.MAs(35),i=e.oxw(),a=e.MAs(2),s=e.MAs(4);e.xp6(4),e.Q6J("ngIf",i.file.progress<100)("ngIfElse",a),e.xp6(3),e.Q6J("ngIf",i.file.progress),e.xp6(1),e.Q6J("ngIf",i.isImgType)("ngIfElse",s),e.xp6(8),e.hij(" ",i.file.fileName," "),e.xp6(5),e.hij(" ",e.lcZ(22,10,i.file.fileSize)," "),e.xp6(6),e.hij(" ",e.xi3(28,12,i.file.dateModified,"MDY")," "),e.xp6(6),e.Q6J("ngIf",i.file.downloadUrl)("ngIfElse",n)}}function ln(t,o){1&t&&(e.TgZ(0,"div",15)(1,"div",20)(2,"mat-icon",21),e._uU(3,"check_circle"),e.qZA()(),e.TgZ(4,"div"),e._uU(5," Completed "),e.qZA()())}function cn(t,o){1&t&&(e.TgZ(0,"div",17)(1,"mat-icon",22),e._uU(2," description "),e.qZA()())}const pn=["image/jpeg","image/png","image/gif"];let dn=(()=>{class t{constructor(){this.isImgType=!1,this.reader=new FileReader}ngOnInit(){}ngOnChanges(n){var i,a,s;this.imgId!==n.file.currentValue.id&&(null===(i=this.file)||void 0===i?void 0:i.file)&&(this.isImgType=!!pn.includes(this.file.file.type),this.reader.onload=c=>this.imgPreview=this.reader.result,this.reader.readAsDataURL(null===(a=this.file)||void 0===a?void 0:a.file)),this.imgId||(this.imgId=null===(s=this.file)||void 0===s?void 0:s.id)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-upload-item"]],inputs:{file:"file"},features:[e.TTD],decls:5,vars:1,consts:[[4,"ngIf"],["finished",""],["notImg",""],[1,"file-parent"],[1,"card"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","10px",1,"loading-status","poppins"],[4,"ngIf","ngIfElse"],["fxLayout","row","fxLayoutAlign","center center"],[1,"progress-parent"],[1,"w-100"],["fxLayout","column","fxLayoutAlign","start start","fxLayoutGap","5px",1,"w-100","poppins","info-parent"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"info-line"],[1,"label"],[1,"value"],["noUrl",""],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","10px"],[3,"progress","mode"],[1,"image-parent"],[1,"preview-img",3,"src"],["target","_blank",3,"href"],["fxLayout","column","fxLayoutAlign","center center"],[1,"done"],["fxLayout","row","fxLayoutAlign","center center",1,"file-icon"]],template:function(n,i){1&n&&(e.YNc(0,rn,36,15,"ng-container",0),e.YNc(1,ln,6,0,"ng-template",null,1,e.W1O),e.YNc(3,cn,3,0,"ng-template",null,2,e.W1O)),2&n&&e.Q6J("ngIf",i.file)},directives:[T.O5,x.xw,x.Wh,x.SQ,fe,R.Hw],pipes:[de.nV,J.o],styles:[".file-parent[_ngcontent-%COMP%]{margin-top:15px}.file-parent[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-top-right-radius:25px;border-top-left-radius:25px;background-color:#ededf7}.file-parent[_ngcontent-%COMP%]   .loading-status[_ngcontent-%COMP%]{font-size:13px;height:2rem}.file-parent[_ngcontent-%COMP%]   .image-parent[_ngcontent-%COMP%]{height:15rem;width:100%;overflow:hidden;text-align:center}.file-parent[_ngcontent-%COMP%]   .image-parent[_ngcontent-%COMP%]   .preview-img[_ngcontent-%COMP%]{height:100%}.file-parent[_ngcontent-%COMP%]   .image-parent[_ngcontent-%COMP%]:hover{overflow:auto}.file-parent[_ngcontent-%COMP%]   .progress-parent[_ngcontent-%COMP%]{height:10px;width:97%;margin-bottom:8px}.file-parent[_ngcontent-%COMP%]   .info-parent[_ngcontent-%COMP%]{padding:0 10px 10px;height:7rem;overflow:hidden;font-size:11px}.file-parent[_ngcontent-%COMP%]   .info-parent[_ngcontent-%COMP%]:hover{overflow:auto}.file-parent[_ngcontent-%COMP%]   .info-line[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500}.file-parent[_ngcontent-%COMP%]   mat-icon.done[_ngcontent-%COMP%]{font-size:18px;color:#093;text-align:center;height:100%}.file-parent[_ngcontent-%COMP%]   mat-icon.progress[_ngcontent-%COMP%]{font-size:18px;color:#b38600;text-align:center;height:100%}.file-parent[_ngcontent-%COMP%]   mat-icon.file-icon[_ngcontent-%COMP%]{font-size:10rem;height:15rem;width:100%;color:#555}"]}),t})(),un=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-shared-photo-record-display"]],inputs:{photo:"photo"},decls:16,vars:17,consts:[["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","15px",1,"fw-500"],["alt","Photo img","width","50","height","50",3,"src"],["fxLayout","column","fxLayoutAlign","center start","fxLayoutGap","5px"],[3,"title"],["target","_blank","rel","noopener noreferrer",1,"stateful",3,"href"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","5px",1,"meta"],[1,"date",3,"title"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div"),e._UZ(2,"img",1),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"a",4),e._uU(6),e.ALo(7,"stringSliceCutoff"),e.qZA()(),e.TgZ(8,"div",5)(9,"div"),e._uU(10),e.ALo(11,"fileSizeDisplay"),e.qZA(),e.TgZ(12,"div",6),e.ALo(13,"dateDisplay"),e._uU(14),e.ALo(15,"dateFromNow"),e.qZA()()()()),2&n&&(e.xp6(2),e.Q6J("src",null==i.photo?null:i.photo.photoUrl,e.LSH),e.xp6(2),e.Q6J("title",null==i.photo?null:i.photo.fileName),e.xp6(1),e.Q6J("href",null==i.photo?null:i.photo.photoUrl,e.LSH),e.xp6(1),e.hij(" ",e.xi3(7,7,null==i.photo?null:i.photo.fileName,25)," "),e.xp6(4),e.hij(" ",e.lcZ(11,10,null==i.photo?null:i.photo.fileSize)," - "),e.xp6(2),e.Q6J("title",e.xi3(13,12,null==i.photo?null:i.photo.dateUploaded,"FULLDATE")),e.xp6(2),e.hij(" ",e.lcZ(15,15,null==i.photo?null:i.photo.dateUploaded)," "))},directives:[x.xw,x.Wh,x.SQ],pipes:[N,de.nV,J.o,J.G],styles:[".meta[_ngcontent-%COMP%]{font-size:13px}"]}),t})();function gn(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div"),e._UZ(2,"app-shared-photo-record-display",11),e.qZA(),e.BQk()),2&t){const n=o.$implicit;e.xp6(2),e.Q6J("photo",n)}}const fn=function(){return["../","history"]};function mn(t,o){if(1&t&&(e.ynx(0),e.YNc(1,gn,3,1,"ng-container",6),e.TgZ(2,"div",7)(3,"a",8)(4,"div",9)(5,"div"),e._uU(6," Go to my files "),e.qZA(),e.TgZ(7,"div",10)(8,"mat-icon"),e._uU(9," arrow_right_alt "),e.qZA()()()()(),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.recentUploads),e.xp6(2),e.Q6J("routerLink",e.DdM(2,fn))}}function _n(t,o){1&t&&(e.ynx(0),e._uU(1," Loading... "),e.BQk())}function hn(t,o){if(1&t&&(e.TgZ(0,"div",12),e.YNc(1,_n,2,0,"ng-container",3),e.qZA()),2&t){const n=e.oxw(),i=e.MAs(8);e.xp6(1),e.Q6J("ngIf",n.apiWorking)("ngIfElse",i)}}function yn(t,o){1&t&&(e.TgZ(0,"div"),e._uU(1," You have not uplaoded anything yet. \xaf\\_(\u30c4)_/\xaf "),e.qZA())}let xn=(()=>{class t{constructor(){this.recentUploads=[],this.apiWorking=!1}ngOnInit(){}ngOnChanges(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-main-welcome-recent-uploads"]],inputs:{recentUploads:"recentUploads",apiWorking:"apiWorking"},features:[e.TTD],decls:9,vars:2,consts:[["fxLayout","column","fxLayoutAlign","start start","fxLayoutGap","20px"],[1,"poppins","title","bb-1"],["fxLayout","column","fxLayoutGap","5px","fxLayoutAlign","start stretch"],[4,"ngIf","ngIfElse"],["noRecentPhotos",""],["loaded",""],[4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"poppins","mt-2"],[3,"routerLink"],["fxLayout","row","fxLayoutAlign","center center"],["fxLayout","column","fxLayoutAlign","center center"],[3,"photo"],[1,"poppins","gray-text","empty-text"]],template:function(n,i){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2," Recent uploads: "),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,mn,10,3,"ng-container",3),e.qZA()(),e.YNc(5,hn,2,2,"ng-template",null,4,e.W1O),e.YNc(7,yn,2,0,"ng-template",null,5,e.W1O)),2&n){const a=e.MAs(6);e.xp6(4),e.Q6J("ngIf",i.recentUploads&&i.recentUploads.length>0)("ngIfElse",a)}},directives:[x.xw,x.Wh,x.SQ,T.O5,T.sg,un,G.yS,R.Hw],styles:[".title[_ngcontent-%COMP%]{font-size:20px}.empty-text[_ngcontent-%COMP%]{font-size:17px}"],changeDetection:0}),t})();function Un(t,o){if(1&t&&(e.ynx(0),e._UZ(1,"app-main-welcome-recent-uploads",2),e.ALo(2,"async"),e.ALo(3,"async"),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("recentUploads",e.lcZ(2,2,n.us.userRecentUploads$))("apiWorking",e.lcZ(3,4,n.us.userFileApiWorking$))}}const vn=function(){return["/","auth","signin"]};function An(t,o){1&t&&(e.TgZ(0,"div",3)(1,"div",4),e._uU(2," Hello! "),e.qZA(),e.TgZ(3,"div",5)(4,"div"),e._UZ(5,"img",6),e.qZA(),e.TgZ(6,"div",7)(7,"mat-icon",8),e._uU(8,"face"),e.qZA()()(),e.TgZ(9,"div",9)(10,"a",10),e._uU(11,"Create a Uploader account to get started."),e.qZA()()()),2&t&&(e.xp6(10),e.Q6J("routerLink",e.DdM(1,vn)))}let Tn=(()=>{class t{constructor(n){this.us=n,this.fileList=[]}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(H))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-main-welcome"]],inputs:{currentUser:"currentUser",fileList:"fileList"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noUser",""],[3,"recentUploads","apiWorking"],["fxLayout","column","fxLayoutAlign","start center","fxLayoutGap","20px",1,"no-user"],[1,"poppins","main"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","10px"],["src","assets/img/uploader.png","alt","logo",1,"logo-img"],["fxLayout","row","fxLayoutAlign","center center"],[1,"welcome-icon"],[1,"poppins"],[3,"routerLink"]],template:function(n,i){if(1&n&&(e.YNc(0,Un,4,6,"ng-container",0),e.YNc(1,An,12,2,"ng-template",null,1,e.W1O)),2&n){const a=e.MAs(2);e.Q6J("ngIf",i.currentUser)("ngIfElse",a)}},directives:[T.O5,xn,x.xw,x.Wh,x.SQ,R.Hw,G.yS],pipes:[T.Ov],styles:["[_nghost-%COMP%]{width:100%}.no-user[_ngcontent-%COMP%]   .logo-img[_ngcontent-%COMP%]{height:4rem}.no-user[_ngcontent-%COMP%]   .welcome-icon[_ngcontent-%COMP%]{font-size:4.7rem;height:4.7rem;width:4.7rem;color:#5f5dbb}.no-user[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{font-size:32px;color:#5f5dbb}.no-user[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#5f5dbb}.user[_ngcontent-%COMP%]{font-size:20px}.user[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{color:#2a2961}"]}),t})();var On=m(7579);let we=(()=>{class t{constructor(){this.wholePage=!1,this.loading=!0,this.logoShakeState=!1,this.compDest$=new On.x}ngOnChanges(n){this.parentClass=this.wholePage?"whole-page loading-container":"container loading-container mt-5"}ngOnInit(){}ngOnDestroy(){this.compDest$.next(null),this.compDest$.complete()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-shared-loading"]],inputs:{wholePage:"wholePage",message:"message"},features:[e.TTD],decls:12,vars:3,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"w-100"],[1,""],[1,"loading-logo"],["src","assets/img/uploader.png","alt","logo",1,"logo-img","d-inline-block"],[1,"loading-parent"],[1,"lds-facebook"],[1,"secfont"]],template:function(n,i){1&n&&(e.TgZ(0,"div")(1,"div",0)(2,"div",1)(3,"div",2),e._UZ(4,"img",3),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5),e._UZ(7,"div")(8,"div")(9,"div"),e.qZA()(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()()),2&n&&(e.Tol(i.parentClass),e.xp6(11),e.hij(" Loading ",i.message," ... "))},directives:[x.xw,x.Wh],styles:[".loading-logo[_ngcontent-%COMP%]{height:3rem}.loading-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.loading-parent[_ngcontent-%COMP%]{justify-content:center;align-items:center}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.whole-page[_ngcontent-%COMP%]{position:fixed;width:100%}.lds-facebook[_ngcontent-%COMP%]{display:inline-block;position:relative;width:80px;height:80px}.lds-facebook[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;position:absolute;left:8px;width:16px;background:#007bff;animation:lds-facebook 1.2s cubic-bezier(0,.5,.5,1) infinite}.lds-facebook[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){left:8px;animation-delay:-.24s}.lds-facebook[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){left:32px;animation-delay:-.12s}.lds-facebook[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){left:56px;animation-delay:0}@keyframes lds-facebook{0%{top:8px;height:64px}50%,to{top:24px;height:32px}}"]}),t})();const Ln=["uploadInput"];function Pn(t,o){1&t&&(e.ynx(0),e._UZ(1,"shared-loading-bar",15),e.BQk())}function Cn(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div",22),e._uU(2),e.qZA(),e.TgZ(3,"div",23)(4,"mat-icon",24),e._uU(5,"task_alt"),e.qZA()(),e.BQk()),2&t){const n=e.oxw().ngIf;e.xp6(2),e.AsE(" ",n.uploadings.length," / ",n.total.length," files uploaded ")}}function bn(t,o){if(1&t&&(e.TgZ(0,"div",22),e._uU(1),e.qZA(),e.TgZ(2,"mat-icon",25),e._uU(3,"hourglass_bottom"),e.qZA()),2&t){const n=e.oxw().ngIf;e.xp6(1),e.AsE(" Uploading: ",n.uploadings.length," / ",n.total.length," ")}}function Zn(t,o){if(1&t&&(e.ynx(0),e.YNc(1,Cn,6,2,"ng-container",0),e.ALo(2,"async"),e.YNc(3,bn,4,2,"ng-template",null,21,e.W1O),e.BQk()),2&t){const n=e.MAs(4),i=e.oxw(4);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,i.fs.isFilesUploadFinished$))("ngIfElse",n)}}function Sn(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div",26),e._UZ(2,"app-upload-item",27),e.qZA(),e.BQk()),2&t){const n=o.$implicit;e.xp6(2),e.Q6J("file",n)}}function In(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div",15)(2,"div",17)(3,"div",18),e.YNc(4,Zn,5,4,"ng-container",7),e.ALo(5,"async"),e.qZA()(),e.TgZ(6,"section",19),e.YNc(7,Sn,3,1,"ng-container",20),e.qZA()(),e.BQk()),2&t){const n=e.oxw().ngIf,i=e.oxw(2);e.xp6(4),e.Q6J("ngIf",e.lcZ(5,3,i.fs.uploadingsAndTotalFiles$)),e.xp6(3),e.Q6J("ngForOf",n)("ngForTrackBy",i.trackById)}}function Fn(t,o){if(1&t&&(e.ynx(0),e.YNc(1,In,8,5,"ng-container",7),e.BQk()),2&t){const n=o.ngIf;e.xp6(1),e.Q6J("ngIf",n.length>0)}}function Mn(t,o){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",2)(2,"div",3)(3,"div",4),e._uU(4," Upload "),e.qZA(),e._UZ(5,"hr",5),e.TgZ(6,"div",6),e.YNc(7,Pn,2,0,"ng-container",7),e.ALo(8,"async"),e.qZA()()(),e.TgZ(9,"div",8)(10,"input",9,10),e.NdJ("change",function(a){return e.CHM(n),e.oxw().onFileInputClick(a)}),e.qZA()(),e.TgZ(12,"div",11)(13,"div",12),e.NdJ("click",function(){return e.CHM(n),e.oxw().onFileUpload()}),e.TgZ(14,"div",13),e._uU(15," Select items to upload "),e.qZA(),e.TgZ(16,"div")(17,"button",14),e.ALo(18,"async"),e.TgZ(19,"mat-icon"),e._uU(20,"add"),e.qZA()()()(),e.YNc(21,Fn,2,1,"ng-container",7),e.ALo(22,"async"),e.TgZ(23,"div",15),e._UZ(24,"app-main-welcome",16),e.ALo(25,"async"),e.qZA()(),e.BQk()}if(2&t){const n=e.oxw();e.xp6(7),e.Q6J("ngIf",e.lcZ(8,4,n.fs.userFileApiWorking$)),e.xp6(10),e.Q6J("disabled",!e.lcZ(18,6,n.as.currentUser$)),e.xp6(4),e.Q6J("ngIf",e.lcZ(22,8,n.fs.filesUploadingAll$)),e.xp6(3),e.Q6J("currentUser",e.lcZ(25,10,n.as.currentUser$))}}function Dn(t,o){1&t&&(e.TgZ(0,"div",15),e._UZ(1,"app-shared-loading"),e.qZA())}let wn=(()=>{class t{constructor(n,i,a,s,c){this.fs=n,this.rs=i,this.as=a,this.ts=s,this.pss=c}ngOnInit(){}onFileUpload(){var n;const i=null===(n=this.uploadInput)||void 0===n?void 0:n.nativeElement;i&&this.as.currentUser$.pipe((0,z.q)(1)).subscribe(a=>{a?i.click():this.ts.openSingletonToast("warning","You are not logged in.")})}onFileInputClick(n){var i;const a=null===(i=n.target)||void 0===i?void 0:i.files;a&&Object.keys(a).forEach(c=>{this.fs.attachFile(a[c],(new Date).getTime()+c+"")})}trackById(n,i){return i.id}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(H),e.Y36(ae),e.Y36(X.e),e.Y36(Fe.q),e.Y36(ge))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-main-all"]],viewQuery:function(n,i){if(1&n&&e.Gf(Ln,5),2&n){let a;e.iGM(a=e.CRH())&&(i.uploadInput=a.first)}},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""],["fxLayout","column","fxLayoutAlign","start center",1,"w-100"],[1,"title","quicksand","fw-500","w-100"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","5px"],[1,"w-100","part-loading"],[1,"w-100","api-loading","mb-10"],[4,"ngIf"],[1,""],["type","file","multiple","",1,"upload-input",3,"change"],["uploadInput",""],["fxLayout","column","fxLayoutAlign","start center","fxLayoutGap","30px",1,"w-100"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","15px",1,"quicksand","upload-action",3,"click"],[1,"text"],["mat-fab","","color","primary","aria-label","Upload files",3,"disabled"],[1,"w-100"],[3,"currentUser"],[1,"uploading-title","quicksand","fw-500"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","5px",1,""],["fxLayout","row wrap","fxLayoutAlign","start center","fxLayoutGap","15px",1,"w-100"],[4,"ngFor","ngForOf","ngForTrackBy"],["uploading",""],[1,"bb-1"],["fxLayout","column","fxLayoutAlign","center center",1,""],[1,"text-success"],[1,"text-primary"],["fxFlex.gt-sm","23","fxFlex","100"],[3,"file"]],template:function(n,i){if(1&n&&(e.YNc(0,Mn,26,12,"ng-container",0),e.ALo(1,"async"),e.YNc(2,Dn,2,0,"ng-template",null,1,e.W1O)),2&n){const a=e.MAs(3);e.Q6J("ngIf",!1===e.lcZ(1,2,i.as.apiLoading$))("ngIfElse",a)}},directives:[T.O5,x.xw,x.Wh,x.SQ,fe,pe.lW,R.Hw,T.sg,x.yH,dn,Tn,we],pipes:[T.Ov],styles:[".upload-action[_ngcontent-%COMP%]{border:1px solid #ccc;padding:5px 25px;border-radius:30px;background-color:#e6f2ff;cursor:pointer}.upload-action[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:20px;color:#5f5dbb}.upload-input[_ngcontent-%COMP%]{display:none;height:0px}.uploading-title[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{font-size:20px}.mb-10[_ngcontent-%COMP%]{margin-bottom:10px}"]}),t})();const ke="filesDisplayTabs",kn=(0,r.ZF)(ke),En=(0,r.P1)(kn,t=>({selectedTabLabel:t.selectedTabLabel,tabs:t.tabs})),Ee=(0,r.PH)("[User Files Display/UI] Set user files display tab id",(0,r.Ky)());let Qn=(()=>{class t{constructor(n){this.store=n,this.getUserDisplayTabs$=this.store.select(En)}setUserFilesDisplayTab(n){this.store.dispatch(Ee({tab:n}))}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(r.yh))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Ne=m(3251);function Bn(t,o){1&t&&(e.ynx(0),e._UZ(1,"shared-loading-bar",8),e.BQk())}function Hn(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"a",11),e.NdJ("click",function(){const s=e.CHM(n).$implicit;return e.oxw(3).onTabClick(s)}),e._uU(1),e.qZA()}if(2&t){const n=o.$implicit,i=e.oxw().ngIf;e.Q6J("active",i.selectedTabLabel===n.label),e.xp6(1),e.hij(" ",n.label," ")}}function Yn(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"nav",9),e.YNc(2,Hn,2,2,"a",10),e.qZA(),e.BQk()),2&t){const n=o.ngIf;e.xp6(1),e.Q6J("disableRipple",!0),e.xp6(1),e.Q6J("ngForOf",n.tabs)}}function Rn(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div",2)(2,"div",3)(3,"div",4)(4,"div"),e._uU(5," My Files "),e.qZA(),e.TgZ(6,"div"),e._uU(7),e.ALo(8,"async"),e.qZA()(),e._UZ(9,"hr",5),e.TgZ(10,"div",6),e.YNc(11,Bn,2,0,"ng-container",7),e.ALo(12,"async"),e.qZA()(),e.YNc(13,Yn,3,2,"ng-container",7),e.ALo(14,"async"),e.qZA(),e.BQk()),2&t){const n=e.oxw();e.xp6(7),e.hij(" (",e.lcZ(8,3,n.fs.userFilesCount$),") "),e.xp6(4),e.Q6J("ngIf",e.lcZ(12,5,n.fs.userFileApiWorking$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(14,7,n.ufds.getUserDisplayTabs$))}}function Gn(t,o){1&t&&(e.TgZ(0,"div",8),e._UZ(1,"app-shared-loading"),e.qZA())}const Wn=[{path:"",component:Ye,children:[{path:"",redirectTo:"upload",pathMatch:"full"},{path:"upload",component:wn,data:{pageTitle:"Upload Files"}},{path:"history",component:(()=>{class t{constructor(n,i,a,s,c){this.fs=n,this.rs=i,this.as=a,this.ts=s,this.ufds=c}ngOnInit(){this.fs.getUserFiles()}onTabClick(n){this.ufds.setUserFilesDisplayTab(n)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(H),e.Y36(ae),e.Y36(X.e),e.Y36(Fe.q),e.Y36(Qn))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-main-history"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""],["fxLayout","column","fxLayoutAlign","start center",1,"w-100"],[1,"title","quicksand","fw-500","w-100"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","5px"],[1,"w-100","part-loading"],[1,"w-100","api-loading","mb-10"],[4,"ngIf"],[1,"w-100"],["mat-tab-nav-bar","","mat-align-tabs","center",1,"w-100",3,"disableRipple"],["mat-tab-link","",3,"active","click",4,"ngFor","ngForOf"],["mat-tab-link","",3,"active","click"]],template:function(n,i){if(1&n&&(e.YNc(0,Rn,15,9,"ng-container",0),e.ALo(1,"async"),e.YNc(2,Gn,2,0,"ng-template",null,1,e.W1O)),2&n){const a=e.MAs(3);e.Q6J("ngIf",!1===e.lcZ(1,2,i.fs.userFilesApiLoading$))("ngIfElse",a)}},directives:[T.O5,x.xw,x.Wh,x.SQ,fe,Ne.BU,T.sg,Ne.Nj,we],pipes:[T.Ov],styles:[".title[_ngcontent-%COMP%]{font-size:20px}.mb-10[_ngcontent-%COMP%]{margin-bottom:10px}"]}),t})(),data:{pageTitle:"My Files"}}]}];let Jn=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[G.Bz.forChild(Wn)],G.Bz]}),t})();var me=m(3900),jn=m(9770),$=m(9646),zn=m(1884),qn=m(6556);let Kn=(()=>{class t{constructor(n,i,a){this.actions$=n,this.us=i,this.as=a,this.getUserFiles$=(0,y.GW)(()=>this.actions$.pipe((0,y.l4)(K,ie),(0,y.IC)(()=>this.as.currentUser$),(0,C.U)(s=>s[1]),(0,me.w)(s=>function $n(t,o,n){return(0,jn.P)(()=>t()?o:n)}(()=>!!s,this.us.getUserPhotos(null==s?void 0:s.email).pipe((0,C.U)(c=>Oe({files:c})),(0,W.K)(c=>(0,$.of)(nt({errMsg:(0,qn.S)(c)})))),(0,$.of)(Le()))))),this.userChange$=(0,y.GW)(()=>this.as.currentUser$.pipe((0,zn.x)((s,c)=>(null==s?void 0:s.email)===(null==c?void 0:c.email)),(0,me.w)(s=>(0,$.of)(K({user:s})))))}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(y.eX),e.LFG(H),e.LFG(X.e))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();var Qe=m(5577),_e=m(8746),he=m(9300),Xn=m(7272);const Vn=[(()=>{class t{constructor(n,i,a){this.actions$=n,this.us=i,this.as=a,this.attachFileForUpload$=(0,y.GW)(()=>this.actions$.pipe((0,y.l4)(Ue),(0,C.U)(s=>q({fileId:s.fileId,file:s.file})))),this.uploadFileStart$=(0,y.GW)(()=>this.actions$.pipe((0,y.l4)(q),(0,Qe.z)(s=>{var c;const U=s.fileId,O=s.file,F=null!==(c=O.name)&&void 0!==c?c:"File-name-"+(new Date).getTime(),S=(new Date).getTime(),b=this.us.uploadFile(O,F);let M=[b.task.percentageChanges().pipe((0,C.U)(L=>({fileId:U,percent:L})),(0,_e.x)(()=>{})),b.ref.getDownloadURL().pipe((0,C.U)(L=>({fileId:U,url:L})),(0,_e.x)(()=>{}))];return(0,Xn.z)(...M).pipe((0,C.U)(L=>{var k;const _=null!==(k=L.percent)&&void 0!==k?k:L.url?100:L.percent;return ne({fileId:U,fileName:F,fileSize:s.file.size,uploadDate:S,downloadUrl:L.url,progress:_})}),(0,W.K)(L=>(console.error("Upload Error!"+L),(0,$.of)(Ae({errMsg:L})))),(0,_e.x)(()=>{}))}))),this.uploadFileFinished$=(0,y.GW)(()=>this.actions$.pipe((0,y.l4)(ne),(0,he.h)(s=>!(!s.downloadUrl||100!==s.progress)),(0,C.U)(s=>te({fileId:s.fileId,fileName:s.fileName,fileSize:s.fileSize,uploadDate:s.uploadDate,downloadUrl:s.downloadUrl})))),this.updateUserPhotoDatabaseAfterUploadSuccess$=(0,y.GW)(()=>this.actions$.pipe((0,y.l4)(te),(0,C.U)(s=>oe({photoData:{id:s.fileId,dateUploaded:s.uploadDate,fileId:s.fileId,fileName:s.fileName,fileSize:s.fileSize,photoUrl:s.downloadUrl}})))),this.updateUserPhotoDatabase$=(0,y.GW)(()=>this.actions$.pipe((0,y.l4)(oe),(0,y.IC)(()=>this.as.currentUser$),(0,he.h)(s=>{var c;return!!(null===(c=s[1])||void 0===c?void 0:c.email)}),(0,Qe.z)(s=>{var c;const U=null===(c=s[1])||void 0===c?void 0:c.email,F=this.us.addPhotoUrl(s[0].photoData,U).operationObs,S=s[0].photoData.id;return F.then(b=>{const M=Object.assign(Object.assign({},s[0].photoData),{id:S});return ie({photoData:M})}).catch(b=>Te({errMsg:b}))})))}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(y.eX),e.LFG(H),e.LFG(X.e))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})()],no=(0,r.Lq)({progressSnackbarDisplay:!1,progressDialogDisplay:!1},(0,r.on)(j,(t,{status:o})=>{let n=!!t.progressDialogDisplay;return!1===o&&(n=!1),Object.assign(Object.assign({},t),{progressSnackbarDisplay:o,progressDialogDisplay:n})}),(0,r.on)(ue,(t,{status:o})=>Object.assign(Object.assign({},t),{progressDialogDisplay:o})),(0,r.on)(Me,t=>Object.assign(Object.assign({},t),{progressDialogDisplay:!1})));var oo=m(8505);const io=[(()=>{class t{constructor(n,i,a,s){this.actions$=n,this.pss=i,this.fs=a,this.pds=s,this.showSnackbarOnFileUploadStart$=(0,y.GW)(()=>this.actions$.pipe((0,y.l4)(q),(0,C.U)(()=>j({status:!0})))),this.toggleProgressSnackbar$=(0,y.GW)(()=>this.actions$.pipe((0,y.l4)(j),(0,oo.b)(c=>{c.status?this.pss.getProgressSnackbar({fileStatus:this.fs.filesUploadingAll$,isFilesUploadFinished:this.fs.isFilesUploadFinished$,uploadingsAndTotalFiles:this.fs.uploadingsAndTotalFiles$}):this.pss.closeProgressSnackbar()})),{dispatch:!1}),this.toggleProgressDialog$=(0,y.GW)(()=>this.actions$.pipe((0,y.l4)(ue),(0,me.w)(c=>c.status?this.pds.openDialog({fileStatus:this.fs.filesUploadingAll$,isFilesUploadFinished:this.fs.isFilesUploadFinished$,uploadingsAndTotalFiles:this.fs.uploadingsAndTotalFiles$}).afterClosed().pipe((0,C.U)(O=>O)):(this.pds.closeDialog(),(0,$.of)(!1))),(0,he.h)(c=>!1!==c),(0,C.U)(c=>{const U=c?JSON.parse(JSON.stringify(c)):void 0;return(null==U?void 0:U.action)===Y.CLOSE?j({status:!1}):Me()})))}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(y.eX),e.LFG(ge),e.LFG(H),e.LFG(De))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})()];let so=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[],imports:[[xe.n]]}),t})();const ro=(0,r.Lq)({tabs:[{label:"Table",url:"table"},{label:"Galleria",url:"galleria"}],selectedTabId:0,selectedTabLabel:"Table"},(0,r.on)(Ee,(t,{tab:o})=>Object.assign(Object.assign({},t),{selectedTabLabel:o.label})));let lo=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[],imports:[[xe.n,so,Be.I,He.d,r.Aw.forFeature(Pe,dt),r.Aw.forFeature(Ce,Ut),r.Aw.forFeature("uploadProgressDialogSnackbar",no),r.Aw.forFeature(ke,ro),y.sQ.forFeature(Vn),y.sQ.forFeature([Kn]),y.sQ.forFeature(io),ee.TE,Jn]]}),t})()}}]);