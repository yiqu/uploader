"use strict";(self.webpackChunkuploader=self.webpackChunkuploader||[]).push([[285],{6285:(Qi,De,g)=>{g.r(De),g.d(De,{MainModule:()=>Hi});var ge=g(3271),x=g(6991),r=g(5620),yt=g(61),xt=g(7462),Ee=g(1081),k=g(1402),e=g(5e3),V=g(3702),T=g(9808),ue=g(7579),h=g(7093);let de=(()=>{class t{constructor(){this.wholePage=!1,this.loading=!0,this.logoShakeState=!1,this.compDest$=new ue.x}ngOnChanges(n){this.parentClass=this.wholePage?"whole-page loading-container":"container loading-container mt-5"}ngOnInit(){}ngOnDestroy(){this.compDest$.next(null),this.compDest$.complete()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-shared-loading"]],inputs:{wholePage:"wholePage",message:"message"},features:[e.TTD],decls:12,vars:3,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"w-100"],[1,""],[1,"loading-logo"],["src","assets/img/uploader.png","alt","logo",1,"logo-img","d-inline-block"],[1,"loading-parent"],[1,"lds-facebook"],[1,"secfont"]],template:function(n,i){1&n&&(e.TgZ(0,"div")(1,"div",0)(2,"div",1)(3,"div",2),e._UZ(4,"img",3),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5),e._UZ(7,"div")(8,"div")(9,"div"),e.qZA()(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()()),2&n&&(e.Tol(i.parentClass),e.xp6(11),e.hij(" Loading ",i.message," ... "))},directives:[h.xw,h.Wh],styles:[".loading-logo[_ngcontent-%COMP%]{height:3rem}.loading-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.loading-parent[_ngcontent-%COMP%]{justify-content:center;align-items:center}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.whole-page[_ngcontent-%COMP%]{position:fixed;width:100%}.lds-facebook[_ngcontent-%COMP%]{display:inline-block;position:relative;width:80px;height:80px}.lds-facebook[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;position:absolute;left:8px;width:16px;background:#007bff;animation:lds-facebook 1.2s cubic-bezier(0,.5,.5,1) infinite}.lds-facebook[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){left:8px;animation-delay:-.24s}.lds-facebook[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){left:32px;animation-delay:-.12s}.lds-facebook[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){left:56px;animation-delay:0}@keyframes lds-facebook{0%{top:8px;height:64px}50%,to{top:24px;height:32px}}"]}),t})();function Tt(t,o){1&t&&(e.ynx(0),e._UZ(1,"router-outlet"),e.BQk())}function bt(t,o){1&t&&(e.TgZ(0,"div",3),e._UZ(1,"app-shared-loading"),e.qZA())}let Ct=(()=>{class t{constructor(n){this.as=n}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(V.e))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-main"]],decls:5,vars:4,consts:[[1,"container-fluid","mb-5","mt-3"],[4,"ngIf","ngIfElse"],["loading",""],[1,"w-100","mt-5"]],template:function(n,i){if(1&n&&(e.TgZ(0,"div",0),e.YNc(1,Tt,2,0,"ng-container",1),e.ALo(2,"async"),e.qZA(),e.YNc(3,bt,2,0,"ng-template",null,2,e.W1O)),2&n){const a=e.MAs(4);e.xp6(1),e.Q6J("ngIf",!1===e.lcZ(2,2,i.as.apiLoading$))("ngIfElse",a)}},directives:[T.O5,k.lC,de],pipes:[T.Ov],styles:[""]}),t})();var K=g(5698);const ke=(0,r.PH)("[Upload/UI] attach a file",(0,r.Ky)()),He=(0,r.PH)("[Upload/UI] Remove all attached files"),re=(0,r.PH)("[Upload/API] Upload file start",(0,r.Ky)()),fe=(0,r.PH)("[Upload/API] Upload file successful",(0,r.Ky)()),Ne=(0,r.PH)("[Upload/API] Upload file failed",(0,r.Ky)()),me=(0,r.PH)("[Upload/API] Upload file progress update",(0,r.Ky)()),_e=(0,r.PH)("[Upload/API] Update new photo in user DB start",(0,r.Ky)()),he=(0,r.PH)("[Upload/API] Update new photo in user DB successful",(0,r.Ky)()),Qe=(0,r.PH)("[Upload/API] Update new photo in user DB failed",(0,r.Ky)()),le=(0,r.PH)("[Upload/API] Get user files start",(0,r.Ky)()),Re=(0,r.PH)("[Upload/API] Get user files successful",(0,r.Ky)()),Et=(0,r.PH)("[Upload/API] Get user files failed",(0,r.Ky)()),Be=(0,r.PH)("[Upload/API] User is not logged in to fetch files"),Ye="uploadFiles",Ge="userFiles";var D=(()=>{return(t=D||(D={})).ADD="add",t.REMOVE="remove",D;var t})(),f=(()=>{return(t=f||(f={}))[t.EntitiesOnly=0]="EntitiesOnly",t[t.Both=1]="Both",t[t.None=2]="None",f;var t})();function C(t){return function(n,i){const a={ids:[...i.ids],entities:Object.assign({},i.entities)},s=t(n,a);return s===f.Both?Object.assign({},i,a):s===f.EntitiesOnly?Object.assign(Object.assign({},i),{entities:a.entities}):i}}function E(t,o){const n=o(t);return(0,e.X6Q)()&&void 0===n&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",t,"The `selectId` implementation:",o.toString()),n}function Je(t){function o(_,u){const p=E(_,t);return p in u.entities?f.None:(u.ids.push(p),u.entities[p]=_,f.Both)}function n(_,u){let p=!1;for(const c of _)p=o(c,u)!==f.None||p;return p?f.Both:f.None}function a(_,u){const p=E(_,t);return p in u.entities?(u.entities[p]=_,f.EntitiesOnly):(u.ids.push(p),u.entities[p]=_,f.Both)}function y(_,u){const c=(_ instanceof Array?_:u.ids.filter(d=>_(u.entities[d]))).filter(d=>d in u.entities).map(d=>delete u.entities[d]).length>0;return c&&(u.ids=u.ids.filter(d=>d in u.entities)),c?f.Both:f.None}function Z(_,u){return L([_],u)}function L(_,u){const p={};return(_=_.filter(d=>d.id in u.entities)).length>0?_.filter(m=>function S(_,u,p){const d=Object.assign({},p.entities[u.id],u.changes),m=E(d,t),b=m!==u.id;return b&&(_[u.id]=m,delete p.entities[u.id]),p.entities[m]=d,b}(p,m,u)).length>0?(u.ids=u.ids.map(m=>p[m]||m),f.Both):f.EntitiesOnly:f.None}function Q(_,u){const p=[],c=[];for(const b of _){const O=E(b,t);O in u.entities?c.push({id:O,changes:b}):p.push(b)}const d=L(c,u),m=n(p,u);switch(!0){case m===f.None&&d===f.None:return f.None;case m===f.Both||d===f.Both:return f.Both;default:return f.EntitiesOnly}}return{removeAll:function v(_){return Object.assign({},_,{ids:[],entities:{}})},addOne:C(o),addMany:C(n),setAll:C(function i(_,u){return u.ids=[],u.entities={},n(_,u),f.Both}),setOne:C(a),setMany:C(function s(_,u){const p=_.map(c=>a(c,u));switch(!0){case p.some(c=>c===f.Both):return f.Both;case p.some(c=>c===f.EntitiesOnly):return f.EntitiesOnly;default:return f.None}}),updateOne:C(Z),updateMany:C(L),upsertOne:C(function A(_,u){return Q([_],u)}),upsertMany:C(Q),removeOne:C(function l(_,u){return y([_],u)}),removeMany:C(y),map:C(function F(_,u){return L(u.ids.reduce((d,m)=>{const b=_(u.entities[m]);return b!==u.entities[m]&&d.push({id:m,changes:b}),d},[]).filter(({id:d})=>d in u.entities),u)}),mapOne:C(function pe({map:_,id:u},p){const c=p.entities[u];return c?Z({id:u,changes:_(c)},p):f.None})}}function ye(t={}){var o,n;const{selectId:i,sortComparer:a}={selectId:null!==(o=t.selectId)&&void 0!==o?o:v=>v.id,sortComparer:null!==(n=t.sortComparer)&&void 0!==n&&n},s=function Ht(){return{getInitialState:function t(o={}){return Object.assign({ids:[],entities:{}},o)}}}(),l=function Nt(){return{getSelectors:function t(o){const n=l=>l.ids,i=l=>l.entities,a=(0,r.P1)(n,i,(l,y)=>l.map(v=>y[v])),s=(0,r.P1)(n,l=>l.length);return o?{selectIds:(0,r.P1)(o,n),selectEntities:(0,r.P1)(o,i),selectAll:(0,r.P1)(o,a),selectTotal:(0,r.P1)(o,s)}:{selectIds:n,selectEntities:i,selectAll:a,selectTotal:s}}}}(),y=a?function Qt(t,o){const{removeOne:n,removeMany:i,removeAll:a}=Je(t);function s(p,c){return l([p],c)}function l(p,c){const d=p.filter(m=>!(E(m,t)in c.entities));return 0===d.length?f.None:(u(d,c),f.Both)}function v(p,c){const d=E(p,t);return d in c.entities?(c.ids=c.ids.filter(m=>m!==d),u([p],c),f.Both):s(p,c)}function Z(p,c){return F([p],c)}function F(p,c){const d=[],m=p.filter(b=>function L(p,c,d){if(!(c.id in d.entities))return!1;const b=Object.assign({},d.entities[c.id],c.changes),O=E(b,t);return delete d.entities[c.id],p.push(b),O!==c.id}(d,b,c)).length>0;if(0===d.length)return f.None;{const b=c.ids,O=[];return c.ids=c.ids.filter((M,J)=>M in c.entities||(O.push(J),!1)),u(d,c),!m&&O.every(M=>c.ids[M]===b[M])?f.EntitiesOnly:f.Both}}function _(p,c){const d=[],m=[];for(const M of p){const J=E(M,t);J in c.entities?m.push({id:J,changes:M}):d.push(M)}const b=F(m,c),O=l(d,c);switch(!0){case O===f.None&&b===f.None:return f.None;case O===f.Both||b===f.Both:return f.Both;default:return f.EntitiesOnly}}function u(p,c){p.sort(o);const d=[];let m=0,b=0;for(;m<p.length&&b<c.ids.length;){const O=p[m],M=E(O,t),J=c.ids[b];o(O,c.entities[J])<=0?(d.push(M),m++):(d.push(J),b++)}c.ids=d.concat(m<p.length?p.slice(m).map(t):c.ids.slice(b)),p.forEach((O,M)=>{c.entities[t(O)]=O})}return{removeOne:n,removeMany:i,removeAll:a,addOne:C(s),updateOne:C(Z),upsertOne:C(function Q(p,c){return _([p],c)}),setAll:C(function y(p,c){return c.entities={},c.ids=[],l(p,c),f.Both}),setOne:C(v),setMany:C(function S(p,c){const d=p.map(m=>v(m,c));switch(!0){case d.some(m=>m===f.Both):return f.Both;case d.some(m=>m===f.EntitiesOnly):return f.EntitiesOnly;default:return f.None}}),addMany:C(l),updateMany:C(F),upsertMany:C(_),map:C(function pe(p,c){return F(c.ids.reduce((m,b)=>{const O=p(c.entities[b]);return O!==c.entities[b]&&m.push({id:b,changes:O}),m},[]),c)}),mapOne:C(function A({map:p,id:c},d){const m=d.entities[c];return m?Z({id:c,changes:p(m)},d):f.None})}}(i,a):Je(i);return Object.assign(Object.assign(Object.assign({selectId:i,sortComparer:a},s),l),y)}const w=ye({selectId:function Rt(t){return t.id},sortComparer:function Bt(t,o){return t.attachDate&&o.attachDate?t.attachDate<o.attachDate?1:-1:1}}),Yt=w.getInitialState({apiWorking:!1,filesUploadedAndUrlAddedToDb:[],errMsg:void 0,error:!1}),Gt=(0,r.Lq)(Yt,(0,r.on)(He,t=>w.removeAll(Object.assign(Object.assign({},t),{apiWorking:!1,error:!1,errMsg:void 0,filesUploadedAndUrlAddedToDb:[]}))),(0,r.on)(re,(t,{file:o,fileId:n})=>{const i={attachDate:(new Date).getTime(),dateModified:o.lastModified,file:o,fileName:o.name,fileSize:o.size,id:n,completed:!1,progress:0,downloadUrl:void 0};return w.addOne(i,Object.assign(Object.assign({},t),{apiWorking:!0}))}),(0,r.on)(me,(t,{fileId:o,progress:n,downloadUrl:i})=>{var a,s;const l={id:o,changes:{progress:null!=n?n:null===(a=t.entities[o])||void 0===a?void 0:a.progress,downloadUrl:null!=i?i:null===(s=t.entities[o])||void 0===s?void 0:s.downloadUrl}};return w.updateOne(l,Object.assign(Object.assign({},t),{apiWorking:!0}))}),(0,r.on)(fe,(t,{fileId:o})=>{const n={id:o,changes:{completed:!0,completedDate:(new Date).getTime()}};return w.updateOne(n,Object.assign(Object.assign({},t),{apiWorking:!1}))}),(0,r.on)(Ne,(t,{errMsg:o})=>Object.assign(Object.assign({},t),{apiWorking:!1,error:!0,errMsg:o})),(0,r.on)(_e,(t,{photoData:o})=>w.updateOne({id:o.id,changes:{urlUploaded:!1}},Object.assign(Object.assign({},t),{apiWorking:!0}))),(0,r.on)(he,(t,{photoData:o})=>{var n;const i={id:o.id,changes:{urlUploaded:!0}},a=[...null!==(n=t.filesUploadedAndUrlAddedToDb)&&void 0!==n?n:[]];return a.push(o),w.updateOne(i,Object.assign(Object.assign({},t),{apiWorking:!1,filesUploadedAndUrlAddedToDb:a}))}),(0,r.on)(Qe,(t,{errMsg:o})=>Object.assign(Object.assign({},t),{apiWorking:!1,error:!0,errMsg:o})));function Jt(t,o){return Gt(t,o)}const $=(0,r.ZF)(Ye),$e=((0,r.P1)($,w.getSelectors().selectIds),(0,r.P1)($,w.getSelectors().selectEntities),(0,r.P1)($,w.getSelectors().selectAll)),$t=(0,r.P1)($,w.getSelectors().selectTotal),jt=(0,r.P1)($,t=>t.apiWorking),xe=(0,r.P1)($,t=>t.filesUploadedAndUrlAddedToDb),Wt=(0,r.P1)($t,xe,(t,o)=>t===o.length),qt=(0,r.P1)($e,xe,(t,o)=>({total:t,uploadings:o})),R=ye({selectId:function zt(t){return t.id},sortComparer:function Vt(t,o){return t.dateUploaded&&o.dateUploaded?t.dateUploaded<o.dateUploaded?1:-1:1}}),Kt=R.getInitialState({apiWorking:!1,firstTimeLoading:!0,errMsg:void 0,error:!1}),Xt=(0,r.Lq)(Kt,(0,r.on)(le,t=>Object.assign(Object.assign({},t),{apiWorking:!0})),(0,r.on)(Re,(t,{files:o})=>R.setAll(o,Object.assign(Object.assign({},t),{apiWorking:!1,firstTimeLoading:!1}))),(0,r.on)(Be,t=>R.removeAll(Object.assign(Object.assign({},t),{apiWorking:!1}))));function en(t,o){return Xt(t,o)}var tn=g(5839);const je="filesDisplayTabs",X=(0,r.ZF)(je),nn=(0,r.P1)(X,t=>({selectedTabLabel:t.selectedTabLabel,tabs:t.tabs})),on=(0,r.P1)(X,t=>t.tabs),We=(0,r.P1)(X,t=>t.pagination),an=(0,r.P1)(X,t=>t.tableSearchTerm),sn=(0,r.P1)(X,t=>t.galleriaIndex),B=(0,r.ZF)(Ge),qe=((0,r.P1)(B,R.getSelectors().selectIds),(0,r.P1)(B,R.getSelectors().selectEntities),(0,r.P1)(B,R.getSelectors().selectAll)),rn=(0,r.P1)(B,R.getSelectors().selectTotal),ln=(0,r.P1)(B,t=>t.firstTimeLoading),ze=(0,r.P1)(B,tn.t0,ln,(t,o,n)=>(t.apiWorking||!!o)&&n),cn=(0,r.P1)(B,t=>t.apiWorking),pn=(0,r.P1)(qe,t=>{if(t&&t.length>0){const o=[...t];return o.sort((i,a)=>i.dateUploaded>a.dateUploaded?-1:1),o.slice(0,5)}return[]}),Te=(0,r.P1)(qe,an,(t,o)=>{if(o){let n=[...t];return n=n.filter(i=>(i.fileName+i.id+i.dateUploaded+"").includes(o)),n}return t}),gn=(0,r.P1)(We,Te,(t,o)=>{const n=Math.ceil(o.length/30);return Object.assign(Object.assign({},t),{totalPages:n,totalCount:o.length})}),Ve=(0,r.P1)(ze,We,Te,(t,o,n)=>{let a=[...n];const s=30*o.currentPage;return a=a.slice(s,s+30),{apiLoading:t,columnData:a,columnIds:["fileName","photoUrl","fileSize","dateUploaded"]}});var un=g(5439);let be=(()=>{class t{constructor(n){this.storage=n}uploadBlob(n,i){const a="uploader-app/"+this.getCurrentTime()+"/"+i,s=this.storage.ref(a),l=s.put(n);return{ref:s,task:l}}getCurrentTime(){return un().format("MM-DD-YYYY")}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(ge.Q1))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var P=g(5265),Ce=g(2843),U=g(4004),ee=g(262);let fn=(()=>{class t{constructor(n,i){this.firestore=n,this.storage=i}createDocument(n,i){const a=(0,P.JU)(this.firestore,"uploader/"+i);return(0,P.pl)(a,n)}updateDocument(n){if(n){const i=(0,P.JU)(this.firestore,"uploader/");return(0,P.r7)(i,{amount:n})}return Promise.resolve()}addDocumentToCollection(n,i){const a=(0,P.JU)((0,P.hJ)(this.firestore,"uploader/"+i)),s=a.id,l=Object.assign(Object.assign({},n),{id:s});return{operationObs:(0,P.pl)(a,l),id:s}}getDocument(n){const i=(0,P.JU)(this.firestore,"uploader/"+n);return(0,P.KO)(i).pipe((0,K.q)(1),(0,U.U)(a=>a.data()),(0,ee.K)(a=>(console.error(a),(0,Ce._)(()=>{const s=new Error(a);return s.timestamp=Date.now(),s}))))}getDataByCollectionName(n){const i=(0,P.hJ)(this.firestore,"uploader/");return(0,P.$k)(i).pipe((0,K.q)(1),(0,ee.K)(a=>(console.error(a),(0,Ce._)(()=>{const s=new Error(a);return s.timestamp=Date.now(),s}))),(0,U.U)(a=>a.map(s=>{const l=s.data();return Object.assign({id:s.id},l)})))}getCollection(n){const i=(0,P.hJ)(this.firestore,"uploader/"+n);return(0,P.$k)(i).pipe((0,K.q)(1),(0,ee.K)(a=>(console.error(a),(0,Ce._)(()=>{const s=new Error(a);return s.timestamp=Date.now(),s}))),(0,U.U)(a=>a.map(s=>{const l=s.data();return Object.assign({},l)})))}uploadBlob(n){return this.storage.ref("folder-1").put(n)}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(P.gg),e.LFG(ge.Q1))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),H=(()=>{class t{constructor(n,i,a){this.store=n,this.ss=i,this.rs=a,this.filesUploadingAll$=this.store.select($e),this.anyFilesUploading$=this.store.select(jt),this.filesUploaded$=this.store.select(xe),this.isFilesUploadFinished$=this.store.select(Wt),this.uploadingsAndTotalFiles$=this.store.select(qt),this.userFilesApiLoading$=this.store.select(ze),this.userFileApiWorking$=this.store.select(cn),this.userFilesCount$=this.store.select(rn),this.userRecentUploads$=this.store.select(pn),this.getFilesAll$=this.store.select(Te),this.getFilesTableData$=this.store.select(Ve)}attachFile(n,i){this.store.dispatch(ke({file:n,fileId:i}))}cleanUpAttachedFiles(){this.store.dispatch(He())}uploadFile(n,i){return this.ss.uploadBlob(n,i)}addPhotoUrl(n,i){return this.rs.addDocumentToCollection(n,i+"/photos")}getUserPhotos(n){return this.rs.getCollection(n+"/photos")}getUserFiles(){return this.store.dispatch(le({user:void 0}))}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(r.yh),e.LFG(be),e.LFG(fn))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Ke=g(3003),ve=g(7261),Oe=g(8966),j=(()=>{return(t=j||(j={})).MINIMIZE="minimize",t.MAXIMIZE="maximize",t.CLOSE="close",j;var t})(),te=g(7423),Y=g(5245),Xe=g(655),et=g(8603);class G{transform(o,n){if(o){let i=o.slice(0,n);return n>=o.length?o:i+".."}return o+""}}G.\u0275fac=function(o){return new(o||G)},G.\u0275pipe=e.Yjl({name:"stringSliceCutoff",type:G,pure:!0}),(0,Xe.gn)([(0,et.Z)()],G.prototype,"transform",null);var Ue=g(4836),W=g(837);function mn(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div",10),e._uU(2),e.qZA(),e.TgZ(3,"div",11)(4,"mat-icon",12),e._uU(5,"task_alt"),e.qZA()(),e.BQk()),2&t){const n=e.oxw().ngIf;e.xp6(2),e.AsE(" ",n.uploadings.length," / ",n.total.length," files uploaded ")}}function _n(t,o){if(1&t&&(e.TgZ(0,"div",10),e._uU(1),e.qZA(),e.TgZ(2,"mat-icon",13),e._uU(3,"hourglass_bottom"),e.qZA()),2&t){const n=e.oxw().ngIf;e.xp6(1),e.AsE(" Uploading: ",n.uploadings.length," / ",n.total.length," ")}}function hn(t,o){if(1&t&&(e.ynx(0),e.YNc(1,mn,6,2,"ng-container",6),e.ALo(2,"async"),e.YNc(3,_n,4,2,"ng-template",null,9,e.W1O),e.BQk()),2&t){const n=e.MAs(4),i=e.oxw(3);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,i.data.isFilesUploadFinished))("ngIfElse",n)}}function yn(t,o){if(1&t&&(e.ynx(0),e._UZ(1,"img",23),e.BQk()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.Q6J("src",null==n?null:n.downloadUrl,e.LSH)}}function xn(t,o){1&t&&(e.TgZ(0,"div",24)(1,"mat-icon",25),e._uU(2," cloud_upload "),e.qZA()())}function Tn(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div",15)(2,"div"),e.YNc(3,yn,2,1,"ng-container",6),e.YNc(4,xn,3,0,"ng-template",null,16,e.W1O),e.qZA(),e.TgZ(6,"div",17)(7,"div",18)(8,"a",19),e._uU(9),e.ALo(10,"stringSliceCutoff"),e.qZA(),e.TgZ(11,"div",20),e._uU(12),e.qZA()(),e.TgZ(13,"div",21)(14,"div"),e._uU(15),e.ALo(16,"fileSizeDisplay"),e.qZA(),e.TgZ(17,"div",22),e.ALo(18,"dateDisplay"),e._uU(19),e.ALo(20,"dateFromNow"),e.qZA()()()(),e.BQk()),2&t){const n=o.$implicit,i=e.MAs(5);e.xp6(3),e.Q6J("ngIf",null==n?null:n.downloadUrl)("ngIfElse",i),e.xp6(4),e.Q6J("title",null==n?null:n.fileName),e.xp6(1),e.Q6J("href",null==n?null:n.downloadUrl,e.LSH),e.xp6(1),e.hij(" ",e.xi3(10,9,null==n?null:n.fileName,25)," - "),e.xp6(3),e.hij(" ",n.progress,"% "),e.xp6(3),e.hij(" ",e.lcZ(16,12,null==n?null:n.fileSize)," - "),e.xp6(2),e.Q6J("title",e.xi3(18,14,null==n?null:n.attachDate,"FULLDATE")),e.xp6(2),e.hij(" ",e.lcZ(20,17,null==n?null:n.attachDate)," ")}}function bn(t,o){if(1&t&&(e.ynx(0),e.YNc(1,Tn,21,19,"ng-container",14),e.BQk()),2&t){const n=o.ngIf;e.xp6(1),e.Q6J("ngForOf",n)}}function Cn(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div",7),e.YNc(2,hn,5,4,"ng-container",4),e.ALo(3,"async"),e.qZA(),e.TgZ(4,"div",8),e.YNc(5,bn,2,1,"ng-container",4),e.ALo(6,"async"),e.qZA(),e.BQk()),2&t){const n=e.oxw(2);e.xp6(2),e.Q6J("ngIf",e.lcZ(3,2,n.data.uploadingsAndTotalFiles)),e.xp6(3),e.Q6J("ngIf",e.lcZ(6,4,n.data.fileStatus))}}function vn(t,o){if(1&t&&(e.ynx(0),e.YNc(1,Cn,7,6,"ng-container",6),e.BQk()),2&t){const n=o.ngIf;e.oxw();const i=e.MAs(16);e.xp6(1),e.Q6J("ngIf",n.length>0)("ngIfElse",i)}}function On(t,o){1&t&&(e.TgZ(0,"div",26),e._uU(1," Upload queue is empty. "),e.qZA())}let Un=(()=>{class t{constructor(n,i){this.dialogRef=n,this.data=i,this.minimize=j.MINIMIZE,this.close=j.CLOSE}ngOnInit(){}onDialogClose(n){this.dialogRef.close({action:n})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(Oe.so),e.Y36(Oe.WI))},t.\u0275cmp=e.Xpm({type:t,selectors:[["progress-dialog-display"]],decls:17,vars:3,consts:[["fxLayout","column","fxLayoutAlign","start center","fxLayoutGap","0px"],["fxLayout","row","fxLayoutAlign","space-between center",1,"title","quicksand","fw-500","w-100"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","1px"],["mat-icon-button","",3,"click"],[4,"ngIf"],["nothingUploading",""],[4,"ngIf","ngIfElse"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"content","w-100","bb-1"],["fxLayout","column","fxLayoutAlign","start center","fxLayoutGap","10px",1,"content","w-100"],["uploading",""],[1,""],["fxLayout","column","fxLayoutAlign","center center",1,""],[1,"text-success"],[1,"text-primary"],[4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","15px",1,"w-100"],["imgPlaceholder",""],["fxLayout","column","fxLayoutAlign","center start","fxLayoutGap","5px"],["fxLayout","row","fxLayoutAlign","start start","fxLayoutGap","5px",3,"title"],["target","_blank","rel","noopener noreferrer",1,"stateful",3,"href"],[1,"fw-500","percent"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","5px",1,"meta"],[1,"date",3,"title"],["alt","Photo img","width","50","height","50",3,"src"],["fxLayout","column","fxLayoutAlign","center center",1,"pic-progress-parent"],[1,"pic-progress"],["fxLayout","row","fxLayoutAlign","start center",1,"content","w-100"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div"),e._uU(3," Upload Progress "),e.qZA(),e.TgZ(4,"div",2)(5,"div")(6,"button",3),e.NdJ("click",function(){return i.onDialogClose(i.minimize)}),e.TgZ(7,"mat-icon"),e._uU(8,"minimize"),e.qZA()()(),e.TgZ(9,"div")(10,"button",3),e.NdJ("click",function(){return i.onDialogClose(i.close)}),e.TgZ(11,"mat-icon"),e._uU(12,"close"),e.qZA()()()()(),e.YNc(13,vn,2,2,"ng-container",4),e.ALo(14,"async"),e.qZA(),e.YNc(15,On,2,0,"ng-template",null,5,e.W1O)),2&n&&(e.xp6(13),e.Q6J("ngIf",e.lcZ(14,1,i.data.fileStatus)))},directives:[h.xw,h.Wh,h.SQ,te.lW,Y.Hw,T.O5,T.sg],pipes:[T.Ov,G,Ue.nV,W.o,W.G],styles:[".title[_ngcontent-%COMP%]{background-color:#2a2961;color:#fff;padding:20px}.content[_ngcontent-%COMP%]{padding:15px}.content[_ngcontent-%COMP%]   .percent[_ngcontent-%COMP%]{color:#093}.content[_ngcontent-%COMP%]   .pic-progress-parent[_ngcontent-%COMP%]{width:50px;height:50px}.content[_ngcontent-%COMP%]   mat-icon.pic-progress[_ngcontent-%COMP%]{color:#517e5d}"]}),t})();const ne=(0,r.PH)("[Progress Display/UI] Toggle upload progress snackbar",(0,r.Ky)()),Ae=(0,r.PH)("[Progress Display/UI] Toggle upload progress dialog",(0,r.Ky)()),tt=(0,r.PH)("[Progress Display/UI] Closed dialog via minimize or click out");let nt=(()=>{class t{constructor(n,i){this.dialog=n,this.store=i}openDialog(n){var i;return null===(i=this.displayRef)||void 0===i||i.close(),this.displayRef=this.dialog.open(Un,{minWidth:"calc(100% - 50rem)",height:"calc(100% - 10rem)",panelClass:"progress-dialog-display",data:n,autoFocus:!1}),this.displayRef}closeDialog(){var n;null===(n=this.displayRef)||void 0===n||n.close()}dispatchToggleDialog(n){this.store.dispatch(Ae({status:n}))}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(Oe.uw),e.LFG(r.yh))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Ln(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div",8),e._uU(2),e.qZA(),e.TgZ(3,"div",9)(4,"mat-icon",10),e._uU(5,"task_alt"),e.qZA()(),e.BQk()),2&t){const n=e.oxw(2).ngIf;e.xp6(2),e.AsE(" ",n.uploadings.length," / ",n.total.length," files uploaded ")}}function wn(t,o){if(1&t&&(e.TgZ(0,"div",8),e._uU(1),e.qZA(),e.TgZ(2,"mat-icon",11),e._uU(3,"hourglass_bottom"),e.qZA()),2&t){const n=e.oxw(2).ngIf;e.xp6(1),e.AsE(" Uploading: ",n.uploadings.length," / ",n.total.length," ")}}function In(t,o){if(1&t&&(e.ynx(0),e.YNc(1,Ln,6,2,"ng-container",5),e.ALo(2,"async"),e.YNc(3,wn,4,2,"ng-template",null,7,e.W1O),e.BQk()),2&t){const n=e.MAs(4),i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,i.data.isFilesUploadFinished))("ngIfElse",n)}}function Zn(t,o){1&t&&e._uU(0," Upload queue is empty. ")}function Mn(t,o){if(1&t&&(e.ynx(0),e.YNc(1,In,5,4,"ng-container",5),e.YNc(2,Zn,1,0,"ng-template",null,6,e.W1O),e.BQk()),2&t){const n=o.ngIf,i=e.MAs(3);e.xp6(1),e.Q6J("ngIf",n.total.length>0)("ngIfElse",i)}}let Fn=(()=>{class t{constructor(n,i,a,s){this.data=n,this.progressRef=i,this.ps=a,this.ds=s}ngOnInit(){}onMaximizeClick(){this.ds.dispatchToggleDialog(!0)}onCloseSnackbarClick(){this.ps.dispatchToggleSnackbar(!1)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(ve.qD),e.Y36(ve.OX),e.Y36(Pe),e.Y36(nt))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-shared-progress-snackbar"]],decls:13,vars:3,consts:[["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","0px",1,"w-100"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","5px",1,"sb-body",3,"click"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","1px"],["mat-icon-button","",3,"click"],[4,"ngIf","ngIfElse"],["emptyQueue",""],["uploading",""],[1,""],["fxLayout","column","fxLayoutAlign","center center",1,""],[1,"text-success"],[1,"text-primary"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){return i.onMaximizeClick()}),e.YNc(2,Mn,4,2,"ng-container",2),e.ALo(3,"async"),e.qZA(),e.TgZ(4,"div",3)(5,"div")(6,"button",4),e.NdJ("click",function(){return i.onMaximizeClick()}),e.TgZ(7,"mat-icon"),e._uU(8,"maximize"),e.qZA()()(),e.TgZ(9,"div")(10,"button",4),e.NdJ("click",function(){return i.onCloseSnackbarClick()}),e.TgZ(11,"mat-icon"),e._uU(12,"close"),e.qZA()()()()()),2&n&&(e.xp6(2),e.Q6J("ngIf",e.lcZ(3,1,i.data.uploadingsAndTotalFiles)))},directives:[h.xw,h.Wh,h.SQ,T.O5,Y.Hw,te.lW],pipes:[T.Ov],styles:[".sb-body[_ngcontent-%COMP%]{cursor:pointer}"]}),t})(),Pe=(()=>{class t{constructor(n,i){this.snackBar=n,this.store=i,this.defaultHorizontalPosition="center",this.defaultVerticalPosition="bottom"}getProgressSnackbar(n){var i;return null===(i=this.currentSnackbarRef)||void 0===i||i.dismiss(),this.currentSnackbarRef=this.snackBar.openFromComponent(Fn,{horizontalPosition:this.defaultHorizontalPosition,verticalPosition:this.defaultVerticalPosition,duration:0,panelClass:"progress-snackbar",data:n}),this.currentSnackbarRef}closeProgressSnackbar(){var n;null===(n=this.currentSnackbarRef)||void 0===n||n.dismiss()}dispatchToggleSnackbar(n){this.store.dispatch(ne({status:n}))}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(ve.ux),e.LFG(r.yh))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Dn=g(5899);function En(t,o){if(1&t&&(e.ynx(0),e._UZ(1,"mat-progress-bar",3),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("mode",n.mode)}}function kn(t,o){if(1&t&&e._UZ(0,"mat-progress-bar",4),2&t){const n=e.oxw();e.Q6J("mode",n.mode)("value",n.progress)("color",100===n.progress?"primary":"accent")}}let Se=(()=>{class t{constructor(){this.mode="indeterminate"}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["shared-loading-bar"]],inputs:{progress:"progress",mode:"mode"},decls:4,vars:2,consts:[[1,"parent"],[4,"ngIf","ngIfElse"],["nonIndeter",""],["color","primary",3,"mode"],[3,"mode","value","color"]],template:function(n,i){if(1&n&&(e.TgZ(0,"div",0),e.YNc(1,En,2,1,"ng-container",1),e.YNc(2,kn,1,3,"ng-template",null,2,e.W1O),e.qZA()),2&n){const a=e.MAs(3);e.xp6(1),e.Q6J("ngIf","indeterminate"===i.mode)("ngIfElse",a)}},directives:[T.O5,Dn.pW],styles:[".parent[_ngcontent-%COMP%]{height:100%}mat-progress-bar.mat-progress-bar[_ngcontent-%COMP%]{height:100%;border-radius:30px}"]}),t})();function Hn(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div",15)(2,"div"),e._uU(3),e.qZA()(),e.BQk()),2&t){const n=e.oxw(2);e.xp6(3),e.hij(" Uploading ( ",n.file.progress,"% ) ")}}function Nn(t,o){if(1&t&&(e.ynx(0),e._UZ(1,"shared-loading-bar",16),e.BQk()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("progress",n.file.progress)("mode","determinate")}}function Qn(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div",17),e._UZ(2,"img",18),e.qZA(),e.BQk()),2&t){const n=e.oxw(2);e.xp6(2),e.Q6J("src",n.imgPreview,e.LSH)}}function Rn(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"a",19),e._uU(2,"Click here"),e.qZA(),e.BQk()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("href",n.file.downloadUrl,e.LSH)}}function Bn(t,o){1&t&&e._uU(0," Creating URL... ")}function Yn(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div",3)(2,"div",4)(3,"div",5),e.YNc(4,Hn,4,1,"ng-container",6),e.qZA(),e.TgZ(5,"div",7)(6,"div",8),e.YNc(7,Nn,2,2,"ng-container",0),e.qZA()(),e.YNc(8,Qn,3,1,"ng-container",6),e.TgZ(9,"div",9),e._UZ(10,"hr"),e.qZA(),e.TgZ(11,"div",10)(12,"div",11)(13,"div",12),e._uU(14," File Name: "),e.qZA(),e.TgZ(15,"div",13),e._uU(16),e.qZA()(),e.TgZ(17,"div",11)(18,"div",12),e._uU(19," File Size: "),e.qZA(),e.TgZ(20,"div",13),e._uU(21),e.ALo(22,"fileSizeDisplay"),e.qZA()(),e.TgZ(23,"div",11)(24,"div",12),e._uU(25," Date modified: "),e.qZA(),e.TgZ(26,"div"),e._uU(27),e.ALo(28,"dateDisplay"),e.qZA()(),e.TgZ(29,"div",11)(30,"div",12),e._uU(31," Download URL: "),e.qZA(),e.TgZ(32,"div"),e.YNc(33,Rn,3,1,"ng-container",6),e.YNc(34,Bn,1,0,"ng-template",null,14,e.W1O),e.qZA()()()()(),e.BQk()),2&t){const n=e.MAs(35),i=e.oxw(),a=e.MAs(2),s=e.MAs(4);e.xp6(4),e.Q6J("ngIf",i.file.progress<100)("ngIfElse",a),e.xp6(3),e.Q6J("ngIf",i.file.progress),e.xp6(1),e.Q6J("ngIf",i.isImgType)("ngIfElse",s),e.xp6(8),e.hij(" ",i.file.fileName," "),e.xp6(5),e.hij(" ",e.lcZ(22,10,i.file.fileSize)," "),e.xp6(6),e.hij(" ",e.xi3(28,12,i.file.dateModified,"MDY")," "),e.xp6(6),e.Q6J("ngIf",i.file.downloadUrl)("ngIfElse",n)}}function Gn(t,o){1&t&&(e.TgZ(0,"div",15)(1,"div",20)(2,"mat-icon",21),e._uU(3,"check_circle"),e.qZA()(),e.TgZ(4,"div"),e._uU(5," Completed "),e.qZA()())}function Jn(t,o){1&t&&(e.TgZ(0,"div",17)(1,"mat-icon",22),e._uU(2," description "),e.qZA()())}const $n=["image/jpeg","image/png","image/gif"];let jn=(()=>{class t{constructor(){this.isImgType=!1,this.reader=new FileReader}ngOnInit(){}ngOnChanges(n){var i,a,s;this.imgId!==n.file.currentValue.id&&(null===(i=this.file)||void 0===i?void 0:i.file)&&(this.isImgType=!!$n.includes(this.file.file.type),this.reader.onload=l=>this.imgPreview=this.reader.result,this.reader.readAsDataURL(null===(a=this.file)||void 0===a?void 0:a.file)),this.imgId||(this.imgId=null===(s=this.file)||void 0===s?void 0:s.id)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-upload-item"]],inputs:{file:"file"},features:[e.TTD],decls:5,vars:1,consts:[[4,"ngIf"],["finished",""],["notImg",""],[1,"file-parent"],[1,"card"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","10px",1,"loading-status","poppins"],[4,"ngIf","ngIfElse"],["fxLayout","row","fxLayoutAlign","center center"],[1,"progress-parent"],[1,"w-100"],["fxLayout","column","fxLayoutAlign","start start","fxLayoutGap","5px",1,"w-100","poppins","info-parent"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"info-line"],[1,"label"],[1,"value"],["noUrl",""],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","10px"],[3,"progress","mode"],[1,"image-parent"],[1,"preview-img",3,"src"],["target","_blank",3,"href"],["fxLayout","column","fxLayoutAlign","center center"],[1,"done"],["fxLayout","row","fxLayoutAlign","center center",1,"file-icon"]],template:function(n,i){1&n&&(e.YNc(0,Yn,36,15,"ng-container",0),e.YNc(1,Gn,6,0,"ng-template",null,1,e.W1O),e.YNc(3,Jn,3,0,"ng-template",null,2,e.W1O)),2&n&&e.Q6J("ngIf",i.file)},directives:[T.O5,h.xw,h.Wh,h.SQ,Se,Y.Hw],pipes:[Ue.nV,W.o],styles:[".file-parent[_ngcontent-%COMP%]{margin-top:15px}.file-parent[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-top-right-radius:25px;border-top-left-radius:25px;background-color:#ededf7}.file-parent[_ngcontent-%COMP%]   .loading-status[_ngcontent-%COMP%]{font-size:13px;height:2rem}.file-parent[_ngcontent-%COMP%]   .image-parent[_ngcontent-%COMP%]{height:15rem;width:100%;overflow:hidden;text-align:center}.file-parent[_ngcontent-%COMP%]   .image-parent[_ngcontent-%COMP%]   .preview-img[_ngcontent-%COMP%]{height:100%}.file-parent[_ngcontent-%COMP%]   .image-parent[_ngcontent-%COMP%]:hover{overflow:auto}.file-parent[_ngcontent-%COMP%]   .progress-parent[_ngcontent-%COMP%]{height:10px;width:97%;margin-bottom:8px}.file-parent[_ngcontent-%COMP%]   .info-parent[_ngcontent-%COMP%]{padding:0 10px 10px;height:7rem;overflow:hidden;font-size:11px}.file-parent[_ngcontent-%COMP%]   .info-parent[_ngcontent-%COMP%]:hover{overflow:auto}.file-parent[_ngcontent-%COMP%]   .info-line[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500}.file-parent[_ngcontent-%COMP%]   mat-icon.done[_ngcontent-%COMP%]{font-size:18px;color:#093;text-align:center;height:100%}.file-parent[_ngcontent-%COMP%]   mat-icon.progress[_ngcontent-%COMP%]{font-size:18px;color:#b38600;text-align:center;height:100%}.file-parent[_ngcontent-%COMP%]   mat-icon.file-icon[_ngcontent-%COMP%]{font-size:10rem;height:15rem;width:100%;color:#555}"]}),t})(),Wn=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-shared-photo-record-display"]],inputs:{photo:"photo"},decls:16,vars:17,consts:[["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","15px",1,""],["alt","Photo img","width","50","height","50",3,"src"],["fxLayout","column","fxLayoutAlign","center start","fxLayoutGap","5px"],[3,"title"],["target","_blank","rel","noopener noreferrer",1,"stateful",3,"href"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","5px",1,"meta"],[1,"date",3,"title"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div"),e._UZ(2,"img",1),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"a",4),e._uU(6),e.ALo(7,"stringSliceCutoff"),e.qZA()(),e.TgZ(8,"div",5)(9,"div"),e._uU(10),e.ALo(11,"fileSizeDisplay"),e.qZA(),e.TgZ(12,"div",6),e.ALo(13,"dateDisplay"),e._uU(14),e.ALo(15,"dateFromNow"),e.qZA()()()()),2&n&&(e.xp6(2),e.Q6J("src",null==i.photo?null:i.photo.photoUrl,e.LSH),e.xp6(2),e.Q6J("title",null==i.photo?null:i.photo.fileName),e.xp6(1),e.Q6J("href",null==i.photo?null:i.photo.photoUrl,e.LSH),e.xp6(1),e.hij(" ",e.xi3(7,7,null==i.photo?null:i.photo.fileName,25)," "),e.xp6(4),e.hij(" ",e.lcZ(11,10,null==i.photo?null:i.photo.fileSize)," - "),e.xp6(2),e.Q6J("title",e.xi3(13,12,null==i.photo?null:i.photo.dateUploaded,"FULLDATE")),e.xp6(2),e.hij(" ",e.lcZ(15,15,null==i.photo?null:i.photo.dateUploaded)," "))},directives:[h.xw,h.Wh,h.SQ],pipes:[G,Ue.nV,W.o,W.G],styles:[".meta[_ngcontent-%COMP%]{font-size:13px}"]}),t})();function qn(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div"),e._UZ(2,"app-shared-photo-record-display",10),e.qZA(),e.BQk()),2&t){const n=o.$implicit;e.xp6(2),e.Q6J("photo",n)}}const zn=function(){return["../","history"]};function Vn(t,o){if(1&t&&(e.ynx(0),e.YNc(1,qn,3,1,"ng-container",6),e.TgZ(2,"div",7)(3,"a",8)(4,"div",9)(5,"div"),e._uU(6," Go to My Files "),e.qZA()()()(),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.recentUploads),e.xp6(2),e.Q6J("routerLink",e.DdM(2,zn))}}function Kn(t,o){1&t&&(e.ynx(0),e._uU(1," Loading... "),e.BQk())}function Xn(t,o){if(1&t&&(e.TgZ(0,"div",11),e.YNc(1,Kn,2,0,"ng-container",3),e.qZA()),2&t){const n=e.oxw(),i=e.MAs(8);e.xp6(1),e.Q6J("ngIf",n.apiWorking)("ngIfElse",i)}}function eo(t,o){1&t&&(e.TgZ(0,"div"),e._uU(1," You have not uplaoded anything yet. \xaf\\_(\u30c4)_/\xaf "),e.qZA())}let to=(()=>{class t{constructor(){this.recentUploads=[],this.apiWorking=!1}ngOnInit(){}ngOnChanges(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-main-welcome-recent-uploads"]],inputs:{recentUploads:"recentUploads",apiWorking:"apiWorking"},features:[e.TTD],decls:9,vars:2,consts:[["fxLayout","column","fxLayoutAlign","start start","fxLayoutGap","20px"],[1,"poppins","title","bb-1"],["fxLayout","column","fxLayoutGap","5px","fxLayoutAlign","start stretch"],[4,"ngIf","ngIfElse"],["noRecentPhotos",""],["loaded",""],[4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"poppins","mt-2"],[3,"routerLink"],["fxLayout","row","fxLayoutAlign","center center"],[3,"photo"],[1,"poppins","gray-text","empty-text"]],template:function(n,i){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2," Recent uploads: "),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,Vn,7,3,"ng-container",3),e.qZA()(),e.YNc(5,Xn,2,2,"ng-template",null,4,e.W1O),e.YNc(7,eo,2,0,"ng-template",null,5,e.W1O)),2&n){const a=e.MAs(6);e.xp6(4),e.Q6J("ngIf",i.recentUploads&&i.recentUploads.length>0)("ngIfElse",a)}},directives:[h.xw,h.Wh,h.SQ,T.O5,T.sg,Wn,k.yS],styles:[".title[_ngcontent-%COMP%]{font-size:20px}.empty-text[_ngcontent-%COMP%]{font-size:17px}a[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]:hover{text-decoration:none}"],changeDetection:0}),t})();function no(t,o){if(1&t&&(e.ynx(0),e._UZ(1,"app-main-welcome-recent-uploads",2),e.ALo(2,"async"),e.ALo(3,"async"),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("recentUploads",e.lcZ(2,2,n.us.userRecentUploads$))("apiWorking",e.lcZ(3,4,n.us.userFileApiWorking$))}}const oo=function(){return["/","auth","signin"]};function io(t,o){1&t&&(e.TgZ(0,"div",3)(1,"div",4),e._uU(2," Hello! "),e.qZA(),e.TgZ(3,"div",5)(4,"div"),e._UZ(5,"img",6),e.qZA(),e.TgZ(6,"div",7)(7,"mat-icon",8),e._uU(8,"face"),e.qZA()()(),e.TgZ(9,"div",9)(10,"a",10),e._uU(11,"Create a Uploader account to get started."),e.qZA()()()),2&t&&(e.xp6(10),e.Q6J("routerLink",e.DdM(1,oo)))}let ao=(()=>{class t{constructor(n){this.us=n,this.fileList=[]}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(H))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-main-welcome"]],inputs:{currentUser:"currentUser",fileList:"fileList"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noUser",""],[3,"recentUploads","apiWorking"],["fxLayout","column","fxLayoutAlign","start center","fxLayoutGap","20px",1,"no-user"],[1,"poppins","main"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","10px"],["src","assets/img/uploader.png","alt","logo",1,"logo-img"],["fxLayout","row","fxLayoutAlign","center center"],[1,"welcome-icon"],[1,"poppins"],[3,"routerLink"]],template:function(n,i){if(1&n&&(e.YNc(0,no,4,6,"ng-container",0),e.YNc(1,io,12,2,"ng-template",null,1,e.W1O)),2&n){const a=e.MAs(2);e.Q6J("ngIf",i.currentUser)("ngIfElse",a)}},directives:[T.O5,to,h.xw,h.Wh,h.SQ,Y.Hw,k.yS],pipes:[T.Ov],styles:["[_nghost-%COMP%]{width:100%}.no-user[_ngcontent-%COMP%]   .logo-img[_ngcontent-%COMP%]{height:4rem}.no-user[_ngcontent-%COMP%]   .welcome-icon[_ngcontent-%COMP%]{font-size:4.7rem;height:4.7rem;width:4.7rem;color:#5f5dbb}.no-user[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{font-size:32px;color:#5f5dbb}.no-user[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#5f5dbb}.user[_ngcontent-%COMP%]{font-size:20px}.user[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{color:#2a2961}"]}),t})();const so=["uploadInput"];function ro(t,o){1&t&&(e.ynx(0),e._UZ(1,"shared-loading-bar",13),e.BQk())}function lo(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div",21),e._uU(2),e.qZA(),e.TgZ(3,"div",22)(4,"mat-icon",23),e._uU(5,"task_alt"),e.qZA()(),e.BQk()),2&t){const n=e.oxw().ngIf;e.xp6(2),e.AsE(" ",n.uploadings.length," / ",n.total.length," files uploaded ")}}function co(t,o){if(1&t&&(e.TgZ(0,"div",21),e._uU(1),e.qZA(),e.TgZ(2,"mat-icon",24),e._uU(3,"hourglass_bottom"),e.qZA()),2&t){const n=e.oxw().ngIf;e.xp6(1),e.AsE(" Uploading: ",n.uploadings.length," / ",n.total.length," ")}}function po(t,o){if(1&t&&(e.ynx(0),e.YNc(1,lo,6,2,"ng-container",19),e.ALo(2,"async"),e.YNc(3,co,4,2,"ng-template",null,20,e.W1O),e.BQk()),2&t){const n=e.MAs(4),i=e.oxw(3);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,i.fs.isFilesUploadFinished$))("ngIfElse",n)}}function go(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div",25),e._UZ(2,"app-upload-item",26),e.qZA(),e.BQk()),2&t){const n=o.$implicit;e.xp6(2),e.Q6J("file",n)}}function uo(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div",13)(2,"div",15)(3,"div",16),e.YNc(4,po,5,4,"ng-container",5),e.ALo(5,"async"),e.qZA()(),e.TgZ(6,"section",17),e.YNc(7,go,3,1,"ng-container",18),e.qZA()(),e.BQk()),2&t){const n=e.oxw().ngIf,i=e.oxw();e.xp6(4),e.Q6J("ngIf",e.lcZ(5,3,i.fs.uploadingsAndTotalFiles$)),e.xp6(3),e.Q6J("ngForOf",n)("ngForTrackBy",i.trackById)}}function fo(t,o){if(1&t&&(e.ynx(0),e.YNc(1,uo,8,5,"ng-container",5),e.BQk()),2&t){const n=o.ngIf;e.xp6(1),e.Q6J("ngIf",n.length>0)}}let mo=(()=>{class t{constructor(n,i,a,s,l){this.fs=n,this.rs=i,this.as=a,this.ts=s,this.pss=l}ngOnInit(){}onFileUpload(){var n;const i=null===(n=this.uploadInput)||void 0===n?void 0:n.nativeElement;i&&this.as.currentUser$.pipe((0,K.q)(1)).subscribe(a=>{a?i.click():this.ts.openSingletonToast("warning","You are not logged in.")})}onFileInputClick(n){var i;const a=null===(i=n.target)||void 0===i?void 0:i.files;a&&Object.keys(a).forEach(l=>{this.fs.attachFile(a[l],(new Date).getTime()+l+"")})}trackById(n,i){return i.id}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(H),e.Y36(be),e.Y36(V.e),e.Y36(Ke.q),e.Y36(Pe))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-main-all"]],viewQuery:function(n,i){if(1&n&&e.Gf(so,5),2&n){let a;e.iGM(a=e.CRH())&&(i.uploadInput=a.first)}},decls:25,vars:12,consts:[["fxLayout","column","fxLayoutAlign","start center",1,"w-100"],[1,"title","quicksand","fw-500","w-100"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","5px"],[1,"w-100","part-loading"],[1,"w-100","api-loading","mb-10"],[4,"ngIf"],[1,""],["type","file","multiple","",1,"upload-input",3,"change"],["uploadInput",""],["fxLayout","column","fxLayoutAlign","start center","fxLayoutGap","30px",1,"w-100"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","15px",1,"quicksand","upload-action",3,"click"],[1,"text"],["mat-fab","","color","primary","aria-label","Upload files",3,"disabled"],[1,"w-100"],[3,"currentUser"],[1,"uploading-title","quicksand","fw-500"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","5px",1,""],["fxLayout","row wrap","fxLayoutAlign","start center","fxLayoutGap","15px",1,"w-100"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf","ngIfElse"],["uploading",""],[1,"bb-1"],["fxLayout","column","fxLayoutAlign","center center",1,""],[1,"text-success"],[1,"text-primary"],["fxFlex.gt-sm","23","fxFlex","100"],[3,"file"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3," Upload "),e.qZA(),e._UZ(4,"hr",3),e.TgZ(5,"div",4),e.YNc(6,ro,2,0,"ng-container",5),e.ALo(7,"async"),e.qZA()()(),e.TgZ(8,"div",6)(9,"input",7,8),e.NdJ("change",function(s){return i.onFileInputClick(s)}),e.qZA()(),e.TgZ(11,"div",9)(12,"div",10),e.NdJ("click",function(){return i.onFileUpload()}),e.TgZ(13,"div",11),e._uU(14," Select items to upload "),e.qZA(),e.TgZ(15,"div")(16,"button",12),e.ALo(17,"async"),e.TgZ(18,"mat-icon"),e._uU(19,"add"),e.qZA()()()(),e.YNc(20,fo,2,1,"ng-container",5),e.ALo(21,"async"),e.TgZ(22,"div",13),e._UZ(23,"app-main-welcome",14),e.ALo(24,"async"),e.qZA()()),2&n&&(e.xp6(6),e.Q6J("ngIf",e.lcZ(7,4,i.fs.userFileApiWorking$)),e.xp6(10),e.Q6J("disabled",!e.lcZ(17,6,i.as.currentUser$)),e.xp6(4),e.Q6J("ngIf",e.lcZ(21,8,i.fs.filesUploadingAll$)),e.xp6(3),e.Q6J("currentUser",e.lcZ(24,10,i.as.currentUser$)))},directives:[h.xw,h.Wh,h.SQ,T.O5,Se,te.lW,Y.Hw,T.sg,h.yH,jn,ao],pipes:[T.Ov],styles:[".upload-action[_ngcontent-%COMP%]{border:1px solid #ccc;padding:5px 25px;border-radius:30px;background-color:#e6f2ff;cursor:pointer}.upload-action[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:20px;color:#5f5dbb}.upload-input[_ngcontent-%COMP%]{display:none;height:0px}.uploading-title[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{font-size:20px}.mb-10[_ngcontent-%COMP%]{margin-bottom:10px}"]}),t})();const Le=(0,r.PH)("[User Files Display/UI] Set user files display tab id",(0,r.Ky)()),ot=(0,r.PH)("[User Files Display/Table] Set page",(0,r.Ky)()),it=(0,r.PH)("[User Files Display/Table] Set display count per page",(0,r.Ky)()),we=(0,r.PH)("[User Files Display/Table] Set total count",(0,r.Ky)()),at=(0,r.PH)("[User Files Display/Galleria] Set current galleria item index",(0,r.Ky)()),st=(0,r.PH)("[User Files Display/Table] Searching via table filter",(0,r.Ky)()),rt=(0,r.PH)("[User Files Table/API] Toggle selected files",(0,r.Ky)()),lt=(0,r.PH)("[Upload/API] Reset all selected files"),ct="userTableFilesSelection",N=ye({selectId:function Oo(t){return t.id},sortComparer:function Uo(t,o){return t.dateUploaded&&o.dateUploaded?t.dateUploaded<o.dateUploaded?1:-1:1}}),Ao=N.getInitialState({apiWorking:!1,errMsg:void 0,error:!1}),pt=(0,r.Lq)(Ao,(0,r.on)(rt,(t,{photo:o,action:n})=>{if(n===D.ADD)return N.addMany(o,Object.assign({},t));if(n===D.REMOVE){const i=o.map(a=>a.id);return N.removeMany(i,Object.assign({},t))}return Object.assign({},t)}),(0,r.on)(lt,t=>N.removeAll(Object.assign(Object.assign({},t),{apiWorking:!1,lastClearSelectionsTime:(new Date).getTime()})))),gt=[{id:"refresh",label:"Refresh",icon:"refresh"}],Po=[{id:"delete",label:"Delete",icon:"delete"}],Lo=(0,r.Lq)({tabs:[{label:"Table",url:"table",icon:"table_view"},{label:"Galleria",url:"galleria",icon:"photo_library"}],selectedTabLabel:"Table",actionButtons:gt,pagination:{countPerPage:30,currentPage:0,totalCount:0,totalPages:0},queryParams:{},galleriaIndex:0,tableSearchTerm:null},(0,r.on)(Le,(t,{tab:o})=>{var n;return Object.assign(Object.assign({},t),{selectedTabLabel:null!==(n=null==o?void 0:o.label)&&void 0!==n?n:t.selectedTabLabel})}),(0,r.on)(ot,(t,{currentPage:o})=>Object.assign(Object.assign({},t),{pagination:Object.assign(Object.assign({},t.pagination),{currentPage:o})})),(0,r.on)(it,(t,{count:o})=>Object.assign(Object.assign({},t),{pagination:Object.assign(Object.assign({},t.pagination),{countPerPage:o})})),(0,r.on)(we,(t,{total:o})=>{const n=Math.ceil(o/30);return Object.assign(Object.assign({},t),{pagination:Object.assign(Object.assign({},t.pagination),{totalCount:o,totalPages:n})})}),(0,r.on)(at,(t,{index:o})=>Object.assign(Object.assign({},t),{galleriaIndex:o})),(0,r.on)(st,(t,{searchTerm:o})=>Object.assign(Object.assign({},t),{tableSearchTerm:o}))),oe=(0,r.ZF)(ct),Ie=((0,r.P1)(oe,N.getSelectors().selectIds),(0,r.P1)(oe,N.getSelectors().selectEntities),(0,r.P1)(oe,N.getSelectors().selectAll)),ut=((0,r.P1)(oe,N.getSelectors().selectTotal),(0,r.P1)(Ie,Ve,(t,o)=>t.some(i=>!!o.columnData.find(s=>i.id===s.id)))),wo=(0,r.P1)(Ie,ut,(t,o)=>{const n=[];return n.push(...gt),t.length>0&&o&&n.unshift(...Po),n}),Io=(0,r.P1)(oe,t=>t.lastClearSelectionsTime);let ie=(()=>{class t{constructor(n){this.store=n,this.getUserDisplayTabs$=this.store.select(nn),this.getAllTabOptions$=this.store.select(on),this.getFilesDisplayTableActionBtns$=this.store.select(wo),this.getTablePagination$=this.store.select(gn),this.getTableSelected$=this.store.select(Ie),this.hasAnySelectedOnCurrentTablePage$=this.store.select(ut),this.getLastClearSelectionsTime$=this.store.select(Io),this.getGalleriaCurrentItemIndex$=this.store.select(sn)}setUserFilesDisplayTab(n){this.store.dispatch(Le({tab:n}))}setCurrentPage(n){this.store.dispatch(ot({currentPage:n}))}setDisplayCountPerPage(n){this.store.dispatch(it({count:n}))}setTotalCount(n){this.store.dispatch(we({total:n}))}toggleFilesTableSelections(n){this.store.dispatch(rt(n))}resetFilesTableSelections(){this.store.dispatch(lt())}setGalleriaItemIndex(n){this.store.dispatch(at({index:n}))}onUserSearchFilter(n){this.store.dispatch(st({searchTerm:n}))}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(r.yh))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var dt=g(3251),ft=g(2722),Zo=g(8372),mt=g(1884),Mo=g(9205),q=g(3075),Ze=g(3489),Fo=g(7531);function Do(t,o){if(1&t&&e._UZ(0,"input",5),2&t){const n=e.oxw();e.Q6J("formControl",n.inputCtrl)}}function Eo(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){return e.CHM(n),e.oxw().clearInput()}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}let ko=(()=>{class t{constructor(n){this.fds=n,this.onDest$=new ue.x,this.inputCtrl=(0,Mo.j2)(null,!1)}ngOnInit(){var n;null===(n=this.inputCtrl)||void 0===n||n.valueChanges.pipe((0,ft.R)(this.onDest$),(0,Zo.b)(400),(0,mt.x)((i,a)=>!(null===a&&i||(null==i?void 0:i.trim())!==(null==a?void 0:a.trim()))),(0,U.U)(i=>i&&i.trim())).subscribe(i=>{this.fds.onUserSearchFilter(i)})}clearInput(){var n;null===(n=this.inputCtrl)||void 0===n||n.reset()}ngOnDestroy(){this.onDest$.next(),this.onDest$.complete()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(ie))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-main-history-table-filter-area"]],decls:7,vars:2,consts:[["fxLayout","row","fxLayoutAlign","start center","fxFlex","33%",1,"filter-parent"],[1,"example-form"],["appearance","standard",1,"form-field"],["matInput","","placeholder","Ex. cool.png",3,"formControl",4,"ngIf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matInput","","placeholder","Ex. cool.png",3,"formControl"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"form",1)(2,"mat-form-field",2)(3,"mat-label"),e._uU(4,"Filter results"),e.qZA(),e.YNc(5,Do,1,1,"input",3),e.YNc(6,Eo,3,0,"button",4),e.qZA()()()),2&n&&(e.xp6(5),e.Q6J("ngIf",i.inputCtrl),e.xp6(1),e.Q6J("ngIf",!0))},directives:[h.xw,h.Wh,h.yH,q._Y,q.JL,q.F,Ze.KE,Ze.hX,T.O5,Fo.Nt,q.Fj,q.JJ,q.oH,te.lW,Ze.R9,Y.Hw],styles:[".filter-parent[_ngcontent-%COMP%]   .example-form[_ngcontent-%COMP%], .filter-parent[_ngcontent-%COMP%]   .example-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{width:100%}"]}),t})();function Ho(t,o){1&t&&(e.ynx(0),e._UZ(1,"shared-loading-bar",8),e.BQk())}function No(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"a",12),e.NdJ("click",function(){const s=e.CHM(n).$implicit;return e.oxw(2).onTabClick(s)}),e.TgZ(1,"mat-icon",13),e._uU(2),e.qZA(),e._uU(3),e.qZA()}if(2&t){const n=o.$implicit,i=e.oxw().ngIf;e.Q6J("active",i.selectedTabLabel===n.label),e.xp6(2),e.Oqu(n.icon),e.xp6(1),e.hij(" ",n.label," ")}}function Qo(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"nav",10),e.YNc(2,No,4,3,"a",11),e.qZA(),e.BQk()),2&t){const n=o.ngIf;e.xp6(1),e.Q6J("disableRipple",!0),e.xp6(1),e.Q6J("ngForOf",n.tabs)}}function Ro(t,o){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"button",15),e.NdJ("click",function(){const s=e.CHM(n).$implicit;return e.oxw(2).onActionClick(s)}),e.TgZ(2,"div",16)(3,"div",17)(4,"mat-icon"),e._uU(5),e.qZA()(),e.TgZ(6,"div"),e._uU(7),e.qZA()()(),e.BQk()}if(2&t){const n=o.$implicit;e.xp6(5),e.Oqu(n.icon),e.xp6(2),e.hij(" ",n.label," ")}}function Bo(t,o){if(1&t&&(e.ynx(0),e.YNc(1,Ro,8,2,"ng-container",14),e.BQk()),2&t){const n=o.ngIf;e.xp6(1),e.Q6J("ngForOf",n)}}function Yo(t,o){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",18)(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div",19)(5,"button",20),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).onClearSelection()}),e.TgZ(6,"mat-icon"),e._uU(7,"close"),e.qZA()()()(),e.BQk()}if(2&t){const n=e.oxw().ngIf;e.xp6(3),e.hij(" ",n.length," selected ")}}function Go(t,o){if(1&t&&(e.ynx(0),e.YNc(1,Yo,8,1,"ng-container",5),e.BQk()),2&t){const n=o.ngIf;e.xp6(1),e.Q6J("ngIf",n.length>0)}}let Jo=(()=>{class t{constructor(n,i,a,s,l,y,v){this.fs=n,this.rs=i,this.as=a,this.ts=s,this.ufds=l,this.router=y,this.route=v}ngOnInit(){this.fs.getUserFiles()}onTabClick(n){this.router.navigate(["./",n.url],{relativeTo:this.route})}onActionClick(n){"refresh"===n.id&&this.fs.getUserFiles()}onClearSelection(){this.ufds.resetFilesTableSelections()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(H),e.Y36(be),e.Y36(V.e),e.Y36(Ke.q),e.Y36(ie),e.Y36(k.F0),e.Y36(k.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-main-history"]],decls:27,vars:15,consts:[["fxLayout","column","fxLayoutAlign","start center",1,"w-100"],[1,"title","quicksand","fw-500","w-100"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","5px"],[1,"w-100","part-loading"],[1,"w-100","api-loading"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center",1,"actions","w-100"],[1,"selection"],[1,"w-100"],[1,"w-100","part-loading","no-top"],["mat-tab-nav-bar","","mat-align-tabs","start",1,"w-100","tab-nav",3,"disableRipple"],["mat-tab-link","",3,"active","click",4,"ngFor","ngForOf"],["mat-tab-link","",3,"active","click"],[1,"tab-icon","mr-1"],[4,"ngFor","ngForOf"],["mat-button","","color","primary",3,"click"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","8px"],["fxLayout","row","fxLayoutAlign","center center"],["fxLayout","row","fxLayoutGap","3px","fxLayoutAlign","end center"],[1,"clear"],["mat-icon-button","","title","Clear selection","color","primary",3,"click"]],template:function(n,i){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),e._uU(4," My Files "),e.qZA(),e.TgZ(5,"div"),e._uU(6),e.ALo(7,"async"),e.qZA()(),e._UZ(8,"hr",3),e.TgZ(9,"div",4),e.YNc(10,Ho,2,0,"ng-container",5),e.ALo(11,"async"),e.qZA()(),e.YNc(12,Qo,3,2,"ng-container",5),e.ALo(13,"async"),e.TgZ(14,"div",6)(15,"div"),e.YNc(16,Bo,2,1,"ng-container",5),e.ALo(17,"async"),e.qZA(),e.TgZ(18,"div",7),e.YNc(19,Go,2,1,"ng-container",5),e.ALo(20,"async"),e.qZA()(),e.TgZ(21,"div",8),e._UZ(22,"hr",9),e.qZA(),e.TgZ(23,"div",8),e._UZ(24,"app-main-history-table-filter-area"),e.qZA(),e.TgZ(25,"div",8),e._UZ(26,"router-outlet"),e.qZA()()),2&n){let a;e.xp6(6),e.hij(" (",null==(a=e.lcZ(7,5,i.fs.getFilesAll$))?null:a.length,") "),e.xp6(4),e.Q6J("ngIf",e.lcZ(11,7,i.fs.userFileApiWorking$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(13,9,i.ufds.getUserDisplayTabs$)),e.xp6(4),e.Q6J("ngIf",e.lcZ(17,11,i.ufds.getFilesDisplayTableActionBtns$)),e.xp6(3),e.Q6J("ngIf",e.lcZ(20,13,i.ufds.getTableSelected$))}},directives:[h.xw,h.Wh,h.SQ,T.O5,Se,dt.BU,T.sg,dt.Nj,Y.Hw,te.lW,ko,k.lC],pipes:[T.Ov],styles:[".title[_ngcontent-%COMP%]{font-size:20px}.mb-10[_ngcontent-%COMP%]{margin-bottom:10px}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none}nav[_ngcontent-%COMP%]   a.mat-tab-label-active[_ngcontent-%COMP%]{color:#403e3e;opacity:1}.container-fluid[_ngcontent-%COMP%]   .mat-tab-header[_ngcontent-%COMP%]{margin-bottom:15px}.actions[_ngcontent-%COMP%]   .selection[_ngcontent-%COMP%]{font-size:14px;font-weight:300}.actions[_ngcontent-%COMP%]   .selection[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{height:36px;line-height:36px}nav.tab-nav[_ngcontent-%COMP%]{margin-bottom:10px}"]}),t})();var ce=g(449),_t=g(6087),$o=g(4847),I=g(8279),jo=g(7446),Wo=g(3322),qo=g(105);class z{transform(o){let n=o;switch(o){case"photoUrl":n="File URL";break;case"fileName":n="File Name";break;case"fileSize":n="Size";break;case"dateUploaded":n="Date Uploaded"}return n}}z.\u0275fac=function(o){return new(o||z)},z.\u0275pipe=e.Yjl({name:"tableColumnDisplay",type:z,pure:!0}),(0,Xe.gn)([(0,et.Z)()],z.prototype,"transform",null);let zo=(()=>{class t{constructor(n){this.dp=n}transform(n,i){let a=n;switch(i){case"photoUrl":a=""+n,a=a.slice(0,25)+"..."+a.slice(-15);break;case"dateUploaded":a=this.dp.transform(n,"FROMNOW");break;case"fileSize":a=(0,qo.gB)(n,!0)}return a}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(W.o,16))},t.\u0275pipe=e.Yjl({name:"tableDataDisplay",type:t,pure:!0}),t})();function Vo(t,o){if(1&t&&(e.TgZ(0,"div",6),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.AsE(" Page ",n.pagination.currentPage+1," / ",n.pagination.totalPages," ")}}function Ko(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"th",14)(1,"mat-checkbox",15),e.NdJ("change",function(a){return e.CHM(n),e.oxw(2).onMasterToggle(a)}),e.qZA()()}if(2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("checked",n.selection.hasValue()&&n.isAllSelected())("indeterminate",n.selection.hasValue()&&!n.isAllSelected())}}function Xo(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"td",16)(1,"mat-checkbox",17),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const l=e.CHM(n).$implicit;return e.oxw(2).onRowCheckboxToggle(l,a)}),e.qZA()()}if(2&t){const n=o.$implicit,i=o.index,a=e.oxw(2);let s;e.xp6(1),e.Q6J("checked",a.selection.isSelected(n))("title",30*(null!==(s=null==a.pagination?null:a.pagination.currentPage)&&void 0!==s?s:0)+(i+1))}}function ei(t,o){if(1&t&&(e.TgZ(0,"th",14),e._uU(1),e.ALo(2,"tableColumnDisplay"),e.qZA()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,n)," ")}}function ti(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"a",22),e._uU(2),e.ALo(3,"tableDataDisplay"),e.qZA(),e.BQk()),2&t){const n=e.oxw().$implicit,i=e.oxw().$implicit;e.xp6(1),e.Q6J("href",n[i],e.LSH),e.xp6(1),e.hij(" ",e.xi3(3,2,n[i],i)," ")}}function ni(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"tableDataDisplay"),e.qZA(),e.BQk()),2&t){const n=e.oxw().$implicit,i=e.oxw().$implicit;e.xp6(2),e.hij(" ",e.xi3(3,1,n[i],i)," ")}}function oi(t,o){if(1&t&&(e.TgZ(0,"td",16),e.ynx(1,19),e.YNc(2,ti,4,5,"ng-container",20),e.YNc(3,ni,4,4,"ng-container",21),e.BQk(),e.qZA()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngSwitch",n),e.xp6(1),e.Q6J("ngSwitchCase","photoUrl")}}function ii(t,o){if(1&t&&(e.ynx(0)(1,18),e.YNc(2,ei,3,3,"th",9),e.YNc(3,oi,4,2,"td",10),e.BQk()()),2&t){const n=o.$implicit;e.xp6(1),e.Q6J("matColumnDef",n)}}function ai(t,o){1&t&&e._UZ(0,"tr",23)}const si=function(t){return{"strip-bg":t,"custom-row":!0}};function ri(t,o){1&t&&e._UZ(0,"tr",24),2&t&&e.Q6J("ngClass",e.VKq(1,si,o.even))}function li(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"table",7),e.ynx(2,8),e.YNc(3,Ko,2,2,"th",9),e.YNc(4,Xo,2,2,"td",10),e.BQk(),e.YNc(5,ii,4,1,"ng-container",11),e.YNc(6,ai,1,0,"tr",12),e.YNc(7,ri,1,3,"tr",13),e.qZA(),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("dataSource",n.dataSource),e.xp6(4),e.Q6J("ngForOf",n.columnIds),e.xp6(1),e.Q6J("matHeaderRowDef",n.columnIdsWithSelect)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",n.columnIdsWithSelect)}}let ci=(()=>{class t{constructor(){this.columnIds=[],this.columnData=[],this.tableActionBtns=[],this.selectedRows=[],this.clearCurrentSelectionTime=0,this.pageEvent=new e.vpe,this.selectedRowsChange=new e.vpe,this.selection=new ce.Ov(!0,[]),this.columnIdsWithSelect=[]}ngOnChanges(n){var i,a;if(Object.keys(n),(n.columnData||n.columnIds||n.pagination)&&(this.dataSource=new I.by(this.columnData),this.columnIdsWithSelect=["select",...this.columnIds],this.selection=new ce.Ov(!0,[]),this.selectedRows&&(null!==(i=this.selectedRows.length)&&void 0!==i?i:0)>0)){const l=[];null===(a=this.selectedRows)||void 0===a||a.forEach(y=>{const v=this.columnData.findIndex(S=>S.id===y.id);v>-1&&l.push(this.columnData[v])}),this.selection=new ce.Ov(!0,l)}n.clearCurrentSelectionTime&&(this.selection=new ce.Ov(!0,[]))}ngOnInit(){}ngAfterViewInit(){}onPage(n){this.pageEvent.emit(n)}isAllSelected(){var n,i;return this.selection.selected.length===(null!==(i=null===(n=this.dataSource)||void 0===n?void 0:n.data.length)&&void 0!==i?i:0)}onMasterToggle(n){if(this.isAllSelected()&&this.dataSource)return this.selection.clear(),void this.emitSelection(D.REMOVE,this.dataSource.data);this.dataSource&&(this.selection.select(...this.dataSource.data),this.emitSelection(D.ADD,this.dataSource.data))}onRowCheckboxToggle(n,i){this.selection.toggle(n),this.emitSelection(i.checked?D.ADD:D.REMOVE,[n])}emitSelection(n,i){this.selectedRowsChange.emit({action:n,photo:i})}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-shared-table-selectable"]],viewQuery:function(n,i){if(1&n&&(e.Gf($o.YE,5),e.Gf(_t.NW,5)),2&n){let a;e.iGM(a=e.CRH())&&(i.sort=a.first),e.iGM(a=e.CRH())&&(i.paginator=a.first)}},inputs:{columnIds:"columnIds",columnData:"columnData",tableActionBtns:"tableActionBtns",pagination:"pagination",selectedRows:"selectedRows",clearCurrentSelectionTime:"clearCurrentSelectionTime"},outputs:{pageEvent:"pageEvent",selectedRowsChange:"selectedRowsChange"},features:[e.TTD],decls:7,vars:7,consts:[["fxLayout","column","fxLayoutAlign","start center",1,"table-parent","w-100"],[1,"filter"],["fxLayout","row","fxLayoutAlign","space-between center",1,"paginator","w-100"],["class","page-info",4,"ngIf"],[3,"showFirstLastButtons","length","hidePageSize","pageIndex","pageSize","page"],[4,"ngIf"],[1,"page-info"],["mat-table","",1,"mat-elevation-z0","img-table",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"ngClass",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["color","primary",3,"checked","indeterminate","change"],["mat-cell",""],["color","primary",3,"checked","title","click","change"],[3,"matColumnDef"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["target","_blank",3,"href"],["mat-header-row",""],["mat-row","",3,"ngClass"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,Vo,2,2,"div",3),e.TgZ(4,"div")(5,"mat-paginator",4),e.NdJ("page",function(s){return i.onPage(s)}),e.qZA()()(),e.YNc(6,li,8,5,"ng-container",5),e.qZA()),2&n&&(e.xp6(3),e.Q6J("ngIf",i.pagination),e.xp6(2),e.Q6J("showFirstLastButtons",!0)("length",null==i.pagination?null:i.pagination.totalCount)("hidePageSize",!0)("pageIndex",null==i.pagination?null:i.pagination.currentPage)("pageSize",30),e.xp6(1),e.Q6J("ngIf",i.dataSource))},directives:[h.xw,h.Wh,T.O5,_t.NW,I.BZ,I.w1,I.fO,I.ge,jo.oG,I.Dz,I.ev,T.sg,T.RF,T.n9,T.ED,I.as,I.XQ,I.nj,I.Gk,T.mk,Wo.oO],pipes:[z,zo],styles:[".table-parent[_ngcontent-%COMP%]   .img-table[_ngcontent-%COMP%]   .mat-table-sticky[_ngcontent-%COMP%]{top:-1px!important}.table-parent[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.table-parent[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%], .table-parent[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-footer-row[_ngcontent-%COMP%]{height:36px}.table-parent[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-header-row[_ngcontent-%COMP%]{height:37px;background-color:#cddae7}.table-parent[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:hover{background-color:#0f65bd0d}.table-parent[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .strip-bg[_ngcontent-%COMP%]{background-color:#cccccc1a}.table-parent[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding-right:16px;padding-top:2px}.table-parent[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0}.table-parent[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding-right:10px;padding-top:3px}.table-parent[_ngcontent-%COMP%]   .paginator[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{font-size:12px;font-weight:400;line-height:18px}"],changeDetection:0}),t})();function pi(t,o){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",4)(2,"app-shared-table-selectable",5),e.NdJ("pageEvent",function(a){return e.CHM(n),e.oxw(2).onPage(a)})("selectedRowsChange",function(a){return e.CHM(n),e.oxw(2).onRowSelectChange(a)}),e.ALo(3,"async"),e.ALo(4,"async"),e.ALo(5,"async"),e.ALo(6,"async"),e.qZA()(),e.BQk()}if(2&t){const n=e.oxw().ngIf,i=e.oxw();e.xp6(2),e.Q6J("columnIds",n.columnIds)("columnData",n.columnData)("tableActionBtns",e.lcZ(3,6,i.fds.getFilesDisplayTableActionBtns$))("pagination",e.lcZ(4,8,i.fds.getTablePagination$))("selectedRows",e.lcZ(5,10,i.fds.getTableSelected$))("clearCurrentSelectionTime",e.lcZ(6,12,i.fds.getLastClearSelectionsTime$))}}function gi(t,o){if(1&t&&(e.ynx(0),e.YNc(1,pi,7,14,"ng-container",3),e.BQk()),2&t){const n=o.ngIf;e.oxw();const i=e.MAs(4);e.xp6(1),e.Q6J("ngIf",!1===n.apiLoading)("ngIfElse",i)}}function ui(t,o){1&t&&(e.TgZ(0,"div",4),e._UZ(1,"app-shared-loading"),e.qZA())}let di=(()=>{class t{constructor(n,i){this.fus=n,this.fds=i}ngOnInit(){}onPage(n){this.fds.setCurrentPage(n.pageIndex)}onRowSelectChange(n){this.fds.toggleFilesTableSelections(n)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(H),e.Y36(ie))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-main-history-table-view"]],decls:5,vars:3,consts:[["fxLayout","column","fxLayoutAlign","start center","fxLayoutGap","5px",1,"w-100"],[4,"ngIf"],["isLoading",""],[4,"ngIf","ngIfElse"],[1,"w-100"],[3,"columnIds","columnData","tableActionBtns","pagination","selectedRows","clearCurrentSelectionTime","pageEvent","selectedRowsChange"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0),e.YNc(1,gi,2,2,"ng-container",1),e.ALo(2,"async"),e.YNc(3,ui,2,0,"ng-template",null,2,e.W1O),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,i.fus.getFilesTableData$)))},directives:[h.xw,h.Wh,h.SQ,T.O5,ci,de],pipes:[T.Ov],styles:[""]}),t})();var fi=g(555),mi=g(9783);function _i(t,o){if(1&t&&(e.TgZ(0,"div",8)(1,"div",9),e._uU(2),e.qZA(),e.TgZ(3,"div"),e._UZ(4,"img",10),e.qZA(),e._UZ(5,"div"),e.qZA()),2&t){const n=o.$implicit,i=e.oxw(3);e.xp6(2),e.hij(" # ",i.activeIndex+1," "),e.xp6(2),e.Q6J("src",n.photoUrl,e.LSH)("title",n.fileName)}}function hi(t,o){if(1&t&&(e.TgZ(0,"div",11),e._UZ(1,"img",12),e.qZA()),2&t){const n=o.$implicit;e.xp6(1),e.Q6J("src",n.photoUrl,e.LSH)}}const yi=function(){return{"max-width":"100%"}};function xi(t,o){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",4)(2,"p-galleria",5),e.NdJ("activeIndexChange",function(a){return e.CHM(n),e.oxw(2).activeIndex=a})("activeIndexChange",function(a){return e.CHM(n),e.oxw(2).onItemChange(a)}),e.YNc(3,_i,6,3,"ng-template",6),e.YNc(4,hi,2,1,"ng-template",7),e.qZA()(),e.BQk()}if(2&t){const n=e.oxw().ngIf,i=e.oxw();e.xp6(2),e.Q6J("responsiveOptions",i.responsiveOptions)("containerStyle",e.DdM(7,yi))("numVisible",8)("value",n)("activeIndex",i.activeIndex)("circular",!0)("showItemNavigators",!0)}}function Ti(t,o){if(1&t&&(e.ynx(0),e.YNc(1,xi,5,8,"ng-container",3),e.ALo(2,"async"),e.BQk()),2&t){const n=e.oxw(),i=e.MAs(4);e.xp6(1),e.Q6J("ngIf",!1===e.lcZ(2,2,n.fus.userFilesApiLoading$))("ngIfElse",i)}}function bi(t,o){1&t&&(e.TgZ(0,"div",13),e._UZ(1,"app-shared-loading"),e.qZA())}const Ci=[{path:"",component:Ct,children:[{path:"",redirectTo:"upload",pathMatch:"full"},{path:"upload",component:mo,data:{pageTitle:"Upload Files"}},{path:"history",component:Jo,data:{pageTitle:"My Files"},children:[{path:"",redirectTo:"table",pathMatch:"full"},{path:"table",component:di,data:{pageTitle:"Table View",id:"table"}},{path:"galleria",component:(()=>{class t{constructor(n,i){this.fus=n,this.fds=i,this.activeIndex=0,this.compDest$=new ue.x,this.responsiveOptions=[{breakpoint:"1024px",numVisible:5},{breakpoint:"768px",numVisible:3},{breakpoint:"560px",numVisible:1}]}ngOnInit(){this.fds.getGalleriaCurrentItemIndex$.pipe((0,ft.R)(this.compDest$)).subscribe(n=>{this.activeIndex=n})}onItemChange(n){this.fds.setGalleriaItemIndex(+n)}ngOnDestroy(){this.compDest$.next(),this.compDest$.complete()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(H),e.Y36(ie))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-main-history-galleria-view"]],decls:5,vars:3,consts:[["fxLayout","column","fxLayoutAlign","start center","fxLayoutGap","5px",1,"w-100"],[4,"ngIf"],["isLoading",""],[4,"ngIf","ngIfElse"],[1,"galleria"],[3,"responsiveOptions","containerStyle","numVisible","value","activeIndex","circular","showItemNavigators","activeIndexChange"],["pTemplate","item"],["pTemplate","thumbnail"],["fxLayout","column","fxLayoutAlign","space-between center",1,"body-img"],[1,"index","roboto","mt-1"],[2,"width","100%","display","block",3,"src","title"],[1,"grid","grid-nogutter","justify-content-center"],[1,"preview",3,"src"],[1,"w-100"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0),e.YNc(1,Ti,3,4,"ng-container",1),e.ALo(2,"async"),e.YNc(3,bi,2,0,"ng-template",null,2,e.W1O),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,i.fus.getFilesAll$)))},directives:[h.xw,h.Wh,h.SQ,T.O5,fi.dz,mi.jx,de],pipes:[T.Ov],styles:[".galleria[_ngcontent-%COMP%]{width:100%}.galleria[_ngcontent-%COMP%]   .index[_ngcontent-%COMP%]{color:#fff}.galleria[_ngcontent-%COMP%]   img.preview[_ngcontent-%COMP%]{height:5rem;width:5rem}.galleria[_ngcontent-%COMP%]   .body-img[_ngcontent-%COMP%]{height:30rem;width:30rem}"]}),t})(),data:{pageTitle:"Galleria View",id:"galleria"}}]}]}];let vi=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[k.Bz.forChild(Ci)],k.Bz]}),t})();var ae=g(3900),Oi=g(8382),se=g(9646),Ui=g(6556);let Ai=(()=>{class t{constructor(n,i,a){this.actions$=n,this.us=i,this.as=a,this.getUserFiles$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(le,he),(0,x.IC)(()=>this.as.currentUser$),(0,U.U)(s=>s[1]),(0,ae.w)(s=>(0,Oi.s)(()=>!!s,this.us.getUserPhotos(null==s?void 0:s.email).pipe((0,ae.w)(l=>[we({total:l.length}),Re({files:l})]),(0,ee.K)(l=>(0,se.of)(Et({errMsg:(0,Ui.S)(l)})))),(0,se.of)(Be()))))),this.userChange$=(0,x.GW)(()=>this.as.currentUser$.pipe((0,mt.x)((s,l)=>(null==s?void 0:s.email)===(null==l?void 0:l.email)),(0,ae.w)(s=>(0,se.of)(le({user:s})))))}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(x.eX),e.LFG(H),e.LFG(V.e))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();var ht=g(5577),Me=g(8746),Fe=g(9300),Pi=g(7272);const Si=[(()=>{class t{constructor(n,i,a){this.actions$=n,this.us=i,this.as=a,this.attachFileForUpload$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(ke),(0,U.U)(s=>re({fileId:s.fileId,file:s.file})))),this.uploadFileStart$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(re),(0,ht.z)(s=>{var l;const y=s.fileId,v=s.file,S=null!==(l=v.name)&&void 0!==l?l:"File-name-"+(new Date).getTime(),Z=(new Date).getTime(),L=this.us.uploadFile(v,S);let F=[L.task.percentageChanges().pipe((0,U.U)(A=>({fileId:y,percent:A})),(0,Me.x)(()=>{})),L.ref.getDownloadURL().pipe((0,U.U)(A=>({fileId:y,url:A})),(0,Me.x)(()=>{}))];return(0,Pi.z)(...F).pipe((0,U.U)(A=>{var Q;const _=null!==(Q=A.percent)&&void 0!==Q?Q:A.url?100:A.percent;return me({fileId:y,fileName:S,fileSize:s.file.size,uploadDate:Z,downloadUrl:A.url,progress:_})}),(0,ee.K)(A=>(console.error("Upload Error!"+A),(0,se.of)(Ne({errMsg:A})))),(0,Me.x)(()=>{}))}))),this.uploadFileFinished$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(me),(0,Fe.h)(s=>!(!s.downloadUrl||100!==s.progress)),(0,U.U)(s=>fe({fileId:s.fileId,fileName:s.fileName,fileSize:s.fileSize,uploadDate:s.uploadDate,downloadUrl:s.downloadUrl})))),this.updateUserPhotoDatabaseAfterUploadSuccess$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(fe),(0,U.U)(s=>_e({photoData:{id:s.fileId,dateUploaded:s.uploadDate,fileId:s.fileId,fileName:s.fileName,fileSize:s.fileSize,photoUrl:s.downloadUrl}})))),this.updateUserPhotoDatabase$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(_e),(0,x.IC)(()=>this.as.currentUser$),(0,Fe.h)(s=>{var l;return!!(null===(l=s[1])||void 0===l?void 0:l.email)}),(0,ht.z)(s=>{var l;const y=null===(l=s[1])||void 0===l?void 0:l.email,S=this.us.addPhotoUrl(s[0].photoData,y).operationObs,Z=s[0].photoData.id;return S.then(L=>{const F=Object.assign(Object.assign({},s[0].photoData),{id:Z});return he({photoData:F})}).catch(L=>Qe({errMsg:L}))})))}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(x.eX),e.LFG(H),e.LFG(V.e))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})()],Ii=(0,r.Lq)({progressSnackbarDisplay:!1,progressDialogDisplay:!1},(0,r.on)(ne,(t,{status:o})=>{let n=!!t.progressDialogDisplay;return!1===o&&(n=!1),Object.assign(Object.assign({},t),{progressSnackbarDisplay:o,progressDialogDisplay:n})}),(0,r.on)(Ae,(t,{status:o})=>Object.assign(Object.assign({},t),{progressDialogDisplay:o})),(0,r.on)(tt,t=>Object.assign(Object.assign({},t),{progressDialogDisplay:!1})));var Zi=g(8505);const Mi=[(()=>{class t{constructor(n,i,a,s){this.actions$=n,this.pss=i,this.fs=a,this.pds=s,this.showSnackbarOnFileUploadStart$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(re),(0,U.U)(()=>ne({status:!0})))),this.toggleProgressSnackbar$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(ne),(0,Zi.b)(l=>{l.status?this.pss.getProgressSnackbar({fileStatus:this.fs.filesUploadingAll$,isFilesUploadFinished:this.fs.isFilesUploadFinished$,uploadingsAndTotalFiles:this.fs.uploadingsAndTotalFiles$}):this.pss.closeProgressSnackbar()})),{dispatch:!1}),this.toggleProgressDialog$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(Ae),(0,ae.w)(l=>l.status?this.pds.openDialog({fileStatus:this.fs.filesUploadingAll$,isFilesUploadFinished:this.fs.isFilesUploadFinished$,uploadingsAndTotalFiles:this.fs.uploadingsAndTotalFiles$}).afterClosed().pipe((0,U.U)(v=>v)):(this.pds.closeDialog(),(0,se.of)(!1))),(0,Fe.h)(l=>!1!==l),(0,U.U)(l=>{const y=l?JSON.parse(JSON.stringify(l)):void 0;return(null==y?void 0:y.action)===j.CLOSE?ne({status:!1}):tt()})))}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(x.eX),e.LFG(Pe),e.LFG(H),e.LFG(nt))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})()];let Fi=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[],imports:[[Ee.n]]}),t})();var Di=g(2182),Ei=g(9766);let ki=(()=>{class t{constructor(n,i,a){this.actions$=n,this.fds=i,this.rs=a,this.updateTabFromRouteParam$=(0,x.GW)(()=>this.actions$.pipe((0,x.l4)(Di.CE),(0,x.IC)(()=>this.rs.routeData$),(0,ae.w)(s=>this.fds.getAllTabOptions$.pipe((0,K.q)(1),(0,U.U)(l=>({allTabs:l,currentRouteId:s[1].id})))),(0,U.U)(s=>{const y=s.currentRouteId,v=s.allTabs.find(S=>S.url===y);return Le({tab:v})})))}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(x.eX),e.LFG(ie),e.LFG(Ei.c))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})(),Hi=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[],imports:[[Ee.n,Fi,yt.I,xt.d,r.Aw.forFeature(Ye,Jt),r.Aw.forFeature(Ge,en),r.Aw.forFeature("uploadProgressDialogSnackbar",Ii),r.Aw.forFeature(je,Lo),r.Aw.forFeature(ct,pt),x.sQ.forFeature(Si),x.sQ.forFeature([Ai]),x.sQ.forFeature(Mi),x.sQ.forFeature([ki]),ge.TE,vi]]}),t})()}}]);